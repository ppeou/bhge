<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/px-card/px-card.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/marked-element/marked-element.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/px-context-browser/px-context-browser.html">
<link rel="import" href="../../bower_components/px-context-browser/px-context-browser-trigger.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../../bower_components/px-dropdown/px-dropdown.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/sticky-element/sticky-element.html">
<link rel="import" href="../../bower_components/px-datetime-range-field/px-datetime-range-field.html" />
<link rel="import" href="../adaptix-custom-elements/custom-context-browser-trigger/custom-context-browser-trigger.html">

<link rel="import" href="../adaptix-v2-components/highcharts-graph/highcharts-risk-state-graph.html">
<link rel="import" href="../adaptix-v2-components/risk-state-table/risk-state-table.html">
<link rel="import" href="../adaptix-v2-components/adaptix-icons/adaptix-icons.html">
<link rel="import" href="subviews/risk-state-detailed-view.html">
<link rel="import" href="subviews/well-setup-view.html">
<link rel="import" href="myalerts-view.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">

<link rel="import" href="../../bower_components/paper-tooltip0/paper-tooltip.html">
<link rel="import" href="../adaptix-v2-components/well-details-table/welldetails-view.html">
<link rel="import" href="../adaptix-v2-components/well-details-table/wellSetpoints-view.html">
<link rel="import" href="../adaptix-v2-components/well-details-table/alertsDisposal-view.html">
<link rel="import" href="../adaptix-v2-components/well-myalerts-table/well-myalerts-table.html">
<link rel="import" href="../../bower_components/px-toggle/px-toggle.html">
<link rel="import" href="../../bower_components/px-spinner/px-spinner.html">
<link rel="import" href="../../bower_components/px-alert-message/px-alert-message.html">

<dom-module id="well-view">
    <template>
        <style include="iron-flex iron-flex-alignment">
            .main {
                color: white;
                height: 100%;
                width: 50%;
                padding: 0px 10px;
            }

            paper-icon-button {
                --paper-icon-button-disabled: {
                    background-color: #525962
                }
            }

            div.markdown-html>h1 {
                font-weight: normal;
                font-size: 2.6667rem;
                color: rgb(9, 129, 156);
            }

            div.markdown-html>h2 {
                margin-top: 0;
                font-size: 1.86667rem;
                font-weight: normal;
            }

            .card {
                background: #393e44;
                border-radius: 10px;
                border: 0px solid transparent;
                /* margin: 0px 15px 0px 15px; */
            }

            .tabSelected {
                background: #525962;
                margin: -15px 24px 2px -25px;
                padding: 20px 25px 10px 25px;
                border-radius: 10px 10px 0px 0px;
            }

            .tabSelected:hover {
                background: #6b7581;
            }

            .tabUnselected {
                background: transparent;
                margin: -15px 25px 2px -25px;
                padding: 20px 25px 10px 25px;
                border-radius: 10px 10px 0px 0px;
            }

            .tabUnselected:hover {
                background: rgba(82, 89, 98, 0.2);
            }

            #riskStatesContainer {
                background: #292c31;
            }

            #riskStates {
                background: #393e44;
                color: #fff;
                padding: 0px 0px 0px 0px;
                margin-left: 15px;
                margin-right: 15px;
                z-index: 2;
            }

            risk-state-table {
                z-index: 1;
            }

            #wellSetup {
                height: 800px;
                padding: 0px 0px 0px 0px;
                margin-left: 15px;
                margin-right: 15px;
            }

            #wellSetupView {
                width: 100%;
            }

            neon-animated-pages {
                z-index: 2;
            }

            #riskStateList {
                background-color: #393e44;
                color: #fff;
                margin: 15px 15px 0px 0px;
            }

            #contextNavigationBar {
                height: 60px;
                background-color: #525962;
            }

            custom-context-browser-trigger {
                height: 60px;
                width: 120px;
                position: relative;
            }

            .wellLeftButton {
                height: 60px;
                width: 60px;
            }

            .wellRightButton {
                height: 60px;
                width: 60px;
            }

            #riskStatesTitleBar {
                padding: 15px 25px 15px 25px;
                border-radius: 10px 10px 0px 0px;
                background: #393e44;
            }

            #riskStatesTitleBar:hover {
                cursor: pointer;
            }

            .masked {
                opacity: 0.6;
                /* Real browsers */
                filter: alpha(opacity=60);
                /* MSIE */
                pointer-events: none;
            }

            .notmasked {
                visibility: visible;
            }

            #myAlertsButton {
                position: absolute;
                right: 14%;
                top: -48px
            }

            .custom-icon {
                --iron-icon-width: 36px;
                --iron-icon-height: 54px;
            }

            .orangeColor {
                fill: orange;
                cursor: pointer;
                font-size: 12px;
            }

            .confirmdialogBox {
                background-color: rgb(82, 89, 98);
                color: white;
                width: 24%;
                border-radius: 4px;
            }

            .switch {
                position: relative;
                display: inline-block;
                width: 45px;
                height: 20px;
            }

            .switch input {
                display: none;
            }

            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                -webkit-transition: .4s;
                transition: .4s;
            }

            .slider:before {
                position: absolute;
                content: "";
                height: 12px;
                width: 12px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                -webkit-transition: .4s;
                transition: .4s;
            }

            input:checked+.slider {
                background-color: #3370FF;
            }

            input:focus+.slider {
                box-shadow: 0 0 1px #2196F3;
            }

            input:checked+.slider:before {
                -webkit-transform: translateX(26px);
                -ms-transform: translateX(26px);
                transform: translateX(26px);
            }

            /* Rounded sliders */
            .slider.round {
                border-radius: 34px;
            }

            .slider.round:before {
                border-radius: 50%;
            }

            :host {
                display: inline-block;
                padding: 0px;
            }

            .div-table {
                display: table;
                margin: 0px 0px;
                padding: 10px 0px 10px 0px;
                width: 100%;
                background-color: #525962;
                border-spacing: 5px;
                cursor: pointer;
                color: white;
                font-family: "GE Inspira Sans", sans-serif;
                font-size: 14px;
                text-align: left;
                font-weight: normal;
            }

            .div-sub-table {
                display: table;
                width: 100%;
                margin: 0px 0px;
                background-color: transparent;
                color: white;
                font-size: 14px;
                font-weight: normal;
            }

            .colapsedDiv {
                width: 0%;
                height: 0%;
            }

            .tr1 {
                display: block;
                padding-top: 10px;
                padding-bottom: 10px;
                background: #727c89;
            }

            .trColor:nth-child(even) {
                display: block;
                padding-top: 10px;
                padding-bottom: 10px;
                background: #525962;
            }

            .trColor:nth-child(odd) {
                display: block;
                padding-top: 10px;
                padding-bottom: 10px;
                background: #727c89;
            }

            .tr {
                display: table-row;
                padding: 5px 10px;
            }

            .tcheader {
                width: 1250px;
                text-align: center;
            }

            .tc {
                display: table-cell;
                vertical-align: top;
                /* padding: 5px 10px; */
            }

            .tc1 {
                width: 210px;
                text-align: center;
            }

            .tcParams {
                min-width: 180px;
                text-align: center;
            }

            .tcBHT {
                width: 85px;
                text-align: center;
            }

            .tc6 {
                width: 200px;
                text-align: left;
            }

            .tc3 {
                width: 240px;
                text-align: right
            }

            .tc4 {
                width: 1px;
            }

            .tc5 {
                width: 2px;
            }

            .imageStyle {
                display: inline-block;
                position: relative;
                margin: -15px -25px -5px 0px;
                /* background: blue; */
                outline: none;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                cursor: pointer;
                z-index: 0;
                line-height: 1;
                width: 20px;
                height: 20px;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
                -webkit-tap-highlight-color: transparent;
                box-sizing: border-box !important;
            }

            .btn-group .button {
                background-color: rgb(67, 67, 67);
                /* Green */
                color: white;
                padding: 10px 22px;
                text-align: center;
                text-decoration: none;
                font-size: 12px;
                cursor: pointer;
                width: 200px;
                border-radius: 5px;
                border: 1px solid rgb(67, 67, 67);
            }

            .btn-group .button:hover {
                background-color: #23343f;
            }

            .inputForm {
                border-radius: 5px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                opacity: 1;
                background-color: rgb(67, 67, 67);
                color: white;
                width: 50px;
                text-align: center
            }

            .bhtinputForm {
                border-radius: 5px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                opacity: 1;
                background-color: #727c89;
                color: white;
                width: 50px;
                text-align: center;
                margin-left: 10px;
            }

            .thresholdReadonlyClass {
                border-radius: 5px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                opacity: 1;
                background-color: #666F7B !important;
                color: white;
                width: 50px;
                text-align: center;
                margin-left: 10px;
                pointer-events: none;
            }

            .textarea:focus,
            .input:focus {
                outline: none;
            }


            .paperbutton {
                background-color: #393e44;
                height: 10px;
                min-width: unset;
                font-size: small;
                font-weight: 100;
            }

            *:focus {
                outline: none;
            }

            .dialogBox {
                background-color: rgb(82, 89, 98);
                color: white;
                width: 10%;
                border-radius: 4px;
            }

            .tableScroll {
                max-height: 335px;
                overflow-y: auto;
            }

            #alertMessage {
                position: absolute;
                top: 10px;
                right: 20px;
                z-index: 300;
            }

            .alertmanagement th {
                border: none;
                font-weight: normal;
                font-size: 15px;
                height: 30px;
            }

            .alertmanagementchild {
                text-align: left;
            }

            .alertmanagementchild tr {
                height: 30px;
                font-size: 15px;
            }

            .alertmanagementheader {
                height: 30px;
            }

            .buttonstatic {
                width: 80px;
                height: 24px;
                pointer-events: none;
                margin: 1px 0px 2px 0px;
                background-color: #393e44;
                border: 1px solid white;
                color: white;
                border-radius: 5px;
                text-align: center;
                font-size: 85%;
                margin-right: 10px;
            }

            .preventNavigation {
                pointer-events: none;
                cursor: progress;
            }

        </style>
        <iron-ajax id="displayColor" url="https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/my_alerts/status" params$='{{_setColorParams}}' handle-as="json" headers='{{_headers}}' on-response="getColorData"></iron-ajax>
        <iron-ajax id="ajaxWellSetup" url="https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup" params$='{{_getWellsetupParams}}' handle-as="json" headers='{{_headers}}' on-response="_onWellsetupResponse">
        </iron-ajax>
        <template is="dom-if" if="[[loaderFlag]]">
            <div style="outline:none;position: fixed;top: 50%;left: 50%;z-index: 103;">
                <px-spinner size="100"></px-spinner>
            </div>
        </template>
        <template is="dom-if" if="[[alertVisible]]">
            <px-alert-message id="alertMessage" type="important" action="dismiss" auto-dismiss="5000" message-title="[[messageTitle]]" message="[[messageContent]]" visible="[[alertVisible]]" language="en">
            </px-alert-message>
        </template>
        <template is="dom-if" if="[[hidemyAlerts]]">
            <div id="myAlertsButton" class="horizontal layout" on-tap="showMyAlerts">
                <template is="dom-if" if="[[getColor]]">
                    <px-icon class="custom-icon orangeColor" icon="px-fea:alerts">
                        <px-tooltip orientation="left" tooltip-message="My Alerts"></px-tooltip>
                    </px-icon>
                </template>
                <template is="dom-if" if="[[!getColor]]">
                    <px-icon class="custom-icon" icon="px-fea:alerts">
                        <px-tooltip orientation="left" tooltip-message="My Alerts"></px-tooltip>
                    </px-icon>
                </template>
            </div>
        </template>
        <template is="dom-if" if="[[showmyAlerts]]">
            <div id="myAlertsButton" class="horizontal layout" on-tap="hideMyAlerts">
                <template is="dom-if" if="[[getColor]]">
                    <px-icon class="custom-icon orangeColor" icon="px-fea:alerts">
                        <px-tooltip orientation="left" tooltip-message="My Alerts"></px-tooltip>
                    </px-icon>
                </template>
                <template is="dom-if" if="[[!getColor]]">
                    <px-icon class="custom-icon" icon="px-fea:alerts">
                        <px-tooltip orientation="left" tooltip-message="My Alerts"></px-tooltip>
                    </px-icon>
                </template>
            </div>
        </template>
        <template is="dom-if" if="[[showmyAlerts]]">
            <well-myalerts-table id="wellMyAlertsTable"></well-myalerts-table>
        </template>
        <template is="dom-if" if="[[hidemyAlerts]]">
            <div id="contextNavigationBar" class$={{loadingDataMode}}>
                <div class="horizontal layout" style="width: 100%; height: 100%;">
                    <div class="wellLeftButton">
                        <paper-icon-button on-tap="backWell" disabled="{{disableBack}}" src="../adaptix-v2-components/adaptix-icons/well-view-left-nav.png" style="width: 100%; height: 100%;">
                        </paper-icon-button>
                    </div>
                    <div id="contextBrowsertrigger" class$={{checkShoworHide}}>
                        <custom-context-browser-trigger id="contextbrowsertrigger" trigger={{openTrigger}} top-text={{wellId}} bottom-text={{padId}}></custom-context-browser-trigger>
                    </div>
                    <div class="wellRightButton">
                        <paper-icon-button disabled="{{disableNext}}" on-tap="nextWell" src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png" style="width: 100%; height: 100%;">
                        </paper-icon-button>
                    </div>
                    <div class="horizontal layout">
                        <px-dropdown id="refreshFrequencyDropdown" display-value="Every 5 mins" style="margin-left: 1439px;margin-top: 17px;" items='[{"key":"0","val":"No Refresh"},{"key":"5","val":"Every 5 mins"},{"key":"10","val":"Every 10 mins"},{"key":"15","val":"Every 15 mins"}]'>
                        </px-dropdown>
                        <px-icon class="u-pr u-pt" id="refreshTableBtn" style=" margin-top: 20px;margin-left: 4px;cursor:pointer;" title="Refresh data now" icon="px-nav:reload" on-tap="refreshPage"></px-icon>
                    </div>
                </div>
                <px-context-browser id="contextBrowser" open-trigger="[[openTrigger]]" items='[[assetHierarchy]]' selected-route="{{props.selectedRoute.value}}" selected="{{SelectedItem}}">
                </px-context-browser>
            </div>

            <body>
            <paper-dialog id="showConfirmBox" class="confirmdialogBox" entry-animation="fade-in-animation" exit-animation="fade-out-animation" modal>
                <div style="font-family:GE Inspira Sans;font-size:19px;font-Weight:bold;margin: 38px 0px 27px 0px;">Do you
                    want to close without sending action?</div>
                <div class="horizontal layout">
                    <paper-button style="background-color: #393e44; height: 18px;width: 2px;font-size: 11px; margin: 0px 14px 0px 266px;" dialog-dismiss on-tap="showAlertDetails" raised>Yes</paper-button>
                    <paper-button style="background-color: #393e44; height: 18px;width: 2px;font-size: 11px; margin: 0px 0px 0px 0px;" dialog-dismiss on-tap="dontShowNewAlertDetails" raised>NO</paper-button>
                </div>
            </paper-dialog>
            <!-- Risk states container -->
            <div id="riskStatesContainer">
                <div id="scrollArea" class="horizontal layout" style="width: 100%; height: calc(2129px + [[heightExtension]]); background-color: #292c31;">
                    <div class="vertical layout" style="width: 100%; height: 60%;">
                        <welldetails-view id=wellDetailsView well=[[wellId]] status=[[WellStatus]] icon=[[wellIconPath]] color=[[wellStatusColor]]></welldetails-view>
                        <template id="alertDisposalEnable" is="dom-if" if="[[showOrHideSetpoints]]">
                            <wellSetpoints-view id=wellSetpointsView well=[[wellId]]></wellSetpoints-view>
                        </template>
                        <template id="alertDisposalEnable" is="dom-if" if="[[!showOrHideSetpoints]]">
                            <alertsDisposal-view id=alertsDisposalview well=[[wellId]] title=[[alertTitle]] status=[[alertstatus]]>
                            </alertsDisposal-view>
                        </template>
                        <app-route route="{{route}}" pattern="/tabs/:tabName" data="{{data}}">
                        </app-route>

                        <neon-animated-pages selected='{{tabName}}' attr-for-selected='key' entry-animation='{{entryAnimation}}' exit-animation='{{exitAnimation}}'>
                            <neon-animatable key='riskStates'>
                                <div id="riskStates" class="card">
                                    <div class="vertical layout">
                                        <div id="riskStatesTitleBar" class="horizontal layout">
                                            <div class="horizontal layout" style="color: #fff; font-size: 20px; width: 50%;">
                                                <div class="tabSelected" on-tap="scrollToRiskStates">Risk States</div>
                                                <div class="tabUnselected" on-tap="navigateToWellSetup">Well Setup</div>
                                            </div>
                                            <px-datetime-range-field id="datepicker" style="width: calc(50% - 165px); display: flex; justify-content: flex-end;" show-buttons time-zone="Canada/Mountain" from-moment='{{fromMoment}}' to-moment='{{toMoment}}' min='{{min}}' max='{{max}}'></px-datetime-range-field>
                                            <px-dropdown id="datepickerDropdown" style="width: 130px; margin-left: 15px;" items="{{dateRangeDropdownData}}" button-style="default" display-value="Range" on-tap="selectedDateRangeDropdownForIndividualGraph" selected='{{selectedDateRangeDropdown}}' disable-clear>
                                            </px-dropdown>
                                            <px-dropdown id="aggregationDropdown" style="width: 122px; margin-left: 15px;" items="{{aggregationSettingDropdown}}" button-style="default" display-value="Aggregation" selected='{{selectedAggregationDropdown}}' disable-clear>
                                            </px-dropdown>
                                        </div>

                                        <div id="graphSection" class="horizontal layout wrap" style="width: 100%; background: #393e44;margin-top: -17px;height:901px">
                                            <highcharts-risk-state-graph id="graph6" chartid="chart6" titl="Return Pressure" at-risk="[[ReturnPressureState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.zero]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph1" chartid="chart1" titl="Emulsion" at-risk="[[EmulsionState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.zero]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph8" chartid="chart8" titl="SAGD Pressure" at-risk="[[SAGDPressureState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.zero]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph9" chartid="chart9" titl="Setpoints" at-risk="[[SetPointsState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.margin]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph2" chartid="chart2" titl="Vapour" at-risk="[[BadVapourState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.margin]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph7" chartid="chart7" titl="Sudden Pressure" at-risk="[[SuddenPressureChangeState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.margin]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph5" chartid="chart5" titl="BHT" at-risk="[[BHTState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.margin]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph3" chartid="chart3" titl="Produced Gas" at-risk="[[ProducedGasState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.margin]]">
                                            </highcharts-risk-state-graph>
                                            <highcharts-risk-state-graph id="graph4" chartid="chart4" titl="BSW & Bottom Water" at-risk="[[BSWBottomWaterState]]" height="[[graphSize.height]]" width='[[graphSize.width]]' margin="[[graphSize.margin]]">
                                            </highcharts-risk-state-graph>
                                        </div>
                                    </div>
                                </div>
                            </neon-animatable>
                            <neon-animatable key='riskStateDetailed'>
                                <risk-state-detailed-view id="riskStateDetailedView"></risk-state-detailed-view>
                            </neon-animatable>
                            <neon-animatable key='wellSetup'>
                                <div id="wellSetup">
                                    <div id="riskStatesTitleBar" class="horizontal layout" style="width:1443px;">
                                        <div class="horizontal layout" style="color: #fff; font-size: 20px; width: 50%;">
                                            <div class="tabUnselected" on-tap="navigateToRiskStates">Risk States</div>
                                            <div class="tabSelected" on-tap="scrollToWellsetup">Well Setup</div>
                                        </div>

                                    </div>
                                    <template is="dom-if" if="{{!wellSetupdataLoad}}">
                                        <div style="padding:50px 0; position: absolute;left:50% ">
                                            <px-spinner size="70"></px-spinner>
                                        </div>
                                    </template>
                                    <template is="dom-if" if="{{wellSetupdataLoad}}">
                                        <div style="width:1493px;margin-top:-17px;">
                                            <paper-dialog id="showDialogData" class="dialogBox">
                                                <div style="font-family:GE Inspira Sans;font-size:19px;font-Weight:bold;margin: 38px 0px 27px 0px;">
                                                    {{message}}</div>
                                            </paper-dialog>

                                            <template id="table" is="dom-repeat" items="{{wellTableData}}">
                                                <template is="dom-if" if="{{valueIsRightAlign(item.layout)}}">
                                                    <div class="div-table" id="panels" style="border-bottom:4px solid #393e44">
                                                        <div class="tr">
                                                            <div class="tc tc4" on-tap='showChildPanel'><img
                                                              src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png"
                                                              class="imageStyle" style="{{item.arrowCSS}}"></div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.titleColumns}}">
                                                                <template is="dom-if" if="{{valueIsFirst(index)}}">
                                                                    <div class="tc tcheader" style=" display: block; margin-left: 15px; text-align: left; font-weight: 500; ">
                                                                        {{item}}
                                                                        <paper-button class="paperbutton" on-tap="saveWellInfo" style="margin-left:156px" raised>Save</paper-button>
                                                                    </div>
                                                                </template>
                                                                <template is="dom-if" if="{{!valueIsFirst(index)}}">
                                                                    <div class="tc tcheader" style="font-size:15px;">{{item}}</div>
                                                                </template>
                                                            </template>
                                                            <div class="tc tc1"></div>
                                                        </div>
                                                    </div>

                                                    <template is="dom-if" if="{{item.isToggled}}">
                                                        <div class="div-sub-table" id="sub-panels" style="width: 52%;float: left;">
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                <div class="tr1 horizontal layout" style="position: relative;">
                                                                    <div class="tc tc4"></div>
                                                                    <div class="tc tc1" style="text-align: left; font-weight: 500;">
                                                                        &emsp;&emsp;&emsp;{{item.title}}</div>
                                                                    <template id="dynamicChildcolumns" is="dom-repeat" items="{{item.valueText}}">
                                                                        <template id="checkValues" is="dom-if" if="[[valueIsReadonly(item.state)]]">
                                                                            <div class="tc tc1" id="{{item.keys}}" style="width:15%; min-width: 90px; margin-left: [[getMarginLeft(item.keys)]];">
                                                                                {{item.value}}</div>
                                                                        </template>
                                                                        <template id="checkValues" is="dom-if" if="[[valueIsInput(item.state)]]">
                                                                            <div class="tc tc1"><input type="text" id="{{item.keys}}" class="inputForm" value={{item.value}} style="background: #525962; border:none; color:white; width:60%;height:20px; text-align:center; font-size:12px">
                                                                            </div>
                                                                        </template>

                                                                    </template>
                                                                </div>
                                                            </template>
                                                        </div>

                                                        <div class="div-sub-table" id="sub-panels" style="width: 48%;float: left;background: #727C89;min-height:164px">
                                                            <div style="margin-top: 10px;margin-bottom: 10px;">
                                                                Operating Comments :
                                                            </div>
                                                            <div>
                                                                <textarea id="operatorComments" rows="5" cols="80" style="resize:none;width:90%;background:#525962;color:white;border: 1px solid #ffffff57 !important;font-size:14px;margin-bottom:-5px;min-height: 66px;" placeholder="Operating Comments.." value="{{operatingComments}}">{{operatingComments}}</textarea>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </template>
                                            </template>

                                            <template id="table" is="dom-repeat" items="{{artificialTable}}">
                                                <div class="div-table" id="panels" style="border-bottom:4px solid #393e44">
                                                    <div class="tr">
                                                        <div class="tc tc4" on-tap='showArtificialPanel'><img
                                                          src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png"
                                                          class="imageStyle" style="{{item.arrowCSS}}"></div>
                                                        <template id="dynamic columns" is="dom-repeat" items="{{item.titleColumns}}">
                                                            <template is="dom-if" if="{{valueIsFirst(index)}}">
                                                                <div class="tc tcheader" style=" display: block; margin-left: 15px; text-align: left; font-weight: 500; ">
                                                                    {{item}}
                                                                    <paper-button class="paperbutton" on-tap="saveArtificialLift" style="margin-left:135px" raised>Save</paper-button>
                                                                </div>
                                                            </template>
                                                            <template is="dom-if" if="{{!valueIsFirst(index)}}">
                                                                <div class="tc tcheader">{{item}}</div>
                                                            </template>
                                                        </template>
                                                    </div>
                                                </div>

                                                <template is="dom-if" if="{{item.isArtificailLiftToggled}}">
                                                    <template is="dom-if" if="{{item.wellType}}">
                                                        <div class="div-sub-table" id="Artificial-sub-table">
                                                            <div class="tr1">
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Number</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Vendor</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Stage Size</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Stage Count</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Motor HP </div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Intake</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Install Date</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Fail Date</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Run Life (days)</div>
                                                            </div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                <div class="tr1">
                                                                    <div class="tc tc4"></div>

                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'pumpId')}}" value={{item.pump_id}} readonly=true style="background: none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'pumpVendor')}}" value={{item.pump_vendor}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'stageSize')}}" value={{item.stage_size}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'stageCount')}}" value={{item.stage_count}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'motorHp')}}" value={{item.motor_hp}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'intake')}}" value={{item.intake}} style="background: #525962; border:none; color:white; width:108%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'installDate')}}" value={{item.install_date}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'failDate')}}" value={{item.fail_date}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'runLife')}}" value={{item.run_life}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>

                                                                </div>
                                                            </template>


                                                            <div class="tr1">
                                                                <div class="tc tc4"></div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpNum" value=[[newPumpNumber]] readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpvendor" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpSize" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpCount" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalMotorHp" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpIntake" value="" style="background: #525962; border:none; color:white; width:108%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpInstallDate" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpfaildate" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalRunlife" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <template is="dom-if" if="{{!item.wellType}}">
                                                        <div class="div-sub-table" id="Artificial-sub-table">
                                                            <div class="tr1">
                                                                <div style="font-size:15px; font-weight:760;margin-left:27px;border-bottom:1px solid #525962;">
                                                                    Rod Pump</div>
                                                            </div>
                                                            <div class="tr1">
                                                                <!-- <div class="tc tc1">&emsp;&emsp;&emsp;&emsp;</div> -->
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Vendor</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Type</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Barrel Id (in)</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Length (ft)</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Start Date</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Fail Date</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pulled</div>
                                                            </div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.rodpump}}">
                                                                <div class="tr1">
                                                                    <div class="tc tc4"></div>

                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodpumpId')}}" value={{item.pump}} readonly=true style="background: none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodpumpVendor')}}" value={{item.pump_vendor}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodPumptype')}}" value={{item.pump_type}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodBarrelDiameter')}}" value={{item.barrel_id}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodbarrellength')}}" value={{item.pump_len}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodinstallDate')}}" value={{item.start_date}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodfailDate')}}" value={{item.fail_date}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'rodrunLife')}}" value={{item.pulled}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>

                                                                </div>
                                                            </template>


                                                            <div class="tr1">
                                                                <div class="tc tc4"></div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodPumpNum" value=[[newrodPumpNumber]] readonly=true style="background: none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodPumpvendor" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodPumptype" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodbarrelDia" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodBarrelLength" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodPumpInstallDate" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodPumpfaildate" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalrodRunlife" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                            </div>
                                                            <div class="tr1">
                                                                <div style="font-size:15px; font-weight:760;margin-left:27px;border-bottom:1px solid #525962;">
                                                                    ESP</div>
                                                            </div>
                                                            <div class="tr1">
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Number</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Pump Vendor</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Stage Size</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Stage Count</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Motor HP</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Intake</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Install Date</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Fail Date</div>
                                                                <div class="tc tc1" style="font-size:15px; font-weight:400;">Run Life (days)</div>
                                                            </div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                <div class="tr1">
                                                                    <div class="tc tc4"></div>

                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'pumpId')}}" value={{item.pump_id}} readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'pumpVendor')}}" value={{item.pump_vendor}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'stageSize')}}" value={{item.stage_size}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'stageCount')}}" value={{item.stage_count}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'motorHp')}}" value={{item.motor_hp}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'intake')}}" value={{item.intake}} style="background: #525962; border:none; color:white; width:108%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'installDate')}}" value={{item.install_date}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'failDate')}}" value={{item.fail_date}} style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'runLife')}}" value={{item.run_life}} style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>

                                                                </div>
                                                            </template>


                                                            <div class="tr1">
                                                                <div class="tc tc4"></div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalPumpNum" value=[[newPumpNumber]] readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPPumpvendor" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPPumpSize" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPPumpCount" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPMotorHp" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPPumpIntake" value="" style="background: #525962; border:none; color:white; width:108%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPPumpInstallDate" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPPumpfaildate" value="" style="background: #525962; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                                <div class="tc tc1">
                                                                    <input type="text" class="inputForm" id="additionalESPRunlife" value="" style="background: #525962; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </template>
                                            </template>

                                            <template id="table" is="dom-repeat" items="{{injParameterInfo}}">
                                                <template is="dom-if" if="{{valueIsDefault(item.layout)}}">
                                                    <div class="div-table" id="panels" style="border-bottom:4px solid #393e44">
                                                        <div class="tr">
                                                            <div class="tc tc4" on-tap='showInjPanel'><img
                                                              src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png"
                                                              class="imageStyle" style="{{item.arrowCSS}}"></div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.titleColumns}}">
                                                                <template is="dom-if" if="{{valueIsFirst(index)}}">
                                                                    <div class="tc tcheader" style=" display: block; margin-left: 15px; text-align: left; font-weight: 500; ">
                                                                        Inj/Prod Parameters<paper-button class="paperbutton" on-tap="saveInjProdParams" style="margin-left:91px" raised>Save</paper-button>
                                                                    </div>
                                                                </template>
                                                                <template is="dom-if" if="{{!valueIsFirst(index)}}">
                                                                    <div class="tc tcheader">Inj/Prod Parameters</div>
                                                                </template>
                                                            </template>
                                                        </div>
                                                    </div>

                                                    <template is="dom-if" if="{{item.isToggled}}">
                                                        <div class="tr1" style="border-top: 1px solid grey;border-bottom: 1px solid grey;color: white;">
                                                            <span style="margin-left: 20px;">Injection Parameters</span>
                                                        </div>
                                                        <div class="div-sub-table" id="sub-panels" style="border-bottom: 1px solid #727c89;">
                                                            <div class="tr1">
                                                                <div class="tc tc4"></div>
                                                                <div class="tc tcParams">&emsp;&emsp;&emsp;</div>
                                                                <div class="tc tcParams" style="font-size:15px;font-weight:400;min-width:186px;">Engineer Target</div>
                                                                <div class="tc tcParams" style="font-size:15px;font-weight:400;min-width:186px;">Min</div>
                                                                <div class="tc tcParams" style="font-size:15px;font-weight:400;min-width:186px;">Max</div>
                                                                <div class="tc tcParams" style="font-size:15px; font-weight:400;min-width:186px;">Current</div>
                                                                <div class="tc tcParams" style="font-size:15px;font-weight:400;min-width:186px;">Panel Target</div>
                                                                <div class="tc tcParams" style="font-size:15px;font-weight:400;min-width:186px;">Current Valve</div>
                                                                <div class="tc tcParams" style="font-size:15px;font-weight:400;min-width:186px;">Panel Valve</div>
                                                            </div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                <div class="tr1">
                                                                    <div class="tc tc4"></div>
                                                                    <div class="tc tcParams" style="text-align: left; font-weight: 500;font-size:14px;">
                                                                        &emsp;&emsp;&emsp;{{item.title}} </div>
                                                                    <template id="dynamicChildcolumns" is="dom-repeat" items="{{item.valueText}}">
                                                                        <template id="checkValues" is="dom-if" if="[[valueIsReadonly(item.state)]]">
                                                                            <div class="tc tcParams"><input type="text" id={{getInjParamId(item.keys)}} class="inputForm" on-change="parameterValueChanged" value="{{item.value}}" readonly=true style="background:#666F7B; border:none; margin-left:42px;color:white; width:38%; height:20px; text-align:center;font-size:12px" />
                                                                                <input type="text" id="{{getUomId(item.keys)}}" class="inputForm" value="{{item.denomination}}" readonly=true style="background:none ; border:none; color:white; width:23%; height:20px; text-align:left; font-size:12px" />
                                                                            </div>
                                                                        </template>
                                                                        <template id="checkValues" is="dom-if" if="[[valueIsInput(item.state)]]">
                                                                            <div class="tc tcParams"><input type="text" id={{getInjParamId(item.keys)}} class="inputForm" on-change="parameterValueChanged" value="{{item.value}}" style="background: #525962; border:none; margin-left:42px; color:white; width:38%; height:20px; text-align:center;font-size:12px" />
                                                                                <input type="text" id="{{getUomId(item.keys)}}" class="inputForm" value="{{item.denomination}}" readonly=true style="background:none ; border:none; color:white; width:23%; height:20px; text-align:left; font-size:12px" />
                                                                            </div>
                                                                        </template>
                                                                    </template>
                                                                </div>
                                                            </template>
                                                        </div>
                                                    </template>

                                                    <template is="dom-if" if="{{item.isToggled}}">
                                                        <div class="tr1" style="border-top: 1px solid grey;border-bottom: 1px solid grey;color: white;">
                                                            <span style="margin-left: 20px;">Production Parameters</span>
                                                        </div>
                                                        <template id="table" is="dom-repeat" items="{{prodParameterInfo}}">
                                                            <div class="div-sub-table" id="production-sub-table">
                                                                <template id="dynamic columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                    <div class="tr1">
                                                                        <div class="tc tc4"></div>
                                                                        <div class="tc tcParams" style="text-align: left; font-weight: 500;font-size:14px;">
                                                                            &emsp;&emsp;&emsp;{{item.title}} </div>
                                                                        <template id="dynamicChildcolumns" is="dom-repeat" items="{{item.valueText}}">
                                                                            <template id="checkValues" is="dom-if" if="[[valueIsReadonly(item.state)]]">
                                                                                <div class="tc tcParams"><input type="text" id={{getProdParamId(item.keys)}} class="inputForm" on-change="parameterValueChanged" value="{{item.value}}" readonly=true style="background:#666F7B; border:none; margin-left:42px;color:white; width:38%; height:20px; text-align:center;font-size:12px" />
                                                                                    <input type="text" id="{{getUomId(item.keys)}}" class="inputForm" value="{{item.denomination}}" readonly=true style="background:none ; border:none; color:white; width:23%; height:20px; text-align:left; font-size:12px" />
                                                                                </div>
                                                                            </template>
                                                                            <template id="checkValues" is="dom-if" if="[[valueIsInput(item.state)]]">
                                                                                <div class="tc tcParams"><input type="text" id={{getProdParamId(item.keys)}} class="inputForm" on-change="parameterValueChanged" value="{{item.value}}" style="background: #525962; border:none; margin-left:42px; color:white; width:38%; height:20px; text-align:center;font-size:12px" />
                                                                                    <input type="text" id="{{getUomId(item.keys)}}" class="inputForm" value="{{item.denomination}}" readonly=true style="background:none ; border:none; color:white; width:23%; height:20px; text-align:left; font-size:12px" />
                                                                                </div>
                                                                            </template>
                                                                        </template>
                                                                    </div>
                                                                </template>
                                                            </div>
                                                        </template>
                                                    </template>
                                                </template>
                                            </template>

                                            <template id="table" is="dom-repeat" items="{{wellTestTable}}">
                                                <div class="div-table" id="panels" style="border-bottom:4px solid #393e44">
                                                    <div class="tr">
                                                        <div class="tc tc4" on-tap='showWellTest'><img
                                                          src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png"
                                                          class="imageStyle" style="{{item.arrowCSS}}"></div>
                                                        <template id="dynamic columns" is="dom-repeat" items="{{item.titleColumns}}">
                                                            <template is="dom-if" if="{{valueIsFirst(index)}}">
                                                                <div class="tc tcheader" style=" display: block; margin-left: 15px; text-align: left; font-weight: 500; ">
                                                                    {{item}}
                                                                    <paper-button class="paperbutton" on-tap="saveWellTest" style="margin-left:146px" raised>Save</paper-button>
                                                                </div>
                                                            </template>
                                                            <template is="dom-if" if="{{!valueIsFirst(index)}}">
                                                                <div class="tc tcheader">{{item}}</div>
                                                            </template>
                                                        </template>
                                                    </div>
                                                </div>

                                                <template is="dom-if" if="{{item.isWellTestToggled}}">

                                                    <div class="div-sub-table" id="WellTest-sub-table">
                                                        <div class="tr1" style="border-bottom:1px solid #525962;">
                                                            <!-- <div class="tc tc1">&emsp;&emsp;&emsp;&emsp;</div> -->
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;width:262px">Test Start</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Test End</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;width:260px">Test Status
                                                            </div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">BSW (%)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Agar BSW (%) </div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Ops BSW (%)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Density BSW (%)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Chlorides (ppm)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Emulsion (m3/d)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Vapour (t/d)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Prod Gas (e3m3/d)</div>
                                                            <div class="tc tc1" style="font-size:15px; font-weight:400;">Model Input</div>
                                                        </div>

                                                        <div class="tableScroll">
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                <div class="trColor">
                                                                    <div class="tc tc4"></div>

                                                                    <div class="tc tc1" style="width:258px;">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'test_start_time')}}" value={{item.test_start_time}} readonly=true style="background: none; border:none; color:white; width:90%; height:20px; text-align:center;font-size:12px;" />
                                                                        <px-tooltip for$="{{getADId(index,'test_start_time')}}" orientation="right" tooltip-message="Analysis Start: {{item.analysis_start_time}}">
                                                                        </px-tooltip>
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'test_end_time')}}" value={{item.test_end_time}} readonly=true style="background: none; border:none; color:white; width:90%; height:20px; text-align:center;font-size:12px;" />
                                                                        <px-tooltip for$="{{getADId(index,'test_end_time')}}" orientation="right" tooltip-message="Analysis End: {{item.analysis_end_time}}">
                                                                        </px-tooltip>
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'test_status')}}" value={{item.test_status}} readonly=true style="background:none; border:none; color:white; width:70%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'bsw')}}" value={{item.bsw}} readonly=true style="background: none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'agar_bsw')}}" value={{item.agar_bsw}} readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'ops_bsw')}}" value={{item.ops_bsw}} readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'density_bsw')}}" value={{item.density_bsw}} readonly=true style="background:none; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'chlorides')}}" value={{item.chlorides}} readonly=true style="background:none; border:none; color:white; width:60%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'emulsion_rate')}}" value={{item.emulsion_rate}} readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'vapour_rate')}}" value={{item.vapour_rate}} readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <input type="text" class="inputForm" id$="{{getADId(index,'prod_gas_rate')}}" value={{item.prod_gas_rate}} readonly=true style="background:none; border:none; color:white; width:40%; height:20px; text-align:center;font-size:12px;" />
                                                                    </div>
                                                                    <div class="tc tc1">
                                                                        <template is="dom-if" if="{{item.model_input}}">
                                                                            <label class="switch">
                                                                                <input id$="{{getADId(index,'model_input')}}" type="checkbox" checked>
                                                                                <span class="slider round"></span>
                                                                            </label>
                                                                        </template>
                                                                        <template is="dom-if" if="{{!item.model_input}}">
                                                                            <label class="switch">
                                                                                <input id$="{{getADId(index,'model_input')}}" type="checkbox">
                                                                                <span class="slider round"></span>
                                                                            </label>
                                                                        </template>
                                                                    </div>

                                                                </div>
                                                            </template>
                                                        </div>
                                                    </div>
                                                </template>
                                            </template>

                                            <template is="dom-if" if="[[showAlertManagement]]">
                                                <template id="table" is="dom-repeat" items="[[AlertDataNew]]">
                                                    <div class="div-table" id="Alarmpanels" style="border-bottom:4px solid #393e44">
                                                        <div class="tr">
                                                            <div class="tc tc4" on-tap='showChild'><img
                                                              src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png"
                                                              class="imageStyle" style={{arrowCSS}}></div>
                                                            <template id="dynamic columns" is="dom-repeat" items="{{item.titleColumns}}">
                                                                <div class="tc tcheader" style=" display: block; margin-left: 15px; text-align: left; font-weight: 500; ">
                                                                    {{item}}
                                                                    <paper-button class="paperbutton" on-tap="saveAlertData" style="margin-left:97px" raised>Save</paper-button>
                                                                </div>
                                                            </template>
                                                        </div>
                                                    </div>
                                                    <template is="dom-if" if="[[isAlarmToggled]]">
                                                        <div class="div-sub-table" id="alarm-sub-table" style="background: #727c89;">

                                                            <table border="1" cellspacing="0" cellpadding="0" style="text-align: center;width: 50%;background: #727c89;border: none;" class="alertmanagement">
                                                                <tr style="background:#727c89">
                                                                    <th></th>
                                                                    <th></th>
                                                                    <th style="padding-left: 10px;">Current</th>
                                                                    <th style="padding-left: 7px;">Threshold</th>
                                                                    <th></th>
                                                                </tr>
                                                                <template id="dynamic-columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                                    <tr style="text-align: left;background:#727c89;border: none;font-size: 15px;" class="alertmanagementheader">
                                                                        <th colspan="5" style="border-right: none;border-top: 1px solid grey;border-bottom: 1px solid grey;"><span style="padding-left: 16px;font-weight: 15px;">{{item.name}} ({{item.uom}})</span></th>
                                                                    </tr>
                                                                    <template id="dynamic-columns" is="dom-repeat" items="{{item.list}}">
                                                                        <tr style="background: #727c89;border: none;">
                                                                            <td class="alertmanagementchild" style="border: none;"><span style="padding-left: 52px;">{{item.alert_name}}</span></td>
                                                                            <td style="border: none;">
                                                                                <template is="dom-if" if="{{item.show_alert_type}}">
                                                                                    <input class="buttonstatic" type="button" value="{{item.alert_type}}" style="width:100px;margin: 3px 10px 6px 0px;background: #727c89;" />
                                                                                </template>
                                                                            </td>
                                                                            <td style="border: none;">
                                                                                <input type="text" id="bhta" style="background: #666F7B; pointer-events: none;border:none; color:white; width:45%; height:20px; text-align:center;font-size:12px" class="bhtinputForm" value={{item.current}}>
                                                                            </td>
                                                                            <td style="border: none;">
                                                                                <input type="text" id="{{item.param_key}}" on-change="parameterValueChanged" style="background: #525962; border:none; color:white; width:45%; height:20px; text-align:center;font-size:12px;margin: 8px 0px 6px 8px;" class$="{{item.thresholdReadonlyClass}}" value={{item.threshold}}>
                                                                            </td>
                                                                            <td style="border: none;">
                                                                                <template is="dom-if" if="{{item.showToggle}}">
                                                                                    <template is="dom-if" if="{{item.enable}}">
                                                                                        <label class="switch">
                                                                                            <input id$="[[getToggleid(item.param_key)]]" type="checkbox" value="{{item.enable}}" on-change="toggleValueChanged" checked="{{item.enable}}">
                                                                                            <span class="slider round"></span>
                                                                                        </label>
                                                                                    </template>
                                                                                    <template is="dom-if" if="{{!item.enable}}">
                                                                                        <label class="switch">
                                                                                            <input id$="[[getToggleid(item.param_key)]]" type="checkbox" value="{{item.enable}}" on-change="toggleValueChanged" checked="{{item.enable}}">
                                                                                            <span class="slider round"></span>
                                                                                        </label>
                                                                                    </template>
                                                                                </template></td>
                                                                        </tr>

                                                                    </template>
                                                                </template>


                                                            </table>
                                                        </div>
                                                    </template>
                                                </template>
                                            </template>
                                            <template id="table" is="dom-repeat" items="{{operatorTable}}">
                                                <div class="div-table" id="Operatorpanels" style="display: none;">
                                                    <div class="tr">
                                                        <div class="tc tc4" on-tap='showOperatorChild'><img
                                                          src="../adaptix-v2-components/adaptix-icons/well-view-right-nav.png"
                                                          class="imageStyle" style="{{item.arrowCSS}}"></div>
                                                        <template id="dynamic columns" is="dom-repeat" items="{{item.titleColumns}}">
                                                            <div class="tc tcheader" style=" display: block; margin-left: 15px; text-align: left; font-weight: 500; ">
                                                                {{item}}
                                                                <paper-button class="paperbutton" on-tap="saveOperatorComments" style="margin-left:80px" raised>Save</paper-button>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </div>

                                                <template is="dom-if" if="{{item.isOperatorToggled}}">
                                                    <div class="div-sub-table" id="Operator-sub-table" style="display: none;">
                                                        <template id="dynamic-columns" is="dom-repeat" items="{{item.mainColumns}}">
                                                            <div class="tr1 horizontal layout" style="position: relative;">
                                                                <div class="tc tc4"></div>
                                                                <div class="tc tc1"><textarea id="operatorComments" rows="10" cols="100" placeholder="Operating Comments..">{{item.comment}}</textarea></div>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </template>
                                            </template>
                                        </div>
                                    </template>

                                </div>
                            </neon-animatable>
                        </neon-animated-pages>

                    </div>

                    <div id="riskStateList" class="card" style="width: 20%; height: 1339px; top: 0px; right: 0px; position: [[riskStateListPosition]];">
                        <risk-state-table id="riskStateTable"></risk-state-table>
                    </div>
                </div>
            </div>
            </body>
        </template>

    </template>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <script>
        Highcharts.Point.prototype.highlight = function(event) {
            event = this.series.chart.pointer.normalize(event);
            this.onMouseOver(); // Show the hover marker
            this.series.chart.xAxis[0].drawCrosshair(event, this); // Show the crosshair
        };

    </script>

    <script>
        //code for graph plotline (alert lines)customization
        var H = Highcharts,
          pick = H.pick,
          isNumber = H.isNumber,
          defined = H.defined;
        H.PlotLineOrBand.prototype.render = function() {

            H.fireEvent(this, 'render');

            var plotLine = this,
              axis = plotLine.axis,
              horiz = axis.horiz,
              options = plotLine.options,
              optionsLabel = options.label,
              label = plotLine.label,
              to = options.to,
              from = options.from,
              value = options.value,
              isBand = defined(from) && defined(to),
              isLine = defined(value),
              svgElem = plotLine.svgElem,
              isNew = !svgElem,
              path = [],
              color = options.color,
              zIndex = pick(options.zIndex, 0),
              events = options.events,
              attribs = {
                  'class': 'highcharts-plot-' + (isBand ? 'band ' : 'line ') +
                    (options.className || '')
              },
              groupAttribs = {},
              renderer = axis.chart.renderer,
              groupName = isBand ? 'bands' : 'lines',
              group;

            // logarithmic conversion
            if (axis.isLog) {
                from = axis.log2lin(from);
                to = axis.log2lin(to);
                value = axis.log2lin(value);
            }

            // Set the presentational attributes
            if (!axis.chart.styledMode) {
                if (isLine) {
                    attribs.stroke = color;
                    attribs['stroke-width'] = options.width;
                    if (options.dashStyle) {
                        attribs.dashstyle = options.dashStyle;
                    }

                } else if (isBand) { // plot band
                    if (color) {
                        attribs.fill = color;
                    }
                    if (options.borderWidth) {
                        attribs.stroke = options.borderColor;
                        attribs['stroke-width'] = options.borderWidth;
                    }
                }
            }

            // Grouping and zIndex
            groupAttribs.zIndex = zIndex;
            groupName += '-' + zIndex;

            group = axis.plotLinesAndBandsGroups[groupName];
            if (!group) {
                axis.plotLinesAndBandsGroups[groupName] = group =
                  renderer.g('plot-' + groupName)
                    .attr(groupAttribs).add();
            }

            // Create the path
            if (isNew) {
                /**
                 * SVG element of the plot line or band.
                 *
                 * @name Highcharts.PlotLineOrBand#svgElement
                 * @type {Highcharts.SVGElement}
                 */
                plotLine.svgElem = svgElem =
                  renderer
                    .path()
                    .attr(attribs).add(group);
            }


            // Set the path or return
            if (isLine) {
                path = axis.getPlotLinePath2(value, svgElem.strokeWidth());
            } else if (isBand) { // plot band
                path = axis.getPlotBandPath(from, to, options);
            } else {
                return;
            }


            // common for lines and bands
            if (isNew && path && path.length) {
                svgElem.attr({
                    d: path
                });

                // events
                if (events) {
                    H.objectEach(events, function(event, eventType) {
                        svgElem.on(eventType, function(e) {
                            events[eventType].apply(plotLine, [e]);
                        });
                    });
                }
            } else if (svgElem) {
                if (path) {
                    svgElem.show();
                    svgElem.animate({
                        d: path
                    });
                } else {
                    svgElem.hide();
                    if (label) {
                        plotLine.label = label = label.destroy();
                    }
                }
            }

            // the plot band/line label
            if (
              optionsLabel &&
              defined(optionsLabel.text) &&
              path &&
              path.length &&
              axis.width > 0 &&
              axis.height > 0 &&
              !path.isFlat
            ) {
                // apply defaults
                optionsLabel = Highcharts.merge({
                    align: horiz && isBand && 'center',
                    x: horiz ? !isBand && 4 : 10,
                    verticalAlign: !horiz && isBand && 'middle',
                    y: horiz ? isBand ? 16 : 10 : isBand ? 6 : -4,
                    rotation: horiz && !isBand && 90
                }, optionsLabel);

                this.renderLabel(optionsLabel, path, isBand, zIndex);

            } else if (label) { // move out of sight
                label.hide();
            }

            // chainable
            return plotLine;
        }
        H.Axis.prototype.getPlotLinePath2 = function(value, lineWidth, old, force, translatedValue) {
            var axis = this,
              chart = axis.chart,
              axisLeft = axis.left,
              axisTop = axis.top,
              x1,
              y1,
              x2,
              y2,
              cHeight = (old && chart.oldChartHeight) || chart.chartHeight,
              cWidth = (old && chart.oldChartWidth) || chart.chartWidth,
              skip,
              transB = axis.transB,
              /**
               * Check if x is between a and b. If not, either move to a/b
               * or skip, depending on the force parameter.
               */
              between = function(x, a, b) {
                  if (force !== 'pass' && x < a || x > b) {
                      if (force) {
                          x = Math.min(Math.max(a, x), b);
                      } else {
                          skip = true;
                      }
                  }
                  return x;
              };

            translatedValue = pick(
              translatedValue,
              axis.translate(value, null, null, old)
            );
            // Keep the translated value within sane bounds, and avoid Infinity to
            // fail the isNumber test (#7709).
            translatedValue = Math.min(Math.max(-1e5, translatedValue), 1e5);


            x1 = x2 = Math.round(translatedValue + transB);
            y1 = y2 = Math.round(cHeight - translatedValue - transB);
            if (!isNumber(translatedValue)) { // no min or max
                skip = true;
                force = false; // #7175, don't force it when path is invalid
            } else if (axis.horiz) {
                y1 = axisTop;
                y2 = cHeight - axis.bottom;
                x1 = x2 = between(x1, axisLeft, axisLeft + axis.width);
            } else {
                x1 = axisLeft;
                x2 = cWidth - axis.right;
                y1 = y2 = between(y1, axisTop, axisTop + axis.height);
            }
            if (axis.horiz) {
                return skip && !force ?
                  null :
                  chart.renderer.crispLine(
                    ['M', x1, y1, 'L', x1 - 2, y1 + 4, x1 + 2, y1 + 4, x1, y1, x2, y2],
                    lineWidth || 1
                  );
            }
            return skip && !force ?
              null :
              chart.renderer.crispLine(
                ['M', x1, y1, 'L', x2, y2],
                lineWidth || 1
              );
        };

    </script>
    <script>
        function elementInViewport(el) {
            var top = el.offsetTop;
            var left = el.offsetLeft;
            var width = el.offsetWidth;
            var height = el.offsetHeight;

            while (el.offsetParent) {
                el = el.offsetParent;
                top += el.offsetTop;
                left += el.offsetLeft;
            }

            return (
              top >= window.pageYOffset &&
              left >= window.pageXOffset &&
              (top + height) <= (window.pageYOffset + window.innerHeight) &&
              (left + width) <= (window.pageXOffset + window.innerWidth)
            );
        }

    </script>

    <script>
        Polymer({
            is: 'well-view',
            behaviors: [Polymer.NeonAnimationRunnerBehavior],
            properties: {
                animationConfig: {
                    value: function() {
                        return {
                            'entry': {
                                name: 'fade-in-animation',
                                node: this.$.wellMyAlertsTable
                            }
                        }
                    }
                },
                showmyAlerts: {
                    type: Boolean,
                    value: false,
                    notify: true
                },

                isRefreshDropdownChanged: {
                    type: Boolean,
                    value: false
                },

                currentTimestamp: {
                    type: Number
                },

                dateMax: {
                    type: Number
                },

                dateMin: {
                    type: Number
                },

                hidemyAlerts: {
                    type: Boolean,
                    value: true,
                    notify: true
                },
                enableWellSetUp: false,
                enableWellSetUpAutoRefresh: {
                    type: Boolean,
                    value: true
                },

                checkShoworHide: {
                    type: Object,
                    value: "notmasked",
                    notify: true
                },
                loading: {
                    type: Boolean,
                    readOnly: true,
                    notify: true,
                    value: false
                },
                SelectedItem: {
                    type: Object,
                },
                _headers: {
                    type: Object
                },
                wellId: {
                    type: String,
                    notify: true,
                },
                miniViewWellId: {
                    type: String,
                    notify: true,
                },
                setPointComponent: {
                    type: String,
                    notify: true,
                    value: 'well'
                },
                padId: {
                    type: String,
                    notify: true,
                },
                assetHierarchy: Object,
                loggedUser: Object,
                navWellId: Object,
                navPadId: Object,
                isInitialized: {
                    type: Object,
                    value: false
                },
                tabName: {
                    type: Object,
                    value: 'riskStates'
                },
                entryAnimation: {
                    type: Object,
                    value: 'fade-in-animation'
                },
                exitAnimation: {
                    type: Object,
                    value: 'fade-out-animation'
                },
                title: {
                    type: String,
                    notify: true,
                    value: 'Graph Example'
                },
                graphSize: {
                    type: Object,
                    value: {
                        width: '485px',
                        height: '294px',
                        margin: '2px',
                        zero: '0px'
                    }
                },
                EmulsionState: {
                    type: Object,
                    value: "Nominal"
                },
                BadVapourState: {
                    type: Object,
                    value: "Nominal"
                },
                ProducedGasState: {
                    type: Object,
                    value: "Nominal"
                },
                BSWBottomWaterState: {
                    type: Object,
                    value: "Nominal"
                },
                BHTState: {
                    type: Object,
                    value: "Nominal"
                },
                ReturnPressureState: {
                    type: Object,
                    value: "Nominal"
                },
                SuddenPressureChangeState: {
                    type: Object,
                    value: "Nominal"
                },
                SAGDPressureState: {
                    type: Object,
                    value: "Nominal"
                },
                SetPointsState: {
                    type: Object,
                    value: "Nominal"
                },
                WellStatus: {
                    type: Object,
                    notify: true,
                    value: "Nominal"
                },
                wellIconPath: {
                    type: Object,
                    notify: true,
                    value: "../../elements/adaptix-v2-components/adaptix-icons/well_icon_green.png"
                },
                graphList: {
                    type: Object
                },
                datepicker: Object,
                fromMoment: Object,
                toMoment: Object,
                min: Object,
                max: Object,
                dateRangeDropdownData: {
                    type: Object,
                    value: [{
                        "key": 0,
                        "val": "Last Hour"
                    },
                        {
                            "key": 3,
                            "val": "Last 3 Days"
                        },
                        {
                            "key": 4,
                            "val": "Last 7 Days"
                        },
                        {
                            "key": 1,
                            "val": "Last 14 Days"
                        },
                        {
                            "key": 5,
                            "val": "Last 1 Month"
                        },
                        {
                            "key": 6,
                            "val": "Last 3 Months"
                        },
                        {
                            "key": 7,
                            "val": "Last 1 Year"
                        }
                    ]
                },
                wellSetupViewPreserve: {
                    type: Object,
                    value: [{
                        "type": "wellTableData",
                        "isToggled": false
                    }, {
                        "type": "artificialTable",
                        "isToggled": false
                    }, {
                        "type": "injParameterInfo",
                        "isToggled": false
                    },
                        {
                            "type": "prodParameterInfo",
                            "isToggled": true
                        },
                        {
                            "type": "wellTestTable",
                            "isToggled": false
                        },
                        {
                            "type": "AlertData",
                            "isToggled": false
                        },
                        {
                            "type": "operatorTable",
                            "isToggled": false
                        }
                    ]
                },
                aggregationSettingDropdown: {
                    type: Object,
                    value: [{
                        "key": 0,
                        "val": "10 Mins"
                    },
                        {
                            "key": 1,
                            "val": "30 Mins"
                        },
                        {
                            "key": 2,
                            "val": "1 Hour"
                        },
                        {
                            "key": 3,
                            "val": "3 Hours"
                        },
                        {
                            "key": 4,
                            "val": "6 Hours"
                        },
                        {
                            "key": 5,
                            "val": "12 Hours"
                        },
                        {
                            "key": 6,
                            "val": "1 Day"
                        },
                        {
                            "key": 7,
                            "val": "Raw Data",
                            "disabled": true
                        }
                    ]
                },
                toolTipSettingDropdown: {
                    type: Object,
                    value: [{
                        "key": 0,
                        "val": "Simple",
                        "disabled": true
                    },
                        {
                            "key": 1,
                            "val": "Smart",
                            "disabled": true
                        },
                        {
                            "key": 2,
                            "val": "MultiSmart",
                            "disabled": true
                        },
                        {
                            "key": 3,
                            "val": "No Tooltip",
                            "disabled": true
                        }
                    ]
                },
                selectedDateRangeDropdown: {
                    type: Object,
                    observer: 'dateRangeSelectedFromDropdown'
                },
                selectedAggregationDropdown: {
                    type: Object,
                    observer: 'aggregationSelectedDropdown'
                },
                selectedtooltipDropdown: {
                    type: Object,
                    observer: 'toolTipSelectedDropdown'
                },
                disableNext: false,
                disableBack: false,
                currentAggregation: {
                    type: Object,
                },
                selected: {
                    type: Object
                },
                itemBeingDragged: Object,
                heightExtension: {
                    type: Object,
                    value: "0px"
                },
                riskStateListRightMargin: {
                    type: Object,
                    value: "0px"
                },
                riskStateListPosition: {
                    type: Object,
                    value: "relative"
                },
                checked: {
                    type: Boolean,
                    value: true
                },
                tooltipDropdown: {
                    type: Object,
                    value: "smart Tooltip"
                },
                previousSelectedValue: {
                    type: Object,
                    value: "simple"
                },
                riskData: {
                    type: Object,
                    notify: true
                },
                modelInfoData: {
                    type: Object,
                    notify: true
                },
                modifiedFromDate: Object,
                modifiedToDate: Object,
                showOrHideSetpoints: {
                    type: Boolean,
                    value: true,
                    notify: true
                },

                alertTitle: {
                    type: Object,
                    notify: true
                },
                alertstatus: {
                    type: Object,
                    notify: true,
                    value: "true"
                },
                riskAlerts: {
                    type: Object,
                    notify: true,
                },
                getColor: {
                    type: Boolean,
                    value: false
                },
                padsId: {
                    type: String,
                    value: "My Pads"
                },
                wellStatusColor: {
                    type: Object,
                    notify: true,
                    value: "#26c281"
                },
                newAlertTitle: Object,
                newStatus: Object,
                myAlertsRefreshTimeInterval: Number,
                graphRefreshTimeInterval: Number,
                autoRefresh: Number,
                autoRefreshMyAlerts: Number,
                ajaxResponse: {
                    type: String,
                    value: []
                },

                artificialData: {
                    type: Object,
                    notify: true
                },
                wellTestData: {
                    type: Object,
                    notify: true
                },
                rodpump: {
                    type: Object,
                    notify: true,
                    value: 0
                },
                isAlarmToggled: {
                    type: Boolean,
                    value: false
                },
                arrowCSS: {
                    type: Object,
                    value: "transform: rotate(0deg);"
                },
                newPumpNumber: {
                    type: Object,
                    value: 0
                },
                newrodPumpNumber: {
                    type: Object,
                    value: 0
                },
                wellTypeCheck: {
                    type: Boolean
                },
                alertVisible: {
                    type: Boolean,
                    value: false
                },
                messageTitle: {
                    type: String
                },
                messageContent: {
                    type: String
                },
                wellSetupAutorefresh: Number,
                wellSetupdataLoad: {
                    type: Boolean,
                    value: true,
                    notify: true
                }
            },

            ready: function() {
                // set scroll
                window.onscroll = this.didScroll.bind(this);
                this.alertVisible = false;
                this.setPointComponent = 'well' + "#" + new Date().getTime();
            },
            //this function triggers the API using IRon ajax for the autorefresh for status and wellsetup API.
            _updateData: function() {
                if (this.$$("#wellMyAlertsTable") !== null) {
                    this.padsId = this.$$("#wellMyAlertsTable").padsId;
                }
                this._headers = {
                    "Content-Type": 'application/x-www-form-urlencoded',
                    'token': this.parent.accessToken
                }
                this._setColorParams = {
                    'user_id': this.parent.user,
                    'pad_selection': this.padsId
                };
                this._getWellsetupParams = {
                    'user_id': this.parent.user,
                    'well_id': this.wellId
                };
                this.$.displayColor.generateRequest();


                if (this.enableWellSetUpAutoRefresh === true) {
                    this.$.ajaxWellSetup.generateRequest();
                }

            },
            //process the response of status API
            getColorData: function(e) {
                var temp = {}
                temp = e.detail.response;
                this.getColor = temp.my_alert_status
            },

            /*  Function to populate inj/prod id */
            getInjParamId: function(key) {
                return 'inj_' + key
            },

            /*  Function to populate inj/prod id */
            getProdParamId: function(key) {
                return 'prod_' + key
            },

            /*  Function to populate uom id */
            getUomId: function(key) {
                return key + '_uom'
            },
            getToggleid: function(name) {
                return name.replace(/ /g, "") + "toggle"
            },
            //force set values
            forceSetValues: function(key, value) {
                for (var i = 0; i < this.AlertDataNew[0].mainColumns.length; ++i) {
                    var thresholdsList = [];
                    for (var j = 0; j < this.AlertDataNew[0].mainColumns[i].list.length; ++j) {
                        if (this.AlertDataNew[0].mainColumns[i].list[j].param_key == key) {
                            this.AlertDataNew[0].mainColumns[i].list[j].threshold = value;
                        }
                    }

                }

            },
            toggleValueChanged: function(event) {

                var name = event.target.id.replace('toggle', '');
                for (var i = 0; i < this.AlertDataNew[0].mainColumns.length; ++i) {
                    var thresholdsList = [];
                    for (var j = 0; j < this.AlertDataNew[0].mainColumns[i].list.length; ++j) {
                        if (this.AlertDataNew[0].mainColumns[i].list[j].param_key == name) {
                            this.AlertDataNew[0].mainColumns[i].list[j].enable = !this.AlertDataNew[0].mainColumns[i].list[j].enable;
                        }
                    }

                }
            },

            /*  Function to calculate inj/prod params  */
            parameterValueChanged: function(e) {
                var event_id = e.target.id;
                if (event_id === 'inj_bhp_eng_target' || event_id === 'sagd_pressure_band') {
                    // If sagd_pressure_threshold or sagd_pressure_band has change, update bhp_eng_target, bhp_min, bhp_max.
                    var bhp_eng_target = parseFloat(this.$$("#inj_bhp_eng_target").value);
                    var sagd_pressure_band = parseFloat(this.$$("#sagd_pressure_band").value);
                    this.$$("#sagd_pressure_threshold").value = bhp_eng_target.toFixed(0);
                    this.$$("#inj_bhp_min").value = (bhp_eng_target - sagd_pressure_band).toFixed(0);
                    this.$$("#bhp_min_uom").value = 'kPa';
                    this.$$("#inj_bhp_max").value = (bhp_eng_target + sagd_pressure_band).toFixed(0);
                    this.$$("#bhp_max_uom").value = 'kPa';

                } else if (event_id === 'prod_emulsion_rate_eng_target') {
                    // If emulsion_rate_eng_target has change, update oil_rate_eng_target, tfsr_eng_target, tfsr_min, tfsr_max
                    var emulsion_rate_eng_target = parseFloat(this.$$("#prod_emulsion_rate_eng_target").value);
                    var bsw_eng_target = parseFloat(this.$$("#prod_bsw_eng_target").value);
                    var lt_steam_eng_target = parseFloat(this.$$("#inj_lt_steam_eng_target").value);
                    var st_steam_eng_target = parseFloat(this.$$("#inj_st_steam_eng_target").value);
                    var lt_steam_max = parseFloat(this.$$("#inj_lt_steam_max").value);
                    var st_steam_max = parseFloat(this.$$("#inj_st_steam_max").value);
                    var lt_steam_min = parseFloat(this.$$("#inj_lt_steam_min").value);
                    var st_steam_min = parseFloat(this.$$("#inj_st_steam_min").value);
                    this.$$("#prod_oil_rate_eng_target").value = (emulsion_rate_eng_target * (1 - bsw_eng_target / 100) * 6.2898)
                      .toFixed(1);
                    this.$$("#prod_tfsr_eng_target").value = (emulsion_rate_eng_target / (lt_steam_eng_target +
                      st_steam_eng_target)).toFixed(2);
                    this.$$("#prod_tfsr_min").value = (emulsion_rate_eng_target / (lt_steam_max + st_steam_max)).toFixed(2);
                    this.$$("#prod_tfsr_max").value = (emulsion_rate_eng_target / (lt_steam_min + st_steam_min)).toFixed(2);

                } else if (event_id === 'prod_bsw_eng_target') {
                    // If bsw_eng_target has change, update oil_rate_eng_target
                    var emulsion_rate_eng_target = parseFloat(this.$$("#prod_emulsion_rate_eng_target").value);
                    var bsw_eng_target = parseFloat(this.$$("#prod_bsw_eng_target").value);
                    this.$$("#prod_oil_rate_eng_target").value = (emulsion_rate_eng_target * (1 - bsw_eng_target / 100) * 6.2898)
                      .toFixed(1);

                } else if (event_id === 'inj_lt_steam_eng_target' || event_id === 'inj_st_steam_eng_target') {
                    // If lt_steam_eng_target or st_steam_eng_target has change, update tfsr_eng_target
                    var emulsion_rate_eng_target = parseFloat(this.$$("#prod_emulsion_rate_eng_target").value);
                    var lt_steam_eng_target = parseFloat(this.$$("#inj_lt_steam_eng_target").value);
                    var st_steam_eng_target = parseFloat(this.$$("#inj_st_steam_eng_target").value);
                    this.$$("#prod_tfsr_eng_target").value = (emulsion_rate_eng_target / (lt_steam_eng_target +
                      st_steam_eng_target)).toFixed(2);

                } else if (event_id === 'inj_lt_steam_min' || event_id === 'inj_st_steam_min') {
                    // If lt_steam_min or st_steam_min has change, update tfsr_max
                    var emulsion_rate_eng_target = parseFloat(this.$$("#prod_emulsion_rate_eng_target").value);
                    var lt_steam_min = parseFloat(this.$$("#inj_lt_steam_min").value);
                    var st_steam_min = parseFloat(this.$$("#inj_st_steam_min").value);
                    this.$$("#prod_tfsr_max").value = (emulsion_rate_eng_target / (lt_steam_min + st_steam_min)).toFixed(2);

                } else if (event_id === 'inj_lt_steam_max' || event_id === 'inj_st_steam_max') {
                    // If lt_steam_max or st_steam_max has change, update tfsr_min
                    var emulsion_rate_eng_target = parseFloat(this.$$("#prod_emulsion_rate_eng_target").value);
                    var lt_steam_max = parseFloat(this.$$("#inj_lt_steam_max").value);
                    var st_steam_max = parseFloat(this.$$("#inj_st_steam_max").value);
                    this.$$("#prod_tfsr_min").value = (emulsion_rate_eng_target / (lt_steam_max + st_steam_max)).toFixed(2);
                }
                this.forceSetValues(event_id, e.target.value);
            },

            //shows the my alerts view on tap of the My alert triangle
            showMyAlerts() {
                this.hidemyAlerts = false;
                this.showmyAlerts = true;
                if (this.$$("#wellMyAlertsTable") !== null) {
                    this.padsId = this.$$("#wellMyAlertsTable").padsId;
                }
                this.playAnimation('entry');
                if (this.$$("#wellMyAlertsTable") !== null) {
                    this.$$("#wellMyAlertsTable")._getCurrentAlertsParams = {
                        "user_id": this.loggedUser,
                        "pad_selection": this.padsId
                    }

                    this.$$("#wellMyAlertsTable")._getHistoricalAlertsParams = {
                        'user_id': this.loggedUser,
                        'pad_selection': this.padsId,
                        "start": "7d-ago"
                    }
                    if (this.$$("#wellMyAlertsTable").selectedRange) {
                        this.$$("#wellMyAlertsTable")._getHistoricalAlertsParams.start = this.$$("#wellMyAlertsTable").selectedRange;
                    }
                    if (this.$$("#wellMyAlertsTable").selectedDateRangeStart) {
                        this.$$("#wellMyAlertsTable")._getHistoricalAlertsParams.start = this.$$("#wellMyAlertsTable").selectedDateRangeStart;
                    }
                    if (this.$$("#wellMyAlertsTable").selectedDateRangeEnd) {
                        this.$$("#wellMyAlertsTable")._getHistoricalAlertsParams.end = this.$$("#wellMyAlertsTable").selectedDateRangeEnd;
                    }
                    if (this.$$("#wellMyAlertsTable").historyfilterAlerts) {
                        this.$$("#wellMyAlertsTable")._getHistoricalAlertsParams.filter = this.$$("#wellMyAlertsTable").historyfilterAlerts;
                    }
                    if (this.$$("#wellMyAlertsTable").currentFilterAlerts) {
                        this.$$("#wellMyAlertsTable")._getCurrentAlertsParams.filter = this.$$("#wellMyAlertsTable").currentFilterAlerts;
                    }
                    //this.$$("#wellMyAlertsTable").$.myAlerts.generateRequest();
                    //this.$$("#wellMyAlertsTable").$.alerts.generateRequest();
                    this.$$("#wellMyAlertsTable").getCurrentAlerts();
                    this.$$("#wellMyAlertsTable").getHistoricalAlerts();
                    this.$$("#wellMyAlertsTable").showCurrentAlarms = false;
                    this.$$("#wellMyAlertsTable").showHistoricalAlarms = false;
                    this.$$("#wellMyAlertsTable").hideCurrentAlarms = true;
                    this.$$("#wellMyAlertsTable").hideHistoricalAlarms = true;
                    if (this.isRefreshDropdownChanged === false) {
                        clearInterval(this.autoRefreshMyAlerts);
                        this.autoRefreshMyAlerts = setInterval(() => {
                            // this.$$("#wellMyAlertsTable").$.myAlerts.generateRequest();
                            // this.$$("#wellMyAlertsTable").$.alerts.generateRequest();
                            this.$$("#wellMyAlertsTable").getCurrentAlerts();
                            this.$$("#wellMyAlertsTable").getHistoricalAlerts();
                            if (this.$$("#wellMyAlertsTable").isShowMoreEnabled === true) {
                                this.$$("#wellMyAlertsTable").$.ajaxMyalerts.generateRequest();
                            }
                        }, 300000);
                    } else {
                        if (this.myAlertsRefreshTimeInterval === 0) {
                            clearInterval(this.autoRefreshMyAlerts);
                            this.autoRefreshMyAlerts = 0;
                        } else {
                            clearInterval(this.autoRefreshMyAlerts);
                            this.autoRefreshMyAlerts = setInterval(() => {
                                // this.$$("#wellMyAlertsTable").$.myAlerts.generateRequest();
                                // this.$$("#wellMyAlertsTable").$.alerts.generateRequest();
                                this.$$("#wellMyAlertsTable").getCurrentAlerts();
                                this.$$("#wellMyAlertsTable").getHistoricalAlerts();
                                if (this.$$("#wellMyAlertsTable").isShowMoreEnabled === true) {
                                    this.$$("#wellMyAlertsTable").$.ajaxMyalerts.generateRequest();
                                }
                            }, this.myAlertsRefreshTimeInterval);
                        }
                    }
                }
            },

            //hides the my alerts view on tap of the My alert triangle
            hideMyAlerts() {
                this.showmyAlerts = false;
                this.hidemyAlerts = true;
                this.refreshRiskStates(this.wellId);
                var currentToMoment = moment();
                var currentFromMoment = moment().subtract(7, 'day');
                this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                if (this.$$("#wellMyAlertsTable") !== null) {
                    this.padsId = this.$$("#wellMyAlertsTable").padsId;
                }
                this._headers = {
                    "Content-Type": 'application/x-www-form-urlencoded',
                    'token': this.parent.accessToken
                }
                this._setColorParams = {
                    'user_id': this.parent.user,
                    'pad_selection': this.padsId
                };
                this.$.displayColor.generateRequest();
                this.$$("#wellMyAlertsTable").isShowMoreEnabled = false;
                clearInterval(this.autoRefreshMyAlerts);
            },
            //this function is called from My alerts popup view button and gets the drilldown graph and the alert disposal block for the selected alert
            showWellViewAlert: function(alertWellId, alertPadId, alertName, status, sameWell) {
                this.toMoment = moment();
                this.fromMoment = moment().subtract(7, 'day');
                this.showmyAlerts = false;
                this.hidemyAlerts = true;
                var temp = {}
                temp.id = alertWellId;
                temp.label = alertWellId;
                temp.parent = this.padId;
                this.SelectedItem = temp;
                this.$$('#riskStateTable')._getriskstateParams = {
                    "well_id": this.domHost.wellId,
                    "user_id": this.loggedUser
                }
                if (!sameWell) {
                    this.refreshRiskStates(alertWellId);
                }
                this.graphsettings(alertWellId, 'drilldowngraph');
                this.newAlertTitle = alertName
                if (this.hidemyAlerts === true) {
                    var currentToMoment = moment();
                    var currentFromMoment = moment().subtract(7, 'day');
                    this.getAlertData(alertWellId, currentFromMoment._d, currentToMoment._d, "attached");
                    this.updatePlotlines();
                    this.navigateToRiskStates();
                    if (this.loggedUser === "demo_user") {
                        if (alertName === "Risk 2") {
                            this.newStatus = this.BadVapourState
                        }
                        if (alertName === "Risk 6") {
                            this.newStatus = this.ReturnPressureState
                        }
                        if (alertName === "Risk 3") {
                            this.newStatus = this.ProducedGasState
                        }
                        if (alertName === "Risk 4") {
                            this.newStatus = this.BSWBottomWaterState
                        }
                        if (alertName === "Risk 5") {
                            this.newStatus = this.BHTState
                        }
                        if (alertName == "Risk 7") {
                            this.newStatus = this.SuddenPressureChangeState
                        }
                        if (alertName === "Risk 8") {
                            this.newStatus = this.SAGDPressureState
                        }
                    } else {
                        if (alertName === "Vapour") {
                            this.newStatus = this.BadVapourState
                        }
                        if (alertName === "Return Pressure") {
                            this.newStatus = this.ReturnPressureState
                        }
                        if (alertName === "Produced Gas") {
                            this.newStatus = this.ProducedGasState
                        }
                        if (alertName === "BSW & Bottom Water") {
                            this.newStatus = this.BSWBottomWaterState
                        }
                        if (alertName === "BHT") {
                            this.newStatus = this.BHTState
                        }
                        if (alertName == "Sudden Pressure") {
                            this.newStatus = this.SuddenPressureChangeState
                        }
                        if (alertName === "SAGD Pressure") {
                            this.newStatus = this.SAGDPressureState
                        }
                    }
                    this.showAlertDetails();
                    this.$$('#wellDetailsView')._refreshWellDetails(alertWellId);
                    this.$$('#riskStateTable')._refreshAlert(alertWellId);
                    this._getWellsetupParams = {
                        'well_id': alertWellId
                    };
                }
                if (this.wellId != alertWellId) {
                    setTimeout(() => {
                        // this.requestGraphData("lastOneWeek", alertPadId, this.fromMoment, this.toMoment, "dateRange", this
                        //     .currentAggregation);
                        this.syncGraphs(this.fromMoment, this.toMoment);
                        this.$$("#wellSetpointsView")._refreshWellSetpoints(alertWellId);
                    }, 9000);
                }
                this.wellId = alertWellId;
                this.padId = alertPadId;
            },
            //this function is called from My alerts  view button and gets the well view data for the selected well
            showWellView: function(alertWellId, alertPadId) {
                this.toMoment = moment();
                this.fromMoment = moment().subtract(7, 'day');
                this.showmyAlerts = false
                this.hidemyAlerts = true
                this.wellId = alertWellId;
                this.padId = alertPadId;
                var temp = {}
                temp.id = alertWellId;
                temp.label = alertWellId;
                temp.parent = this.padId;
                this.SelectedItem = temp;
                var currentToMoment = moment();
                var currentFromMoment = moment().subtract(7, 'day');
                this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                this.updatePlotlines();
                this.$$('#wellDetailsView')._refreshWellDetails(this.wellId);
                // this.$$("#wellSetpointsView")._refreshWellSetpoints(this.wellId);
                this.reloadminiSetPointView(this.wellId);
                this.$$('#riskStateTable')._refreshAlert(this.wellId);
                this.navigateToSetpoints();
                this.navigateToRiskStates();
                for (var i = 0; i < this.graphList.length; i++) {
                    this.graphList[i].$.chart.chart.showLoading();
                }
                setTimeout(() => {
                    this.requestGraphData("lastOneWeek", this.fromMoment, this.toMoment, "dateRange", this
                      .currentAggregation);
                    this.syncGraphs(this.dateMin, this.dateMax);
                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.chart.hideLoading();
                    }
                }, 2000);
            },

            refreshPage: function(e) {
                //refresh the Kpi bar,setpoints,riskstate and wellalerts content
                if (this.$$("#wellMyAlertsTable") !== null) {
                    this.padsId = this.$$("#wellMyAlertsTable").padsId;
                }
                this.refreshRiskStates(this.wellId);
                this.$$('#wellDetailsView').$.ajaxWellDetails.generateRequest();
                this.reloadminiSetPointView(this.wellId);
                //this.$$("#wellSetpointsView").$.ajaxSetpoints.generateRequest();
                for (var i = 0; i < this.graphList.length; i++) {
                    this.graphList[i].$.chart.$.ajaxGraphData.generateRequest();
                }
                this.getAlertData(this.wellId, this.fromMoment, this.toMoment, "attached");
                this.updateAlertMarker();
                this.updateModelInfoMarker();
                this._headers = {
                    "Content-Type": 'application/x-www-form-urlencoded',
                    'token': this.parent.accessToken
                }
                this._setColorParams = {
                    'user_id': this.parent.user,
                    'pad_selection': this.padsId
                };
                this.$.displayColor.generateRequest();
            },

            updateAlertMarker: function() {
                for (var i = 0; i < this.graphList.length; i++) {
                    if (this.graphList[i].id === "graph1") {
                        if (this.graphList[i].emulsionPlotlinesChecked === true) {
                            var graphName = "emulsion";
                            var graphData = this.riskData[8]["emulsion"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph2") {
                        if (this.graphList[i].vapourPlotlinesChecked === true) {
                            var graphName = "vapour";
                            var graphData = this.riskData[6]["vapour"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph3") {
                        if (this.graphList[i].producedGasPlotlinesChecked === true) {
                            var graphName = "producedGas";
                            var graphData = this.riskData[2]["producedGas"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph4") {
                        if (this.graphList[i].bswPlotlinesChecked === true) {
                            var graphName = "bsw";
                            var graphData = this.riskData[1]["bsw"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph5") {
                        if (this.graphList[i].bhtPlotlinesChecked === true) {
                            var graphName = "bht";
                            var graphData = this.riskData[0]["bht"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph6") {
                        if (this.graphList[i].returnPressurePlotlinesChecked === true) {
                            var graphName = "returnPressure";
                            var graphData = this.riskData[3]["returnPressure"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph7") {
                        if (this.graphList[i].suddenPressurePlotlinesChecked === true) {
                            var graphName = "suddenPressure";
                            var graphData = this.riskData[5]["suddenPressure"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph8") {
                        if (this.graphList[i].sagdPressurePlotlinesChecked === true) {
                            var graphName = "sagdPressure";
                            var graphData = this.riskData[4]["sagdPressure"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph9") {
                        if (this.graphList[i].setPointsPlotlinesChecked === true) {
                            var graphName = "setPoints";
                            var graphData = this.riskData[7]["pumpStatus"];
                            var tempArray = this.parseAlertMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    }
                }
            },


            updateModelInfoMarker: function() {
                for (var i = 0; i < this.graphList.length; i++) {
                    if (this.graphList[i].id === "graph1") {
                        if (this.graphList[i].modelInfoEmulsionPlotlinesChecked === true) {
                            var graphName = "emulsionModelInfo";
                            var graphData = this.riskData[8]["emulsionModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph2") {
                        if (this.graphList[i].modelInfoVapourPlotlinesChecked === true) {
                            var graphName = "vapourModelInfo";
                            var graphData = this.riskData[6]["vapourModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph3") {
                        if (this.graphList[i].modelInfoProducedGasPlotlinesChecked === true) {
                            var graphName = "producedGasModelInfo";
                            var graphData = this.riskData[2]["producedGasModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph4") {
                        if (this.graphList[i].modelInfoBSWPlotlinesChecked === true) {
                            var graphName = "bswModelInfo";
                            var graphData = this.riskData[1]["bswModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph5") {
                        if (this.graphList[i].modelInfoBHTPlotlinesChecked === true) {
                            var graphName = "bhtModelInfo";
                            var graphData = this.riskData[0]["bhtModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph6") {
                        if (this.graphList[i].modelInfoReturnPressurePlotlinesChecked === true) {
                            var graphName = "returnPressureModelInfo";
                            var graphData = this.riskData[3]["returnPressureModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph7") {
                        if (this.graphList[i].modelInfoSuddenPressurePlotlinesChecked === true) {
                            var graphName = "suddenPressureModelInfo";
                            var graphData = this.riskData[5]["suddenPressureModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph8") {
                        if (this.graphList[i].modelInfoSAGDPressurePlotlinesChecked === true) {
                            var graphName = "sagdPressureModelInfo";
                            var graphData = this.riskData[4]["sagdPressureModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    } else if (this.graphList[i].id === "graph9") {
                        if (this.graphList[i].modelInfoSetPointsPlotlinesChecked === true) {
                            var graphName = "setPointsModelInfo";
                            var graphData = this.riskData[7]["pumpStatusModelInfo"];
                            var tempArray = this.parseModelInfoMarker(graphName, graphData);
                            this.graphList[i].$.chart.chart.update({
                                xAxis: {
                                    plotLines: tempArray
                                }
                            });
                        }
                    }


                }
            },


            parseModelInfoMarker: function(graphName, graphData) {
                if (graphData && graphData.length > 0) {
                    var tempArray = [];
                    for (var i = 0; i < graphData.length; i++) {
                        var temp = {};
                        var temp1 = {};
                        var labeltext = {};
                        var labelStyle = {};
                        var training_date = graphData[i]["training_date"];
                        var mape = graphData[i]["mape"];
                        var error_bound = graphData[i]["error_bound"];
                        var timestamp = graphData[i]["timestamp"];

                        if (training_date !== null) {
                            var templabeltext = training_date + "<br>";
                        }

                        if (error_bound !== null) {
                            templabeltext = templabeltext + "Error Bound: " + error_bound + "<br>";
                        }

                        if (mape !== null) {
                            templabeltext = templabeltext + "MAPE: " + mape + "%" + "<br>";
                        }


                        temp.events = {
                            mouseover: function(e) {
                                this.label.element.style.display = 'block';
                            },
                            mouseout: function(e) {
                                this.label.element.style.display = 'none';
                            }
                        }

                        temp1.events = {
                            mouseover: function(e) {
                                this.label.element.style.display = 'block';
                            },
                            mouseout: function(e) {
                                this.label.element.style.display = 'none';
                            }
                        }

                        temp.value = timestamp,
                          temp1.value = timestamp,
                          temp.color = 'blue',
                          temp1.color = 'transparent',
                          temp.dashStyle = 'solid',
                          temp.width = 2,
                          temp1.width = 50,
                          temp.zIndex = 5,
                          temp1.zIndex = 5,
                          temp.id = graphName,
                          temp1.id = graphName,
                          labeltext.text = templabeltext,
                          labeltext.align = 'center',
                          labeltext.rotation = -360,
                          labelStyle.fontFamily = 'GE Inspira Sans',
                          labelStyle.color = 'white',
                          labelStyle.display = 'none',
                          labelStyle.fontWeight = 100,
                          labelStyle.pointerEvents = 'none',
                          labeltext.style = labelStyle,
                          temp.label = labeltext,
                          temp1.label = labeltext,
                          tempArray.push(temp),
                          tempArray.push(temp1)
                    }
                }
                return tempArray;
            },



            parseAlertMarker: function(graphName, graphData) {
                if (graphData.length > 0) {
                    var tempArray = [];
                    for (var i = 0; i < graphData.length; i++) {
                        var temp = {};
                        var labeltext = {};
                        var labelStyle = {};
                        var alertName = graphData[i]["alert_group"];
                        var alertTime = graphData[i]["start_time"];
                        var alertStatus = graphData[i]["alert_current_status"];
                        var alertDetails = graphData[i]["alert_name"];
                        var alertLimit = graphData[i]["limit"];
                        var alertEndtime = graphData[i]["end_time"];

                        if (alertEndtime !== null) {
                            if (alertDetails != "Pump Status") {
                                var templabeltext = alertDetails + "<br>" + "L: " + alertLimit + "<br>" + "E: " + alertEndtime;
                            } else {
                                var templabeltext = alertDetails + "<br>" + "E: " + alertEndtime;
                            }
                        } else {
                            if (alertDetails != "Pump Status") {
                                var templabeltext = alertDetails + "<br>" + "L: " + alertLimit;
                            } else {
                                var templabeltext = alertDetails;
                            }
                        }


                        if (alertStatus === "Nominal") {
                            var color = "green";
                        }
                        if (alertStatus === "Acknowledged" || alertStatus === "Action Taken") {
                            var color = "orange";
                        }
                        if (alertStatus === "At Risk") {
                            var color = "red";
                        }

                        temp.events = {
                            mouseover: function(e) {
                                this.label.element.style.display = 'block';
                            },
                            mouseout: function(e) {
                                this.label.element.style.display = 'none';
                            }
                        }
                        temp.value = alertTime,
                          temp.color = color,
                          temp.dashStyle = 'solid',
                          temp.width = 2,
                          temp.zIndex = 5,
                          temp.id = graphName,
                          labeltext.text = templabeltext,
                          labeltext.align = 'center',
                          labeltext.rotation = -360,
                          labelStyle.fontFamily = 'GE Inspira Sans',
                          labelStyle.color = 'white',
                          labelStyle.display = 'none',
                          labelStyle.fontWeight = 100,
                          labelStyle.pointerEvents = 'none',
                          labeltext.style = labelStyle,
                          temp.label = labeltext,
                          tempArray.push(temp)
                    }
                }
                return tempArray;
            },
            reloadminiSetPointView: function(wellId) {
                this.$$("#wellSetpointsView").$.miniwellSetpointsViewMain.dataLoaded = false;
                this.$$("#wellSetpointsView").$.miniwellSetpointsViewMain.getWellsetPointsByWellId(this.wellId);
            },
            showLoadingForDetailedGraph(index) {
                try {
                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.chart.showLoading();
                    }
                } catch (error) {

                }
            },
            hideLoadingForDetailedGraph(index) {
                try {
                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.chart.hideLoading();
                    }
                } catch (error) {

                }
            },
            //on clicking the next button of well navigation this function is called and it brings the new wells data on well view
            nextWell: function(e) {
                this.loadingDataMode = 'preventNavigation';
                this.showOrHideSetpoints = true;
                this.showLoadingForDetailedGraph();
                this.$$('#wellDetailsView').loading = false;
                this.$$('#wellDetailsView').patternOrWell = "well";
                this.$$('#wellDetailsView').togglePatterOrWell();
                this.$$('#datepickerDropdown').selected = null;
                this.$$('#aggregationDropdown').selected = null;
                this.$$('#graph1').$$('#datepickerDropdown').selected = null;
                this.$$('#graph2').$$('#datepickerDropdown').selected = null;
                this.$$('#graph3').$$('#datepickerDropdown').selected = null;
                this.$$('#graph4').$$('#datepickerDropdown').selected = null;
                this.$$('#graph5').$$('#datepickerDropdown').selected = null;
                this.$$('#graph6').$$('#datepickerDropdown').selected = null;
                this.$$('#graph7').$$('#datepickerDropdown').selected = null;
                this.$$('#graph8').$$('#datepickerDropdown').selected = null;
                this.$$('#graph9').$$('#datepickerDropdown').selected = null;
                this.toMoment = moment();
                this.fromMoment = moment().subtract(7, 'day');
                var listOfWells = [];
                var wellIndex = ''
                for (var i = 0; i < this.assetHierarchy.length; i++) {
                    for (var j = 0; j < this.assetHierarchy[i].children.length; j++) {
                        for (var k = 0; k < this.assetHierarchy[i].children[j].children.length; k++) {
                            if (this.padId === this.assetHierarchy[i].children[j].children[k].parent) {
                                listOfWells.push(this.assetHierarchy[i].children[j].children[k].id)
                            }
                        }
                    }
                }
                wellIndex = listOfWells.indexOf(this.wellId);
                if (wellIndex === ((listOfWells.length) - 1)) {
                    this.disableNext = false
                    this.disableBack = false
                    wellIndex = 0;
                    this.wellId = listOfWells[wellIndex];
                    var currentToMoment = moment();
                    var currentFromMoment = moment().subtract(7, 'day');
                    this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                    this.$$('#wellDetailsView')._refreshWellDetails(this.wellId);
                    // this.$$("#wellSetpointsView")._refreshWellSetpoints(this.wellId);
                    this.$$('#riskStateTable')._refreshAlert(this.wellId);
                    this._getWellsetupParams = {
                        'well_id': this.wellId
                    };
                    this.updatePlotlines();
                    this.navigateToRiskStates();

                    setTimeout(() => {
                        this.requestGraphData("lastOneWeek", this.fromMoment, this.toMoment, "dateRange", this
                          .currentAggregation);
                    }, 10);
                } else {
                    this.disableNext = false
                    wellIndex = wellIndex + 1;
                    this.disableBack = false
                    this.wellId = listOfWells[wellIndex];
                    var currentToMoment = moment();
                    var currentFromMoment = moment().subtract(7, 'day');
                    this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                    this.$$('#wellDetailsView')._refreshWellDetails(this.wellId);
                    // this.$$("#wellSetpointsView")._refreshWellSetpoints(this.wellId);
                    this.$$('#riskStateTable')._refreshAlert(this.wellId);
                    this._getWellsetupParams = {
                        'well_id': this.wellId
                    };
                    this.updatePlotlines();
                    this.navigateToRiskStates();

                    setTimeout(() => {
                        this.requestGraphData("lastOneWeek", this.fromMoment, this.toMoment, "dateRange", this
                          .currentAggregation);
                    }, 10);
                }
                this.resetWellSetupTogledStates();
                this.reloadminiSetPointView(this.wellId);
            },
            //on clicking the previous button of well navigation this function is called and it brings the new wells data on well view
            backWell() {
                this.loadingDataMode = 'preventNavigation';
                this.showOrHideSetpoints = true;
                this.showLoadingForDetailedGraph();
                this.$$('#wellDetailsView').loading = false;
                this.$$('#wellDetailsView').patternOrWell = "well";
                this.$$('#wellDetailsView').togglePatterOrWell();
                this.$$('#datepickerDropdown').selected = null;
                this.$$('#aggregationDropdown').selected = null;
                this.$$('#graph1').$$('#datepickerDropdown').selected = null;
                this.$$('#graph2').$$('#datepickerDropdown').selected = null;
                this.$$('#graph3').$$('#datepickerDropdown').selected = null;
                this.$$('#graph4').$$('#datepickerDropdown').selected = null;
                this.$$('#graph5').$$('#datepickerDropdown').selected = null;
                this.$$('#graph6').$$('#datepickerDropdown').selected = null;
                this.$$('#graph7').$$('#datepickerDropdown').selected = null;
                this.$$('#graph8').$$('#datepickerDropdown').selected = null;
                this.$$('#graph9').$$('#datepickerDropdown').selected = null;
                this.toMoment = moment();
                this.fromMoment = moment().subtract(7, 'day');
                var listOfWells = [];
                var wellIndex = ''
                for (var i = 0; i < this.assetHierarchy.length; i++) {
                    for (var j = 0; j < this.assetHierarchy[i].children.length; j++) {
                        for (var k = 0; k < this.assetHierarchy[i].children[j].children.length; k++) {
                            if (this.padId === this.assetHierarchy[i].children[j].children[k].parent) {
                                listOfWells.push(this.assetHierarchy[i].children[j].children[k].id)
                            }
                        }
                    }
                }
                wellIndex = listOfWells.indexOf(this.wellId);
                if (wellIndex === 0) {
                    this.disableBack = false
                    this.disableNext = false
                    wellIndex = listOfWells.length - 1;
                    this.wellId = listOfWells[wellIndex];
                    var currentToMoment = moment();
                    var currentFromMoment = moment().subtract(7, 'day');
                    this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                    this._getWellsetupParams = {
                        'well_id': this.wellId
                    };
                    this.$$('#wellDetailsView')._refreshWellDetails(this.wellId);
                    // this.$$("#wellSetpointsView")._refreshWellSetpoints(this.wellId);
                    this.$$('#riskStateTable')._refreshAlert(this.wellId);
                    this.updatePlotlines();
                    this.navigateToRiskStates();

                    setTimeout(() => {
                        this.requestGraphData("lastOneWeek", this.fromMoment, this.toMoment, "dateRange", this
                          .currentAggregation);
                    }, 10);

                } else {
                    this.disableBack = false
                    wellIndex = wellIndex - 1;
                    this.disableNext = false
                    this.wellId = listOfWells[wellIndex];
                    var currentToMoment = moment();
                    var currentFromMoment = moment().subtract(7, 'day');
                    this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                    this._getWellsetupParams = {
                        'well_id': this.wellId
                    };
                    this.$$('#wellDetailsView')._refreshWellDetails(this.wellId);
                    // this.$$("#wellSetpointsView")._refreshWellSetpoints(this.wellId);
                    this.$$('#riskStateTable')._refreshAlert(this.wellId);
                    this.updatePlotlines();
                    this.navigateToRiskStates();

                    setTimeout(() => {
                        this.requestGraphData("lastOneWeek", this.fromMoment, this.toMoment, "dateRange", this
                          .currentAggregation);
                    }, 10);
                }
                this.resetWellSetupTogledStates();
                this.reloadminiSetPointView(this.wellId);
            },
            attached: function() {
                this.setupElement();
                // Clear enable view refresh in seed app
                clearInterval(this.parent.enableViewRefresh);
                this.disableNext = false;
                this.disableBack = false;
                this.showmyAlerts = false;
                this.hidemyAlerts = true;
                this.padsId = 'My Pads';
                this.min = moment().subtract(2, 'year');
                this.max = moment();
                try {
                    var toDate = moment().tz(moment(), "America/Edmonton").utc();
                    var fromDate = moment().tz(moment().subtract(7, 'year'), "America/Edmonton").utc()
                } catch (e) {
                    var toDate = moment().utc();
                    var fromDate = moment().utc().subtract(7, 'day');
                }

                if (this.parent.defaultWell !== undefined) {
                    this.SelectedItem = this.parent.defaultWell;
                    this.wellId = this.parent.defaultWell.label;
                    this.padId = this.parent.defaultWell.parent;
                }
                this._headers = {
                    "Content-Type": 'application/x-www-form-urlencoded',
                    'token': this.parent.accessToken
                };
                this._setColorParams = {
                    'user_id': this.parent.user,
                    'pad_selection': this.padsId
                };

                if (this.parent.navWellId !== undefined && this.parent.navWellId !== this.wellId) {
                    this.SelectedItem = undefined;
                    this.wellId = this.parent.navWellId;
                    this.padId = this.parent.navPadId;
                    var temp = {};
                    temp.id = this.parent.navWellId;
                    temp.label = this.parent.navWellId;
                    temp.parent = this.parent.navPadId;
                    this.SelectedItem = temp;
                }
                this.getAlertData(this.wellId, fromDate, toDate, "attached");
                if (this.showmyAlerts === false) {
                    this.autoRefresh = setInterval(() => {
                        if (this.showmyAlerts === false) {
                            this._updateData();
                        }
                    }, 300000);
                }

                setTimeout(() => {
                    this.assetHierarchy = this.parent.assetHierarchy;
                    this.loggedUser = this.parent.user;
                    this._getWellsetupParams = {
                        'well_id': this.wellId
                    };
                    this.reloadminiSetPointView(this.wellId);
                    this.setupGraphs();
                    this.$.displayColor.generateRequest();
                    this.$$('#riskStateTable').parent = this;
                    this.$$('#riskStateDetailedView').parent = this;
                    this.datepicker = this.$$('#datepicker');
                    this.listen(this.datepicker, 'px-datetime-range-submitted', 'applyRange');
                    this.refreshDropdown = this.$$('#refreshFrequencyDropdown');
                    this.listen(this.refreshDropdown, 'px-dropdown-selection-changed', 'applyRefreshFrequency');
                    this.itemSelected = this.$$('#contextBrowser');
                    this.listen(this.itemSelected, 'px-app-asset-selected', 'getData');
                    this.requestGraphData(this.wellId, this.fromMoment, this.toMoment, "attached", this
                      .currentAggregation);
                    this.configureChartBinding();
                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.vapourPlotlines = undefined;
                        this.graphList[i].$.chart.producedGasPlotlines = undefined;
                        this.graphList[i].$.chart.bswPlotlines = undefined;
                        this.graphList[i].$.chart.bhtPlotlines = undefined;
                        this.graphList[i].$.chart.returnPressurePlotlines = undefined;
                        this.graphList[i].$.chart.suddenPressurePlotlines = undefined;
                        this.graphList[i].$.chart.sagdPressurePlotlines = undefined;
                        this.graphList[i].$.chart.setPointsPlotlines = undefined;
                        this.graphList[i].$.chart.emulsionPlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoVapourPlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoProducedGasPlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoBSWPlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoBHTPlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoReturnPressurePlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoSuddenPressurePlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoSAGDPressurePlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoSetPointsPlotlines = undefined;
                        this.graphList[i].$.chart.modelInfoEmulsionPlotlines = undefined;
                        this.graphList[i].$.chart.getAlertMarker(this.riskData, this.graphList[i].chartid);
                        this.graphList[i].$.chart.getModelInfoMarker(this.modelInfoData, this.graphList[i].chartid);
                        if (i == 0) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.returnPressurePlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].returnPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].returnPressurePlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoReturnPressurePlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoReturnPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoReturnPressurePlotlinesChecked = false;
                            }
                        } else if (i == 1) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.emulsionPlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].emulsionPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].emulsionPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoEmulsionPlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoEmulsionPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoEmulsionPlotlinesChecked = false;
                            }
                        } else if (i == 2) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.sagdPressurePlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].sagdPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].sagdPressurePlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoSAGDPressurePlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoSAGDPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoSAGDPressurePlotlinesChecked = false;
                            }
                        } else if (i == 3) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.setPointsPlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].setPointsPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].setPointsPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoSetPointsPlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoSetPointsPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoSetPointsPlotlinesChecked = false;
                            }
                        } else if (i == 4) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.vapourPlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].vapourPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].vapourPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoVapourPlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoVapourPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoVapourPlotlinesChecked = false;
                            }
                        } else if (i == 5) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.suddenPressurePlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].suddenPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].suddenPressurePlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoSuddenPressurePlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoSuddenPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoSuddenPressurePlotlinesChecked = false;

                            }
                        } else if (i == 6) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.bhtPlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].bhtPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].bhtPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoBHTPlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoBHTPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoBHTPlotlinesChecked = false;
                            }
                        } else if (i == 7) {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.producedGasPlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].producedGasPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].producedGasPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoProducedGasPlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoProducedGasPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoProducedGasPlotlinesChecked = false;
                            }
                        } else {
                            if (this.plotlinesCheck(this.graphList[i].$.chart.bswPlotlines)) {
                                this.graphList[i].dynamicStyle = "custom-icon";
                                this.graphList[i].bswPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicStyle = "custom-icon-nofill";
                                this.graphList[i].bswPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoBSWPlotlines)) {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[i].modelInfoBSWPlotlinesChecked = true;
                            } else {
                                this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[i].modelInfoBSWPlotlinesChecked = false;
                            }
                        }
                        this.syncGraphs(this.dateMin, this.dateMax);


                    }
                }, 10);

                setTimeout(function() {
                    this.initialized();
                }.bind(this), 500);


            },
            //this function is to sync the charts and bind the crosshair based on the timestamp and available point
            configureChartBinding: function() {
                var graphArray = ["#graph6", "#graph1", "#graph8", "#graph9", "#graph2", "#graph7", "#graph5", "#graph3",
                    "#graph4"
                ];
                for (var i = 0; i < graphArray.length; i++) {

                    $(graphArray[i]).bind('mousemove touchmove touchstart', function(e) {
                        var check = false;
                        var graphWidth = this.offsetWidth;
                        var sourceGraphID = "#" + this["id"];
                        var chart, point, i, event;
                        var parent = this.parent;
                        try {
                            // Get date over source graph
                            var index = parseInt(this["id"].substring(5)) - 1;
                            var indexList = {
                                0: 1,
                                1: 4,
                                2: 7,
                                3: 8,
                                4: 6,
                                5: 0,
                                6: 5,
                                7: 2,
                                8: 3
                            }
                            var chartIndex = indexList[index];
                            var sourceChart = parent.graphList[chartIndex].$.chart.chart;
                            var sourceEvent = sourceChart.pointer.normalize(e.originalEvent);
                            for (i = 0; i < sourceChart.series.length; i++) {
                                if (sourceChart.series[i].data.length !== 0 && !check) {
                                    var sourceDate = sourceChart.series[i].searchPoint(sourceEvent, true)["x"];
                                    check = true;
                                }
                            }


                            for (i = 0; i < parent.graphList.length; i = i + 1) {
                                chart = parent.graphList[i].$.chart.chart;
                                var graphID = graphArray[i];

                                // Find coordinates within the chart
                                event = chart.pointer.normalize(e.originalEvent);
                                // Find min and max of specific graph, and get decimal
                                var min = chart.xAxis[0]["min"];
                                var max = chart.xAxis[0]["max"];
                                var decimal = parent.convertDateToDecimal(min, max, sourceDate);

                                // Synchronize graph based on decimal
                                switch (graphID != sourceGraphID) {
                                    case true:
                                        event.chartX = graphWidth * decimal;

                                        break;
                                }

                                // Get the hovered point from the series with max range
                                var chosenSeries,
                                  pLen = 0;

                                chart.series.forEach(function(ser, sInx) {
                                    if (!pLen || (pLen < ser.points.length)) {
                                        chosenSeries = ser;
                                        pLen = ser.points.length;
                                    }
                                });

                                point = chosenSeries.searchPoint(event, true);

                                if (point) {
                                    point.highlight(e);
                                }

                                sourceChart.touched = true;
                                if (graphID != sourceGraphID) {
                                    chart.touched = false;
                                } else {
                                    chart.touched = true;
                                }

                                sourceChart.xAxis[0].crossLabel[sourceChart.touched ? 'show' : 'hide']()
                                chart.xAxis[0].crossLabel[chart.touched ? 'show' : 'hide']()
                            }

                        } catch (err) {
                            // console.log(err);
                        }

                    });
                }
            },

            didScroll: function(event) {
                // var tableIsVisible = elementInViewport(this.$.riskStateTable);
                // if (tableIsVisible === true) {
                //   this.riskStateListPosition = "relative";
                // }
                // else {
                //   this.riskStateListPosition = "fixed";
                // }
            },
            setupElement: function() {
                this.parent = document.querySelector('#view').parent;
                this.accessToken = this.parent.accessToken;
                this.assetHierarchy = this.parent.assetHierarchy;
                this.loggedUser = this.parent.user;
            },
            //observer function for the autorefresh dropdown this function sets the refresh values based on the selection
            applyRefreshFrequency: function(e) {

                this.isRefreshDropdownChanged = true;
                switch (e.detail.key) {
                    case '0':
                        this.interval = 0; // no
                        clearInterval(this.wellSetupAutorefresh);
                        clearInterval(this.autoRefresh);
                        clearInterval(this.autoRefreshMyAlerts);
                        this.myAlertsRefreshTimeInterval = 0;
                        this.graphRefreshTimeInterval = 0;
                        break;
                    case '5':
                        this.interval = 300000; // every 5 mins
                        if (this.enableWellSetUp === true) {
                            clearInterval(this.wellSetupAutorefresh);
                            this.wellSetupAutorefresh = setInterval(() => {
                                this._updateData();
                            }, 300000);
                        }
                        if (this.showmyAlerts === false) {
                            clearInterval(this.autoRefresh);
                            this.autoRefresh = setInterval(() => {
                                this._updateData();

                            }, 300000);

                        }
                        this.myAlertsRefreshTimeInterval = 300000;
                        this.graphRefreshTimeInterval = 300000;
                        break;
                    case '10':
                        this.interval = 600000; // every `10` mins
                        if (this.enableWellSetUp === true) {
                            clearInterval(this.wellSetupAutorefresh);
                            this.wellSetupAutorefresh = setInterval(() => {
                                this._updateData();
                            }, 600000);
                        }
                        if (this.showmyAlerts === false) {
                            clearInterval(this.autoRefresh);
                            this.autoRefresh = setInterval(() => {
                                this._updateData();

                            }, 600000);
                        }
                        this.myAlertsRefreshTimeInterval = 600000;
                        this.graphRefreshTimeInterval = 600000;
                        break;
                    case '15':
                        this.interval = 900000; // every 15 mins`
                        if (this.enableWellSetUp === true) {
                            clearInterval(this.wellSetupAutorefresh);
                            this.wellSetupAutorefresh = setInterval(() => {
                                this._updateData();
                            }, 900000);
                        }
                        if (this.showmyAlerts === false) {
                            clearInterval(this.autoRefresh);
                            this.autoRefresh = setInterval(() => {
                                this._updateData();

                            }, 900000);
                        }
                        this.myAlertsRefreshTimeInterval = 900000;
                        this.graphRefreshTimeInterval = 900000;
                        break;
                }
                clearInterval(this.refreshTimerInterval);
                // If no refresh selected, clear any existing interval
                if (this.interval === 0) {
                    this.refreshTimerInterval = 0;
                }
                // else set interval according to user selection
                else {
                    clearInterval(this.refreshTimerInterval);
                    this.refreshTimerInterval = setInterval(function() {
                        this.refreshRiskStates(this.wellId);
                        this.$$('#wellDetailsView').$.ajaxWellDetails.generateRequest();
                        //this.$$("#wellSetpointsView").$.ajaxSetpoints.generateRequest();
                        for (var i = 0; i < this.graphList.length; i++) {
                            this.graphList[i].$.chart.$.ajaxGraphData.generateRequest();
                        }
                    }, this.interval);
                }
            },
            initialized: function() {
                this.isInitialized = true;
            },
            convertDateToDecimal: function(min, max, current) {
                // Convert date to a decimal between 0.0 and 1.0
                var range = max - min;
                var normalizedCurrent = current - min;
                var decimal = normalizedCurrent / range;
                return decimal;
            },
            //on tap of the risk states tab the graph view fits to the window size
            scrollToRiskStates: function() {
                var riskStates = document.getElementById("riskStatesTitleBar");
                riskStates.scrollIntoView();
            },
            //generates the graph list array for using this array to bind the graphs and for assigning the datapoints to the graphs
            setupGraphs: function() {
                this.graphList = [
                    this.$$('#graph6'),
                    this.$$("#graph1"),
                    this.$$('#graph8'),
                    this.$$('#graph9'),
                    this.$$('#graph2'),
                    this.$$('#graph7'),
                    this.$$('#graph5'),
                    this.$$('#graph3'),
                    this.$$('#graph4')
                ];

                for (var i = 0; i < this.graphList.length; i++) {
                    this.graphList[i].parent = this;
                }
            },

            riskStateGraphSync: function(fromMoment, toMoment) {
                this.syncGraphs(this.dateMin, this.dateMax);
                this.getAlertData(this.wellId, fromMoment, toMoment, "attached", "");
                for (var i = 0; i < this.graphList.length; i++) {
                    this.graphList[i].$.chart.getAlertMarker(this.riskData);
                    this.graphList[i].$.chart.getModelInfoMarker(this.modelInfoData);
                }
            },

            //observer function for the date range calendar
            applyRange: function() {
                this.async(function() {
                    var fromdate = this.fromMoment;
                    var toDate = this.toMoment;
                    var a = moment.utc(fromdate).format();
                    var tempFromdate = new Date(a).toLocaleString('en-GB', {
                        timeZone: 'Canada/Mountain'
                    });
                    var temp = (tempFromdate.toString()).split(",");
                    var tempdate = temp[0].split("/");
                    var newFromDate = tempdate[2] + "-" + tempdate[1] + "-" + tempdate[0] + "T" + temp[1].trim();
                    var b = moment.utc(toDate).format();
                    var tempTodate = new Date(b).toLocaleString('en-GB', {
                        timeZone: 'Canada/Mountain'
                    });
                    var tempto = (tempTodate.toString()).split(",");
                    var toTemp = tempto[0].split("/");
                    var newToDate = toTemp[2] + "-" + toTemp[1] + "-" + toTemp[0] + "T" + tempto[1].trim();
                    this.modifiedFromDate = newFromDate;
                    this.modifiedToDate = newToDate;
                    this.graphList[1].emulsionFromMoment = undefined;
                    this.graphList[1].emulsionToMoment = undefined;
                    this.graphList[4].vapourFromMoment = undefined;
                    this.graphList[4].vapourToMoment = undefined;
                    this.graphList[7].producedGasFromMoment = undefined
                    this.graphList[7].producedGasToMoment = undefined
                    this.graphList[8].bswFromMoment = undefined
                    this.graphList[8].bswToMoment = undefined
                    this.graphList[6].bhtFromMoment = undefined
                    this.graphList[6].bhtToMoment = undefined
                    this.graphList[0].returnPressureFromMoment = undefined
                    this.graphList[0].returnPressureToMoment = undefined
                    this.graphList[5].suddenPressureFromMoment = undefined
                    this.graphList[5].suddenPressureToMoment = undefined
                    this.graphList[2].sagdPressureFromMoment = undefined
                    this.graphList[2].sagdPressureToMoment = undefined
                    this.graphList[3].setpointsFromMoment = undefined
                    this.graphList[3].setpointsToMoment = undefined
                    this.showOrHideLoader(true);
                    setTimeout(() => {
                        this.requestGraphData(this.wellId, newFromDate, newToDate, "applyRange", this
                          .currentAggregation);
                        this.getAlertData(this.wellId, newFromDate, newToDate, "applyRange", "applyRange");
                    }, 500);

                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.getAlertMarker(this.riskData);
                        this.graphList[i].$.chart.getModelInfoMarker(this.modelInfoData);
                    }
                    if (this.chartid === "chart1") {
                        if (this.plotlinesCheck(this.graphList[1].$.chart.emulsionPlotlines)) {
                            this.graphList[1].dynamicStyle = "custom-icon";
                            this.graphList[1].emulsionPlotlinesChecked = true;
                        } else {
                            this.graphList[1].dynamicStyle = "custom-icon-nofill";
                            this.graphList[1].emulsionPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[1].$.chart.modelInfoEmulsionPlotlines)) {
                            this.graphList[1].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[1].modelInfoEmulsionPlotlinesChecked = true;
                        } else {
                            this.graphList[1].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[1].modelInfoEmulsionPlotlinesChecked = false;
                        }
                        this.emulsionFromMoment = newFromDate;
                        this.emulsionToMoment = newToDate
                    }
                    if (this.chartid === "chart2") {
                        if (this.plotlinesCheck(this.graphList[4].$.chart.vapourPlotlines)) {
                            this.graphList[4].dynamicStyle = "custom-icon";
                            this.graphList[4].vapourPlotlinesChecked = true;
                        } else {
                            this.graphList[4].dynamicStyle = "custom-icon-nofill";
                            this.graphList[4].vapourPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[4].$.chart.modelInfoVapourPlotlines)) {
                            this.graphList[4].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[4].modelInfoVapourPlotlinesChecked = true;
                        } else {
                            this.graphList[4].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[4].modelInfoVapourPlotlinesChecked = false;
                        }
                        this.vapourFromMoment = newFromDate
                        this.vapourToMoment = newToDate
                    }
                    if (this.chartid === "chart3") {
                        if (this.plotlinesCheck(this.graphList[7].$.chart.producedGasPlotlines)) {
                            this.graphList[7].dynamicStyle = "custom-icon";
                            this.graphList[7].producedGasPlotlinesChecked = true;
                        } else {
                            this.graphList[7].dynamicStyle = "custom-icon-nofill";
                            this.graphList[7].producedGasPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[7].$.chart.modelInfoProducedGasPlotlines)) {
                            this.graphList[7].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[7].modelInfoProducedGasPlotlinesChecked = true;
                        } else {
                            this.graphList[7].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[7].modelInfoProducedGasPlotlinesChecked = false;
                        }
                        this.producedGasFromMoment = newFromDate
                        this.producedGasToMoment = newToDate
                    }
                    if (this.chartid === "chart4") {
                        if (this.plotlinesCheck(this.graphList[8].$.chart.bswPlotlines)) {
                            this.graphList[8].dynamicStyle = "custom-icon";
                            this.graphList[8].bswPlotlinesChecked = true;
                        } else {
                            this.graphList[8].dynamicStyle = "custom-icon-nofill";
                            this.graphList[8].bswPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[8].$.chart.modelInfoBSWPlotlines)) {
                            this.graphList[8].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[8].modelInfoBSWPlotlinesChecked = true;
                        } else {
                            this.graphList[8].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[8].modelInfoBSWPlotlinesChecked = false;
                        }
                        this.bswFromMoment = newFromDate
                        this.bswToMoment = newToDate
                    }
                    if (this.chartid === "chart5") {
                        if (this.plotlinesCheck(this.graphList[6].$.chart.bhtPlotlines)) {
                            this.graphList[6].dynamicStyle = "custom-icon";
                            this.graphList[6].bhtPlotlinesChecked = true;
                        } else {
                            this.graphList[6].dynamicStyle = "custom-icon-nofill";
                            this.graphList[6].bhtPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[6].$.chart.modelInfoBHTPlotlines)) {
                            this.graphList[6].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[6].modelInfoBHTPlotlinesChecked = true;
                        } else {
                            this.graphList[6].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[6].modelInfoBHTPlotlinesChecked = false;
                        }
                        this.bhtFromMoment = newFromDate
                        this.bhtToMoment = newToDate
                    }
                    if (this.chartid === "chart6") {
                        if (this.plotlinesCheck(this.graphList[0].$.chart.returnPressurePlotlines)) {
                            this.graphList[0].dynamicStyle = "custom-icon";
                            this.graphList[0].returnPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[0].dynamicStyle = "custom-icon-nofill";
                            this.graphList[0].returnPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[0].$.chart.modelInfoReturnPressurePlotlines)) {
                            this.graphList[0].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[0].modelInfoReturnPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[0].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[0].modelInfoReturnPressurePlotlinesChecked = false;
                        }
                        this.returnPressureFromMoment = newFromDate
                        this.returnPressureToMoment = newToDate
                    }
                    if (this.chartid === "chart7") {

                        if (this.plotlinesCheck(this.graphList[5].$.chart.suddenPressurePlotlines)) {
                            this.graphList[5].dynamicStyle = "custom-icon";
                            this.graphList[5].suddenPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[5].dynamicStyle = "custom-icon-nofill";
                            this.graphList[5].suddenPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[5].$.chart.modelInfoSuddenPressurePlotlines)) {
                            this.graphList[5].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[5].modelInfoSuddenPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[5].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[5].modelInfoSuddenPressurePlotlinesChecked = false;

                        }

                        this.suddenPressureFromMoment = newFromDate
                        this.suddenPressureToMoment = newToDate
                    }
                    if (this.chartid === "chart8") {

                        if (this.plotlinesCheck(this.graphList[2].$.chart.sagdPressurePlotlines)) {
                            this.graphList[2].dynamicStyle = "custom-icon";
                            this.graphList[2].sagdPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[2].dynamicStyle = "custom-icon-nofill";
                            this.graphList[2].sagdPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[2].$.chart.modelInfoSAGDPressurePlotlines)) {
                            this.graphList[2].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[2].modelInfoSAGDPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[2].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[2].modelInfoSAGDPressurePlotlinesChecked = false;
                        }
                        this.sagdPressureFromMoment = newFromDate
                        this.sagdPressureToMoment = newToDate
                    }
                    if (this.chartid === "chart9") {
                        if (this.plotlinesCheck(this.graphList[3].$.chart.setPointsPlotlines)) {
                            this.graphList[3].dynamicStyle = "custom-icon";
                            this.graphList[3].setPointsPlotlinesChecked = true;
                        } else {
                            this.graphList[3].dynamicStyle = "custom-icon-nofill";
                            this.graphList[3].setPointsPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[3].$.chart.modelInfoSetPointsPlotlines)) {
                            this.graphList[3].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[3].modelInfoSetPointsPlotlinesChecked = true;
                        } else {
                            this.graphList[3].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[3].modelInfoSetPointsPlotlinesChecked = false;
                        }
                        this.setpointsFromMoment = newFromDate
                        this.setpointsToMoment = newToDate
                    }

                    this.currentTimestamp = new Date().getTime();
                    var timeDifference = this.currentTimestamp - this.dateMax;
                    if (timeDifference > 3600000) {
                        this.interval = 0; // no
                        clearInterval(this.wellSetupAutorefresh);
                        clearInterval(this.autoRefresh);
                        clearInterval(this.autoRefreshMyAlerts);
                        this.myAlertsRefreshTimeInterval = 0;
                        this.graphRefreshTimeInterval = 0;
                    }

                    //this.syncGraphs(this.dateMin, this.dateMax);
                    this.$$('#datepickerDropdown').selected = null;
                });
            },
            //listner function for the px-context-browser dropdown for well list
            getData: function() {
                this.$$('#datepickerDropdown').selected = null;
                this.$$('#aggregationDropdown').selected = null;
                this.$$('#wellDetailsView').patternOrWell = "well";
                this.$$('#wellDetailsView').togglePatterOrWell();
                this.$$('#graph1').$$('#datepickerDropdown').selected = null;
                this.$$('#graph2').$$('#datepickerDropdown').selected = null;
                this.$$('#graph3').$$('#datepickerDropdown').selected = null;
                this.$$('#graph4').$$('#datepickerDropdown').selected = null;
                this.$$('#graph5').$$('#datepickerDropdown').selected = null;
                this.$$('#graph6').$$('#datepickerDropdown').selected = null;
                this.$$('#graph7').$$('#datepickerDropdown').selected = null;
                this.$$('#graph8').$$('#datepickerDropdown').selected = null;
                this.$$('#graph9').$$('#datepickerDropdown').selected = null;
                this.toMoment = moment();
                this.fromMoment = moment().subtract(7, 'day');
                this.showOrHideSetpoints = true;
                this.wellId = this.$$('#contextBrowser').selected.id;
                var selectedId = this.wellId;
                this.padId = this.$$('#contextBrowser').selected.parent;
                if (selectedId.startsWith("Pad")) {
                    this.parent.navRoute = ["pad"];
                    this.wellId = this.wellId;
                } else if (selectedId.startsWith("/field/")) {
                    this.parent.navRoute = ["field"];
                    this.wellId = this.wellId
                } else {
                    var currentToMoment = moment();
                    var currentFromMoment = moment().subtract(7, 'day');
                    this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                    this.$$('#wellDetailsView')._refreshWellDetails(this.wellId);
                    // this.$$("#wellSetpointsView")._refreshWellSetpoints(this.wellId);
                    this.$$('#riskStateTable')._refreshAlert(this.wellId);
                    this.updatePlotlines();
                    this.navigateToRiskStates();
                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.chart.showLoading();
                    }
                    setTimeout(() => {
                        this.requestGraphData("lastOneWeek", this.fromMoment, this.toMoment, "dateRange", this
                          .currentAggregation);
                        this.graphsettings(selectedId);
                        this.syncGraphs(this.dateMin, this.dateMax);
                        for (var i = 0; i < this.graphList.length; i++) {
                            this.graphList[i].$.chart.chart.hideLoading();
                        }
                    }, 5000);
                }

                var listOfWells = [];
                var wellIndex = ''
                for (var i = 0; i < this.assetHierarchy.length; i++) {
                    for (var j = 0; j < this.assetHierarchy[i].children.length; j++) {
                        for (var k = 0; k < this.assetHierarchy[i].children[j].children.length; k++) {
                            if (this.padId === this.assetHierarchy[i].children[j].children[k].parent) {
                                listOfWells.push(this.assetHierarchy[i].children[j].children[k].id)
                            }
                        }
                    }
                }
                wellIndex = listOfWells.indexOf(this.$$('#contextBrowser').selected.id);
                if (wellIndex === ((listOfWells.length) - 1)) {
                    this.disableNext = false;
                    this.disableBack = false;
                } else if (wellIndex === 0) {
                    this.disableNext = false;
                    this.disableBack = false;
                } else {
                    this.disableNext = false;
                    this.disableBack = false;
                }
                this.reloadminiSetPointView(this.wellId);
            },
            //on chnage of daterange or well id everytime the plotlines needs to updated on the graph with the new data
            updatePlotlines: function() {
                for (var i = 0; i < this.graphList.length; i++) {
                    this.graphList[i].applyStatus();
                    this.graphList[i].$.chart.vapourPlotlines = undefined;
                    this.graphList[i].$.chart.producedGasPlotlines = undefined;
                    this.graphList[i].$.chart.bswPlotlines = undefined;
                    this.graphList[i].$.chart.bhtPlotlines = undefined;
                    this.graphList[i].$.chart.returnPressurePlotlines = undefined;
                    this.graphList[i].$.chart.suddenPressurePlotlines = undefined;
                    this.graphList[i].$.chart.sagdPressurePlotlines = undefined;
                    this.graphList[i].$.chart.setPointsPlotlines = undefined;
                    this.graphList[i].$.chart.emulsionPlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoVapourPlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoProducedGasPlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoBSWPlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoBHTPlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoReturnPressurePlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoSuddenPressurePlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoSAGDPressurePlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoSetPointsPlotlines = undefined;
                    this.graphList[i].$.chart.modelInfoEmulsionPlotlines = undefined;
                    this.graphList[i].vapourPlotlinesChecked = true;
                    this.graphList[i].producedGasPlotlinesChecked = true;
                    this.graphList[i].bswPlotlinesChecked = true;
                    this.graphList[i].bhtPlotlinesChecked = true;
                    this.graphList[i].returnPressurePlotlinesChecked = true;
                    this.graphList[i].suddenPressurePlotlinesChecked = true;
                    this.graphList[i].sagdPressurePlotlinesChecked = true;
                    this.graphList[i].setPointsPlotlinesChecked = true;
                    this.graphList[i].emulsionPlotlinesChecked = true;
                    this.graphList[i].modelInfoVapourPlotlinesChecked = true;
                    this.graphList[i].modelInfoProducedGasPlotlinesChecked = true;
                    this.graphList[i].modelInfoBSWPlotlinesChecked = true;
                    this.graphList[i].modelInfoBHTPlotlinesChecked = true;
                    this.graphList[i].modelInfoReturnPressurePlotlinesChecked = true;
                    this.graphList[i].modelInfoSuddenPressurePlotlinesChecked = true;
                    this.graphList[i].modelInfoSAGDPressurePlotlinesChecked = true;
                    this.graphList[i].modelInfoSetPointsPlotlinesChecked = true;
                    this.graphList[i].modelInfoEmulsionPlotlinesChecked = true;
                    this.graphList[i].$.chart.getAlertMarker(this.riskData, this.graphList[i].chartid);
                    this.graphList[i].$.chart.getModelInfoMarker(this.modelInfoData, this.graphList[i].chartid);
                    if (i == 0) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.returnPressurePlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].returnPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].returnPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoReturnPressurePlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoReturnPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoReturnPressurePlotlinesChecked = false;
                        }
                    } else if (i == 1) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.emulsionPlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].emulsionPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].emulsionPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoEmulsionPlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoEmulsionPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoEmulsionPlotlinesChecked = false;
                        }
                    } else if (i == 2) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.sagdPressurePlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].sagdPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].sagdPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoSAGDPressurePlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoSAGDPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoSAGDPressurePlotlinesChecked = false;
                        }
                    } else if (i == 3) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.setPointsPlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].setPointsPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].setPointsPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoSetPointsPlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoSetPointsPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoSetPointsPlotlinesChecked = false;
                        }
                    } else if (i == 4) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.vapourPlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].vapourPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].vapourPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoVapourPlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoVapourPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoVapourPlotlinesChecked = false;
                        }
                    } else if (i == 5) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.suddenPressurePlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].suddenPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].suddenPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoSuddenPressurePlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoSuddenPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoSuddenPressurePlotlinesChecked = false;

                        }
                    } else if (i == 6) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.bhtPlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].bhtPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].bhtPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoBHTPlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoBHTPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoBHTPlotlinesChecked = false;
                        }
                    } else if (i == 7) {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.producedGasPlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].producedGasPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].producedGasPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoProducedGasPlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoProducedGasPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoProducedGasPlotlinesChecked = false;
                        }
                    } else {
                        if (this.plotlinesCheck(this.graphList[i].$.chart.bswPlotlines)) {
                            this.graphList[i].dynamicStyle = "custom-icon";
                            this.graphList[i].bswPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicStyle = "custom-icon-nofill";
                            this.graphList[i].bswPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[i].$.chart.modelInfoBSWPlotlines)) {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[i].modelInfoBSWPlotlinesChecked = true;
                        } else {
                            this.graphList[i].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[i].modelInfoBSWPlotlinesChecked = false;
                        }
                    }

                }
            },
            //sync the x-axis of all the graphs on click of the sync button
            xAxisSync: function(fromMoment, toMoment, source) {
                for (var i = 0; i < this.graphList.length; i++) {
                    this.graphList[i].filterChartforAxisSync(fromMoment, toMoment, source);
                }
            },

            plotlinesCheck: function(plotlines) {
                if (plotlines !== undefined) {
                    var count = 0;
                    for (var i = 0; i < plotlines.length; i++) {
                        if (plotlines[i].label.text != undefined) {
                            count++;
                        }
                    }
                    if (count > 0) {
                        return true;
                    } else {
                        return false;
                    }

                } else {
                    return false;
                }
            },
            //configures the highcharts graph with new graph data
            syncGraphs: function(fromMoment, toMoment) {
                switch (this.isInitialized) {
                    case true:
                        switch (fromMoment != undefined && toMoment != undefined) {
                            case true:
                                for (var i = 0; i < this.graphList.length; i++) {
                                    this.graphList[i].$.chart.filterChartSync(fromMoment, toMoment);
                                }
                                break;
                        }
                        break;
                }
            },
            syncGraphsXMaxMin: function(fromMoment, toMoment, index) {
                this.graphList[index].$.chart.filterChartSync(fromMoment, toMoment);
            },

            //on click of the drilldown navigation icon this function is triggered to open the drilldown and call the API for the selected risk state
            navigateToDetailed: function(chartId) {
                this.checkShoworHide = "masked";
                this.heightExtension = "100px";
                this.tabName = 'riskStateDetailed';

                //retain date range selection in detailed view
                this.$$('#riskStateDetailedView').fromMoment = this.fromMoment;
                this.$$('#riskStateDetailedView').toMoment = this.toMoment;
                this.$$('#riskStateDetailedView').selectedDateRangeDropdown = this.selectedDateRangeDropdown;
                this.$$('#riskStateDetailedView').$$('#detailedGraph').selectedDateRangeDropdown = this.selectedDateRangeDropdown;
                this.$$('#riskStateDetailedView').$$('#detailedVMFelistGraph').selectedDateRangeDropdown = this.selectedDateRangeDropdown;


                // Emulsion Graph
                if (chartId === "chart1") {
                    this.$$('#riskStateDetailedView').checkStatus(this.EmulsionState);
                    this.$$('#riskStateDetailedView').emulsionFromMoment = this.graphList[1].emulsionFromMoment;
                    this.$$('#riskStateDetailedView').emulsionToMoment = this.graphList[1].emulsionToMoment;
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.emulsiontestSettings, this.riskData, this.modelInfoData,
                      this.graphList[1].emulsionPlotlinesChecked, this.graphList[1].dynamicStyle, this.graphList[1].modelInfoEmulsionPlotlinesChecked, this.graphList[1].dynamicModelInfoStyle, window.vmFelistSettingsData, this.$$('#riskStateDetailedView').emulsionFromMoment, this.$$(
                        '#riskStateDetailedView').emulsionToMoment, window.spFelistSettingsData);
                    // Vapour Graph
                } else if (chartId === "chart2") {
                    this.$$('#riskStateDetailedView').checkStatus(this.BadVapourState);
                    this.$$('#riskStateDetailedView').vapourFromMoment = this.graphList[4].vapourFromMoment;
                    this.$$('#riskStateDetailedView').vapourToMoment = this.graphList[4].vapourToMoment;
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.vapourSettings, this.riskData, this.modelInfoData, this
                        .graphList[4].vapourPlotlinesChecked, this.graphList[4].dynamicStyle, this.graphList[4].modelInfoVapourPlotlinesChecked, this.graphList[4].dynamicModelInfoStyle, window.vmFelistSettingsData,
                      this.$$('#riskStateDetailedView').vapourFromMoment, this.$$('#riskStateDetailedView')
                        .vapourToMoment, window.spFelistSettingsData);
                    // Produced Gas Graph
                } else if (chartId === "chart3") {
                    this.$$('#riskStateDetailedView').checkStatus(this.ProducedGasState);
                    this.$$('#riskStateDetailedView').producedGasFromMoment = this.graphList[7].producedGasFromMoment
                    this.$$('#riskStateDetailedView').producedGasToMoment = this.graphList[7].producedGasToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.producedGasSettings, this.riskData, this.modelInfoData,
                      this.graphList[7].producedGasPlotlinesChecked, this.graphList[7].dynamicStyle, this.graphList[7].modelInfoProducedGasPlotlinesChecked, this.graphList[7].dynamicModelInfoStyle, window
                        .vmFelistSettingsData, this.$$('#riskStateDetailedView').producedGasFromMoment, this.$$(
                        '#riskStateDetailedView').producedGasToMoment, window.spFelistSettingsData);
                    // BSW Graph
                } else if (chartId === "chart4") {
                    this.$$('#riskStateDetailedView').checkStatus(this.BSWBottomWaterState);
                    this.$$('#riskStateDetailedView').bswFromMoment = this.graphList[8].bswFromMoment
                    this.$$('#riskStateDetailedView').bswToMoment = this.graphList[8].bswToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.BSWSettings, this.riskData, this.modelInfoData, this
                      .graphList[8].bswPlotlinesChecked, this.graphList[8].dynamicStyle, this.graphList[8].modelInfoBSWPlotlinesChecked, this.graphList[8].dynamicModelInfoStyle, window.vmFelistSettingsData, this
                      .$$('#riskStateDetailedView').bswFromMoment, this.$$('#riskStateDetailedView').bswToMoment, window
                      .spFelistSettingsData);
                    // BHT Graph
                } else if (chartId === "chart5") {
                    this.$$('#riskStateDetailedView').checkStatus(this.BHTState);
                    this.$$('#riskStateDetailedView').bhtFromMoment = this.graphList[6].bhtFromMoment
                    this.$$('#riskStateDetailedView').bhtToMoment = this.graphList[6].bhtToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.bhtSettings, this.riskData, this.modelInfoData, this
                      .graphList[6].bhtPlotlinesChecked, this.graphList[6].dynamicStyle, this.graphList[6].modelInfoBHTPlotlinesChecked, this.graphList[6].dynamicModelInfoStyle, window.vmFelistSettingsData, this
                      .$$('#riskStateDetailedView').bhtFromMoment, this.$$('#riskStateDetailedView').bhtToMoment, window
                      .spFelistSettingsData);
                    // Return Pressure Graph
                } else if (chartId === "chart6") {
                    this.$$('#riskStateDetailedView').checkStatus(this.ReturnPressureState);
                    this.$$('#riskStateDetailedView').returnPressureFromMoment = this.graphList[0].returnPressureFromMoment
                    this.$$('#riskStateDetailedView').returnPressureToMoment = this.graphList[0].returnPressureToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.returnPressureSettings, this
                        .riskData, this.modelInfoData, this.graphList[0].returnPressurePlotlinesChecked, this.graphList[0].dynamicStyle, this.graphList[0].modelInfoReturnPressurePlotlinesChecked, this.graphList[0].dynamicModelInfoStyle,
                      window.vmFelistSettingsData, this.$$('#riskStateDetailedView').returnPressureFromMoment, this.$$(
                        '#riskStateDetailedView').returnPressureToMoment, window.spFelistSettingsData);
                    // Sudden Pressure Graph
                } else if (chartId === "chart7") {
                    this.$$('#riskStateDetailedView').checkStatus(this.SuddenPressureChangeState);
                    this.$$('#riskStateDetailedView').suddenPressureFromMoment = this.graphList[5].suddenPressureFromMoment
                    this.$$('#riskStateDetailedView').suddenPressureToMoment = this.graphList[5].suddenPressureToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.suddenPressureSettings, this
                      .riskData, this.modelInfoData, this.graphList[5].suddenPressurePlotlinesChecked, this.graphList[5].dynamicStyle, this.graphList[5].modelInfoSuddenPressurePlotlinesChecked, this.graphList[5].dynamicModelInfoStyle, window
                      .vmFelistSettingsData, this.$$('#riskStateDetailedView').suddenPressureFromMoment, this.$$(
                      '#riskStateDetailedView').suddenPressureToMoment, window.spFelistSettingsData);
                    // SAGD Pressure Graph
                } else if (chartId === "chart8") {
                    this.$$('#riskStateDetailedView').checkStatus(this.SAGDPressureState);
                    this.$$('#riskStateDetailedView').sagdPressureFromMoment = this.graphList[2].sagdPressureFromMoment
                    this.$$('#riskStateDetailedView').sagdPressureToMoment = this.graphList[2].sagdPressureToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.sagdPressureSettings, this.riskData, this.modelInfoData,
                      this.graphList[2].sagdPressurePlotlinesChecked, this.graphList[2].dynamicStyle, this.graphList[2].modelInfoSAGDPressurePlotlinesChecked, this.graphList[2].dynamicModelInfoStyle, window
                        .vmFelistSettingsData, this.$$('#riskStateDetailedView').sagdPressureFromMoment, this.$$(
                        '#riskStateDetailedView').sagdPressureToMoment, window.spFelistSettingsData);
                    // Setpoints Graph
                } else if (chartId === "chart9") {
                    this.$$('#riskStateDetailedView').checkStatus(this.SetPointsState);
                    this.$$('#riskStateDetailedView').setpointsFromMoment = this.graphList[3].setpointsFromMoment
                    this.$$('#riskStateDetailedView').setpointsToMoment = this.graphList[3].setpointsToMoment
                    this.$$('#riskStateDetailedView')._getDetailedGraph(chartId, window.setpointsSettings, this.riskData, this.modelInfoData,
                      this.graphList[3].setPointsPlotlinesChecked, this.graphList[3].dynamicStyle, this.graphList[3].modelInfoSetPointsPlotlinesChecked, this.graphList[3].dynamicModelInfoStyle, window
                        .vmFelistSettingsData, this.$$('#riskStateDetailedView').setpointsFromMoment, this.$$(
                        '#riskStateDetailedView').setpointsFromMoment, window.spFelistSettingsData);
                }
            },
            //when we click back on the riskstates tab or when we close the close icon on drill down this function called and it navigates back to well view
            navigateToRiskStates: function() {
                this.checkShoworHide = "notmasked";
                this.heightExtension = "0px";
                this.tabName = 'riskStates';
                clearInterval(this.wellSetupAutorefresh);
            },
            //while clicking on the refresh icon on top this function is called for refreshing
            refreshRiskStates: function(wellId, view) {
                this.$$('#riskStateTable').getAlertHistory(this.wellId);
            },
            prepareGraphTitle: function(alertTitle) {
                if (this.loggedUser === "demo_user") {
                    var demographItem = {
                        "Risk 2": 'chart2',
                        "Risk 3": 'chart3',
                        "Risk 4": 'chart4',
                        "Risk 5": 'chart5',
                        "Risk 6": 'chart6',
                        "Risk 7": 'chart7',
                        "Risk 8": 'chart8',
                        "Pump Status": "chart9"
                    };
                    var conf = demographItem[alertTitle];
                } else {
                    var alertnameList = {
                        "Vapour": "chart2",
                        "Produced Gas": "chart3",
                        "BSW & Bottom Water": "chart4",
                        "BHT": "chart5",
                        "Return Pressure": "chart6",
                        "Sudden Pressure": "chart7",
                        "SAGD Pressure": "chart8",
                        "Pump Status": "chart9"
                    };
                    var conf = alertnameList[alertTitle];
                }
                this.navigateToDetailed(conf);
            },
            //switchs the well setpoints with alert disposal view and does the required api calls for showing the alert disposal data
            showAlertDetails: function() {
                this.loaderFlag = false;
                if (this.newStatus === "Acknowledged" || this.newStatus === "acknowledge") {
                    this.acknowledgedStatus = "acknowledge";
                } else {
                    this.acknowledgedStatus = this.newStatus;
                }
                this.riskAlerts = this.$$('#riskStateTable').alertData;
                // When alert status is Nominal, show alert management screen
                if (this.$$('#alertsDisposalview') !== null && (this.newStatus === "nominal" || this.newStatus ===
                  "Nominal")) {
                    this.alertTitle = this.newAlertTitle.replace("_", " ");
                    this.$$('#alertsDisposalview').alertInfo = undefined;
                    this.$$('#alertsDisposalview').getAlertInfo();
                    this.$$('#alertsDisposalview').getThresholdChangeScreen = true;
                    this.$$('#alertsDisposalview').getManualClearingScreen = false;
                    this.$$('#alertsDisposalview').getSetpointsChangeScreen = false;
                    this.$$('#alertsDisposalview').getDefaultScreen = false;
                    this.$$('#alertsDisposalview').showPumpStatusManualClearing = false;
                    this.$$('#alertsDisposalview').selectedAction = "Alert Management";
                    this.$$('#alertsDisposalview').disabledOrNot = true;
                    this.$$('#alertsDisposalview').alarmStatus = "nominalStatus"
                    this.$$('#alertsDisposalview').curentColor = "nominalStatusCurrent"
                    this.$$('#alertsDisposalview').getTheThreshold();
                    // Disable alert dropdown list when alert management screen is enabled
                    this.$$('#alertsDisposalview').alertdropdownClass = 'alertdropdownClass';

                } else if (this.$$('#alertsDisposalview') !== null && (this.newStatus !== "nominal" || this.newStatus !==
                  "Nominal")) {
                    this.alertTitle = this.newAlertTitle.replace("_", " ");
                    if (this.alertTitle === "Pump Status") {
                        this.$$('#alertsDisposalview').alertInfo = undefined;
                        this.$$('#alertsDisposalview').description =
                          "Selecting Wait will wait and monitor if the alert becomes Nominal.  Selecting Ignore will remove the alert condition.";
                        this.$$('#alertsDisposalview').getAlertInfo();
                        this.$$('#alertsDisposalview').disabledOrNot = false;
                        this.$$('#alertsDisposalview').showPumpStatusManualClearing = true;
                        if (this.newStatus === "acknowledge" || this.newStatus === "Action Taken") {
                            this.$$('#alertsDisposalview').alarmStatus = "acknowledgeStatus";
                            this.$$('#alertsDisposalview').curentColor = "acknowledgeStatusCurrent";
                        } else {
                            this.$$('#alertsDisposalview').curentColor = "riskStatusCurrent";
                            this.$$('#alertsDisposalview').alarmStatus = "riskStatus";
                        }
                        this.$$('#alertsDisposalview').getThresholdChangeScreen = false;
                        this.$$('#alertsDisposalview').getManualClearingScreen = false;
                        this.$$('#alertsDisposalview').getSetpointsChangeScreen = false;
                        this.$$('#alertsDisposalview').getDefaultScreen = true;
                        this.$$('#alertsDisposalview').selectedAction = "Action";
                    } else {
                        this.$$('#alertsDisposalview').alertInfo = undefined;
                        this.$$('#alertsDisposalview').getAlertInfo();
                        this.$$('#alertsDisposalview').disabledOrNot = false;
                        if (this.newStatus === "Acknowledged" || this.newStatus === "Action Taken" || this.newStatus ===
                          "acknowledge") {
                            this.$$('#alertsDisposalview').alarmStatus = "acknowledgeStatus";
                            this.$$('#alertsDisposalview').curentColor = "acknowledgeStatusCurrent";
                        } else {
                            this.$$('#alertsDisposalview').curentColor = "riskStatusCurrent";
                            this.$$('#alertsDisposalview').alarmStatus = "riskStatus";
                        }
                        this.$$('#alertsDisposalview').getThresholdChangeScreen = false;
                        this.$$('#alertsDisposalview').getManualClearingScreen = false;
                        this.$$('#alertsDisposalview').getSetpointsChangeScreen = false;
                        this.$$('#alertsDisposalview').getDefaultScreen = true;
                        this.$$('#alertsDisposalview').showPumpStatusManualClearing = false;
                        this.$$('#alertsDisposalview').selectedAction = "Action";
                    }
                }
                if (this.newStatus === "nominal") {
                    this.alertstatus = "true";
                } else {
                    this.alertstatus = "false";
                }
                this.alertTitle = this.newAlertTitle.replace("_", " ");
                this.showOrHideSetpoints = false;
                var currentToMoment = moment();
                var currentFromMoment = moment().subtract(7, 'day');
                this.getAlertData(this.wellId, currentFromMoment._d, currentToMoment._d, "attached");
                this.updatePlotlines();
                this.prepareGraphTitle(this.alertTitle);

            },
            //if the selection on the confirmation popupof alert disposal is no then this function closes the popup box and stays on alert disposal
            dontShowNewAlertDetails: function() {
                this.$$("#showConfirmBox").close();
            },
            //when we click on the risk state status button it navigates to the alert disposal and opens the drill down graph
            navigateToAlertDisposal: function(title, status) {
                this.$$('#riskStateDetailedView').title = title;
                this.$$('#riskStateDetailedView').checkStatus(status);
                this.setPointComponent = 'alert' + "#" + new Date().getTime();
                if (this.domHost.loggedUser === "demo_user") {
                    var demographItem = {
                        "Emulsion": 'Emulsion',
                        "Risk 2": 'Vapour',
                        "Risk 3": 'Produced Gas',
                        "Risk 4": 'BSW',
                        "Risk 5": 'BHT',
                        "Risk 6": 'Return Pressure',
                        "Risk 7": 'Sudden Pressure',
                        "Risk 8": 'SAGD Pressure',
                        "Risk 9": "Setpoints"
                    };
                    this.newAlertTitle = demographItem[title];
                } else {
                    this.newAlertTitle = title;
                }
                this.newStatus = status;
                if (!this.showOrHideSetpoints && this.$$("#alertsDisposalview").valuesChanged) {
                    this.$$("#showConfirmBox").open();
                    this.$$("#alertsDisposalview").valuesChanged = false;
                } else {
                    this.showAlertDetails();
                    if (this.$$('#alertsDisposalview') !== null) {
                        this.$$("#alertsDisposalview").disableSend = "masked";
                    }
                    if (this.domHost.loggedUser === "demo_user") {
                        var demographItem = {
                            "Emulsion": 'Emulsion',
                            "Risk 2": 'Vapour',
                            "Risk 3": 'Produced Gas',
                            "Risk 4": 'BSW',
                            "Risk 5": 'BHT',
                            "Risk 6": 'Return Pressure',
                            "Risk 7": 'Sudden Pressure',
                            "Risk 8": 'SAGD Pressure',
                            "Risk 9": "Setpoints"
                        };
                        this.newAlertTitle = demographItem[title];
                    } else {
                        this.newAlertTitle = title;
                    }
                    this.newStatus = status;
                    this.showmyAlerts = false;
                    this.hidemyAlerts = true;
                }
                if (this.$$("#alertsDisposalview")) {
                    this.domHost.miniViewWellId = this.wellId + "#" + 'alert';
                    this.$$("#wellSetpointsView").$$("#miniwellSetpointsViewMain").clearIntervalFn('alert');
                    this.$$("#alertsDisposalview").applyAlertDisposalDropdownRule();
                }
            },
            //if the selection on the confirmation popupof alert disposal is yes then this function closes the popup box and switches back to setpoints
            navigateToSetpoints: function() {
                this.showOrHideSetpoints = true;
            },
            //on clicking of the well setup tab this function is called and the view changes to well setup
            navigateToWellSetup: function() {
                this.wellTableData = null;
                this.injParameterInfo = null;
                this.prodParameterInfo = null;
                this.AlertData = null;
                this.artificialTable = null;
                this.wellTestTable = null;
                this.operatorTable = null;

                this.heightExtension = "1520px";
                this.tabName = 'wellSetup';
                this.enableWellSetUp = true
                this._refreshme(this.wellId, this.accessToken);
            },

            //fits the well setup to window size
            scrollToWellsetup: function() {
                var wellSetupView = document.getElementById("wellSetup");
                wellSetupView.scrollIntoView();
            },
            //observer for the aggregation dropdown
            aggregationSelectedDropdown: function() {
                var key = this.selectedAggregationDropdown;
                var mapItem = {
                    0: '10mi',
                    1: '30mi',
                    2: '1h',
                    3: '3h',
                    4: '6h',
                    5: '12h',
                    6: '1d',
                    7: 'null'
                };
                var conf = mapItem[key];
                this.showOrHideLoader(true);
                if (conf !== undefined) {
                    setTimeout(() => {
                        this.currentAggregation = conf;
                        this.requestGraphData(this.wellId, this.fromMoment, this.toMoment, "aggregation", conf);
                    }, 50);

                }
            },
            getModifiedDate: function(date) {
                var a = moment.utc(date).format();
                var tempFromdate = new Date(a).toLocaleString('en-GB', {
                    timeZone: 'Canada/Mountain'
                });
                var temp = (tempFromdate.toString()).split(",");
                var tempdate = temp[0].split("/");
                var modifiedFromDate = tempdate[2] + "-" + tempdate[1] + "-" + tempdate[0] + "T" + temp[1].trim();
                return modifiedFromDate;
            },
            updateChildGraphRange: function(key) {
                for (var i = 1; i < this.graphList.length + 1; i++) {
                    this.$$('#graph' + i).$$('#datepickerDropdown').selected = key;
                }
            },
            selectedDateRangeDropdownForIndividualGraph: function(event) {
                if (event.target.key) {
                    var key = this.selectedDateRangeDropdown;
                    if (this.$$('#graph1')) {
                        //this.updateChildGraphRange(key);
                    }
                    if (key != undefined) {
                        var newFromDate = new Date();
                        var newToDate = new Date();
                        var millisecondsPerMinute = 60000;
                        var minutes = 0;
                        var peroid = "";
                        if (key == 0) {
                            peroid = "oneHour";
                            minutes = 60;
                        } else if (key == 1) {
                            peroid = "lastFourteenDays";
                            minutes = 14 * 60 * 24;
                        } else if (key == 2) {
                            peroid = "oneDay";
                            minutes = 60 * 24;
                        } else if (key == 3) {
                            peroid = "lastThreeDays";
                            minutes = 3 * 60 * 24;
                        } else if (key == 4) {
                            peroid = "lastOneWeek";
                            minutes = 60 * 24 * 7;
                        } else if (key == 5) {
                            peroid = "lastMonth";
                            minutes = 60 * 24 * 30;
                        } else if (key == 6) {
                            peroid = "lastThreeMonths";
                            minutes = 3 * 60 * 24 * 30;
                        } else if (key == 7) {
                            peroid = "lastYear";
                            minutes = 60 * 24 * 365;
                        }
                        newFromDate = new Date(newToDate - (minutes * millisecondsPerMinute));

                        this.modifiedFromDate = this.getModifiedDate(newFromDate);
                        this.modifiedToDate = this.getModifiedDate(newToDate);
                        this.fromMoment = moment().subtract(minutes * 60, 'seconds');
                        this.toMoment = moment();
                        this.graphList[1].emulsionFromMoment = undefined;
                        this.graphList[1].emulsionToMoment = undefined;
                        this.graphList[4].vapourFromMoment = undefined;
                        this.graphList[4].vapourToMoment = undefined;
                        this.graphList[7].producedGasFromMoment = undefined
                        this.graphList[7].producedGasToMoment = undefined
                        this.graphList[8].bswFromMoment = undefined
                        this.graphList[8].bswToMoment = undefined
                        this.graphList[6].bhtFromMoment = undefined
                        this.graphList[6].bhtToMoment = undefined
                        this.graphList[0].returnPressureFromMoment = undefined
                        this.graphList[0].returnPressureToMoment = undefined
                        this.graphList[5].suddenPressureFromMoment = undefined
                        this.graphList[5].suddenPressureToMoment = undefined
                        this.graphList[2].sagdPressureFromMoment = undefined
                        this.graphList[2].sagdPressureToMoment = undefined
                        this.graphList[3].setpointsFromMoment = undefined
                        this.graphList[3].setpointsToMoment = undefined
                        this.showOrHideLoader(true);
                        setTimeout(() => {
                            // this.getAlertData(this.wellId, this.modifiedFromDate, this.modifiedToDate, "dateRange", "dateRange");
                            // this.requestGraphData(peroid, this.fromMoment, this.toMoment, "dateRange", this
                            //     .currentAggregation);
                        }, 500);
                        for (var i = 0; i < this.graphList.length; i++) {
                            this.graphList[i].$.chart.getAlertMarker(this.riskData);
                            this.graphList[i].$.chart.getModelInfoMarker(this.modelInfoData);
                        }

                        if (this.chartid === "chart1") {
                            if (this.plotlinesCheck(this.graphList[1].$.chart.emulsionPlotlines)) {
                                this.graphList[1].dynamicStyle = "custom-icon";
                                this.graphList[1].emulsionPlotlinesChecked = true;
                            } else {
                                this.graphList[1].dynamicStyle = "custom-icon-nofill";
                                this.graphList[1].emulsionPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[1].$.chart.modelInfoEmulsionPlotlines)) {
                                this.graphList[1].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[1].modelInfoEmulsionPlotlinesChecked = true;
                            } else {
                                this.graphList[1].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[1].modelInfoEmulsionPlotlinesChecked = false;
                            }
                            this.emulsionFromMoment = newFromDate;
                            this.emulsionToMoment = newToDate
                        }
                        if (this.chartid === "chart2") {
                            if (this.plotlinesCheck(this.graphList[4].$.chart.vapourPlotlines)) {
                                this.graphList[4].dynamicStyle = "custom-icon";
                                this.graphList[4].vapourPlotlinesChecked = true;
                            } else {
                                this.graphList[4].dynamicStyle = "custom-icon-nofill";
                                this.graphList[4].vapourPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[4].$.chart.modelInfoVapourPlotlines)) {
                                this.graphList[4].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[4].modelInfoVapourPlotlinesChecked = true;
                            } else {
                                this.graphList[4].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[4].modelInfoVapourPlotlinesChecked = false;
                            }
                            this.vapourFromMoment = newFromDate
                            this.vapourToMoment = newToDate
                        }
                        if (this.chartid === "chart3") {
                            if (this.plotlinesCheck(this.graphList[7].$.chart.producedGasPlotlines)) {
                                this.graphList[7].dynamicStyle = "custom-icon";
                                this.graphList[7].producedGasPlotlinesChecked = true;
                            } else {
                                this.graphList[7].dynamicStyle = "custom-icon-nofill";
                                this.graphList[7].producedGasPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[7].$.chart.modelInfoProducedGasPlotlines)) {
                                this.graphList[7].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[7].modelInfoProducedGasPlotlinesChecked = true;
                            } else {
                                this.graphList[7].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[7].modelInfoProducedGasPlotlinesChecked = false;
                            }
                            this.producedGasFromMoment = newFromDate
                            this.producedGasToMoment = newToDate
                        }
                        if (this.chartid === "chart4") {
                            if (this.plotlinesCheck(this.graphList[8].$.chart.bswPlotlines)) {
                                this.graphList[8].dynamicStyle = "custom-icon";
                                this.graphList[8].bswPlotlinesChecked = true;
                            } else {
                                this.graphList[8].dynamicStyle = "custom-icon-nofill";
                                this.graphList[8].bswPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[8].$.chart.modelInfoBSWPlotlines)) {
                                this.graphList[8].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[8].modelInfoBSWPlotlinesChecked = true;
                            } else {
                                this.graphList[8].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[8].modelInfoBSWPlotlinesChecked = false;
                            }
                            this.bswFromMoment = newFromDate
                            this.bswToMoment = newToDate
                        }
                        if (this.chartid === "chart5") {
                            if (this.plotlinesCheck(this.graphList[6].$.chart.bhtPlotlines)) {
                                this.graphList[6].dynamicStyle = "custom-icon";
                                this.graphList[6].bhtPlotlinesChecked = true;
                            } else {
                                this.graphList[6].dynamicStyle = "custom-icon-nofill";
                                this.graphList[6].bhtPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[6].$.chart.modelInfoBHTPlotlines)) {
                                this.graphList[6].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[6].modelInfoBHTPlotlinesChecked = true;
                            } else {
                                this.graphList[6].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[6].modelInfoBHTPlotlinesChecked = false;
                            }
                            this.bhtFromMoment = newFromDate
                            this.bhtToMoment = newToDate
                        }
                        if (this.chartid === "chart6") {
                            if (this.plotlinesCheck(this.graphList[0].$.chart.returnPressurePlotlines)) {
                                this.graphList[0].dynamicStyle = "custom-icon";
                                this.graphList[0].returnPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[0].dynamicStyle = "custom-icon-nofill";
                                this.graphList[0].returnPressurePlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[0].$.chart.modelInfoReturnPressurePlotlines)) {
                                this.graphList[0].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[0].modelInfoReturnPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[0].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[0].modelInfoReturnPressurePlotlinesChecked = false;
                            }
                            this.returnPressureFromMoment = newFromDate
                            this.returnPressureToMoment = newToDate
                        }
                        if (this.chartid === "chart7") {

                            if (this.plotlinesCheck(this.graphList[5].$.chart.suddenPressurePlotlines)) {
                                this.graphList[5].dynamicStyle = "custom-icon";
                                this.graphList[5].suddenPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[5].dynamicStyle = "custom-icon-nofill";
                                this.graphList[5].suddenPressurePlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[5].$.chart.modelInfoSuddenPressurePlotlines)) {
                                this.graphList[5].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[5].modelInfoSuddenPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[5].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[5].modelInfoSuddenPressurePlotlinesChecked = false;

                            }

                            this.suddenPressureFromMoment = newFromDate
                            this.suddenPressureToMoment = newToDate
                        }
                        if (this.chartid === "chart8") {

                            if (this.plotlinesCheck(this.graphList[2].$.chart.sagdPressurePlotlines)) {
                                this.graphList[2].dynamicStyle = "custom-icon";
                                this.graphList[2].sagdPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[2].dynamicStyle = "custom-icon-nofill";
                                this.graphList[2].sagdPressurePlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[2].$.chart.modelInfoSAGDPressurePlotlines)) {
                                this.graphList[2].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[2].modelInfoSAGDPressurePlotlinesChecked = true;
                            } else {
                                this.graphList[2].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[2].modelInfoSAGDPressurePlotlinesChecked = false;
                            }
                            this.sagdPressureFromMoment = newFromDate
                            this.sagdPressureToMoment = newToDate
                        }
                        if (this.chartid === "chart9") {
                            if (this.plotlinesCheck(this.graphList[3].$.chart.setPointsPlotlines)) {
                                this.graphList[3].dynamicStyle = "custom-icon";
                                this.graphList[3].setPointsPlotlinesChecked = true;
                            } else {
                                this.graphList[3].dynamicStyle = "custom-icon-nofill";
                                this.graphList[3].setPointsPlotlinesChecked = false;
                            }

                            if (this.plotlinesCheck(this.graphList[3].$.chart.modelInfoSetPointsPlotlines)) {
                                this.graphList[3].dynamicModelInfoStyle = "custom-icon-modelinfo";
                                this.graphList[3].modelInfoSetPointsPlotlinesChecked = true;
                            } else {
                                this.graphList[3].dynamicModelInfoStyle = "custom-icon-nofill";
                                this.graphList[3].modelInfoSetPointsPlotlinesChecked = false;
                            }
                            this.setpointsFromMoment = newFromDate
                            this.setpointsToMoment = newToDate
                        }


                        this.currentTimestamp = new Date().getTime();
                        var timeDifference = this.currentTimestamp - this.dateMax;
                        if (timeDifference > 3600000) {
                            this.interval = 0; // no
                            clearInterval(this.wellSetupAutorefresh);
                            clearInterval(this.autoRefresh);
                            clearInterval(this.autoRefreshMyAlerts);
                            this.myAlertsRefreshTimeInterval = 0;
                            this.graphRefreshTimeInterval = 0;
                        }



                    }

                }

            },

            //observer function for the daterange dropdown .
            dateRangeSelectedFromDropdown: function() {
                var key = this.selectedDateRangeDropdown;
                if (this.$$('#graph1')) {
                    this.updateChildGraphRange(key);
                }
                if (key != undefined) {
                    var newFromDate = new Date();
                    var newToDate = new Date();
                    var millisecondsPerMinute = 60000;
                    var minutes = 0;
                    var peroid = "";
                    if (key == 0) {
                        peroid = "oneHour";
                        minutes = 60;
                    } else if (key == 1) {
                        peroid = "lastFourteenDays";
                        minutes = 14 * 60 * 24;
                    } else if (key == 2) {
                        peroid = "oneDay";
                        minutes = 60 * 24;
                    } else if (key == 3) {
                        peroid = "lastThreeDays";
                        minutes = 3 * 60 * 24;
                    } else if (key == 4) {
                        peroid = "lastOneWeek";
                        minutes = 60 * 24 * 7;
                    } else if (key == 5) {
                        peroid = "lastMonth";
                        minutes = 60 * 24 * 30;
                    } else if (key == 6) {
                        peroid = "lastThreeMonths";
                        minutes = 3 * 60 * 24 * 30;
                    } else if (key == 7) {
                        peroid = "lastYear";
                        minutes = 60 * 24 * 365;
                    }
                    newFromDate = new Date(newToDate - (minutes * millisecondsPerMinute));

                    this.modifiedFromDate = this.getModifiedDate(newFromDate);
                    this.modifiedToDate = this.getModifiedDate(newToDate);
                    this.fromMoment = moment().subtract(minutes * 60, 'seconds');
                    this.toMoment = moment();
                    this.graphList[1].emulsionFromMoment = undefined;
                    this.graphList[1].emulsionToMoment = undefined;
                    this.graphList[4].vapourFromMoment = undefined;
                    this.graphList[4].vapourToMoment = undefined;
                    this.graphList[7].producedGasFromMoment = undefined
                    this.graphList[7].producedGasToMoment = undefined
                    this.graphList[8].bswFromMoment = undefined
                    this.graphList[8].bswToMoment = undefined
                    this.graphList[6].bhtFromMoment = undefined
                    this.graphList[6].bhtToMoment = undefined
                    this.graphList[0].returnPressureFromMoment = undefined
                    this.graphList[0].returnPressureToMoment = undefined
                    this.graphList[5].suddenPressureFromMoment = undefined
                    this.graphList[5].suddenPressureToMoment = undefined
                    this.graphList[2].sagdPressureFromMoment = undefined
                    this.graphList[2].sagdPressureToMoment = undefined
                    this.graphList[3].setpointsFromMoment = undefined
                    this.graphList[3].setpointsToMoment = undefined
                    this.showOrHideLoader(true);
                    setTimeout(() => {
                        this.getAlertData(this.wellId, this.modifiedFromDate, this.modifiedToDate, "dateRange", "dateRange");
                        this.requestGraphData(peroid, this.fromMoment, this.toMoment, "dateRange", this
                          .currentAggregation);
                    }, 500);
                    for (var i = 0; i < this.graphList.length; i++) {
                        this.graphList[i].$.chart.getAlertMarker(this.riskData);
                        this.graphList[i].$.chart.getModelInfoMarker(this.modelInfoData);
                    }

                    if (this.chartid === "chart1") {
                        if (this.plotlinesCheck(this.graphList[1].$.chart.emulsionPlotlines)) {
                            this.graphList[1].dynamicStyle = "custom-icon";
                            this.graphList[1].emulsionPlotlinesChecked = true;
                        } else {
                            this.graphList[1].dynamicStyle = "custom-icon-nofill";
                            this.graphList[1].emulsionPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[1].$.chart.modelInfoEmulsionPlotlines)) {
                            this.graphList[1].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[1].modelInfoEmulsionPlotlinesChecked = true;
                        } else {
                            this.graphList[1].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[1].modelInfoEmulsionPlotlinesChecked = false;
                        }
                        this.emulsionFromMoment = newFromDate;
                        this.emulsionToMoment = newToDate
                    }
                    if (this.chartid === "chart2") {
                        if (this.plotlinesCheck(this.graphList[4].$.chart.vapourPlotlines)) {
                            this.graphList[4].dynamicStyle = "custom-icon";
                            this.graphList[4].vapourPlotlinesChecked = true;
                        } else {
                            this.graphList[4].dynamicStyle = "custom-icon-nofill";
                            this.graphList[4].vapourPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[4].$.chart.modelInfoVapourPlotlines)) {
                            this.graphList[4].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[4].modelInfoVapourPlotlinesChecked = true;
                        } else {
                            this.graphList[4].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[4].modelInfoVapourPlotlinesChecked = false;
                        }
                        this.vapourFromMoment = newFromDate
                        this.vapourToMoment = newToDate
                    }
                    if (this.chartid === "chart3") {
                        if (this.plotlinesCheck(this.graphList[7].$.chart.producedGasPlotlines)) {
                            this.graphList[7].dynamicStyle = "custom-icon";
                            this.graphList[7].producedGasPlotlinesChecked = true;
                        } else {
                            this.graphList[7].dynamicStyle = "custom-icon-nofill";
                            this.graphList[7].producedGasPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[7].$.chart.modelInfoProducedGasPlotlines)) {
                            this.graphList[7].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[7].modelInfoProducedGasPlotlinesChecked = true;
                        } else {
                            this.graphList[7].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[7].modelInfoProducedGasPlotlinesChecked = false;
                        }
                        this.producedGasFromMoment = newFromDate
                        this.producedGasToMoment = newToDate
                    }
                    if (this.chartid === "chart4") {
                        if (this.plotlinesCheck(this.graphList[8].$.chart.bswPlotlines)) {
                            this.graphList[8].dynamicStyle = "custom-icon";
                            this.graphList[8].bswPlotlinesChecked = true;
                        } else {
                            this.graphList[8].dynamicStyle = "custom-icon-nofill";
                            this.graphList[8].bswPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[8].$.chart.modelInfoBSWPlotlines)) {
                            this.graphList[8].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[8].modelInfoBSWPlotlinesChecked = true;
                        } else {
                            this.graphList[8].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[8].modelInfoBSWPlotlinesChecked = false;
                        }
                        this.bswFromMoment = newFromDate
                        this.bswToMoment = newToDate
                    }
                    if (this.chartid === "chart5") {
                        if (this.plotlinesCheck(this.graphList[6].$.chart.bhtPlotlines)) {
                            this.graphList[6].dynamicStyle = "custom-icon";
                            this.graphList[6].bhtPlotlinesChecked = true;
                        } else {
                            this.graphList[6].dynamicStyle = "custom-icon-nofill";
                            this.graphList[6].bhtPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[6].$.chart.modelInfoBHTPlotlines)) {
                            this.graphList[6].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[6].modelInfoBHTPlotlinesChecked = true;
                        } else {
                            this.graphList[6].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[6].modelInfoBHTPlotlinesChecked = false;
                        }
                        this.bhtFromMoment = newFromDate
                        this.bhtToMoment = newToDate
                    }
                    if (this.chartid === "chart6") {
                        if (this.plotlinesCheck(this.graphList[0].$.chart.returnPressurePlotlines)) {
                            this.graphList[0].dynamicStyle = "custom-icon";
                            this.graphList[0].returnPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[0].dynamicStyle = "custom-icon-nofill";
                            this.graphList[0].returnPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[0].$.chart.modelInfoReturnPressurePlotlines)) {
                            this.graphList[0].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[0].modelInfoReturnPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[0].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[0].modelInfoReturnPressurePlotlinesChecked = false;
                        }
                        this.returnPressureFromMoment = newFromDate
                        this.returnPressureToMoment = newToDate
                    }
                    if (this.chartid === "chart7") {

                        if (this.plotlinesCheck(this.graphList[5].$.chart.suddenPressurePlotlines)) {
                            this.graphList[5].dynamicStyle = "custom-icon";
                            this.graphList[5].suddenPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[5].dynamicStyle = "custom-icon-nofill";
                            this.graphList[5].suddenPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[5].$.chart.modelInfoSuddenPressurePlotlines)) {
                            this.graphList[5].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[5].modelInfoSuddenPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[5].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[5].modelInfoSuddenPressurePlotlinesChecked = false;

                        }

                        this.suddenPressureFromMoment = newFromDate
                        this.suddenPressureToMoment = newToDate
                    }
                    if (this.chartid === "chart8") {

                        if (this.plotlinesCheck(this.graphList[2].$.chart.sagdPressurePlotlines)) {
                            this.graphList[2].dynamicStyle = "custom-icon";
                            this.graphList[2].sagdPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[2].dynamicStyle = "custom-icon-nofill";
                            this.graphList[2].sagdPressurePlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[2].$.chart.modelInfoSAGDPressurePlotlines)) {
                            this.graphList[2].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[2].modelInfoSAGDPressurePlotlinesChecked = true;
                        } else {
                            this.graphList[2].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[2].modelInfoSAGDPressurePlotlinesChecked = false;
                        }
                        this.sagdPressureFromMoment = newFromDate
                        this.sagdPressureToMoment = newToDate
                    }
                    if (this.chartid === "chart9") {
                        if (this.plotlinesCheck(this.graphList[3].$.chart.setPointsPlotlines)) {
                            this.graphList[3].dynamicStyle = "custom-icon";
                            this.graphList[3].setPointsPlotlinesChecked = true;
                        } else {
                            this.graphList[3].dynamicStyle = "custom-icon-nofill";
                            this.graphList[3].setPointsPlotlinesChecked = false;
                        }

                        if (this.plotlinesCheck(this.graphList[3].$.chart.modelInfoSetPointsPlotlines)) {
                            this.graphList[3].dynamicModelInfoStyle = "custom-icon-modelinfo";
                            this.graphList[3].modelInfoSetPointsPlotlinesChecked = true;
                        } else {
                            this.graphList[3].dynamicModelInfoStyle = "custom-icon-nofill";
                            this.graphList[3].modelInfoSetPointsPlotlinesChecked = false;
                        }
                        this.setpointsFromMoment = newFromDate
                        this.setpointsToMoment = newToDate
                    }


                    this.currentTimestamp = new Date().getTime();
                    var timeDifference = this.currentTimestamp - this.dateMax;
                    if (timeDifference > 3600000) {
                        this.interval = 0; // no
                        clearInterval(this.wellSetupAutorefresh);
                        clearInterval(this.autoRefresh);
                        clearInterval(this.autoRefreshMyAlerts);
                        this.myAlertsRefreshTimeInterval = 0;
                        this.graphRefreshTimeInterval = 0;
                    }



                }
            },
            handleResponse: function(readyState, status, message, type) {
                this.alertVisible = false;
                //logout when token expired
                if (readyState == 4 && status == 401) {
                    window.location.href = "/reroute"
                }
                if (readyState == 4 && status >= 400) {
                    var messageTitle = "Data Loading Failed";
                    var mesageType = "Can't Load ";
                    if (type == "set") {
                        mesageType = "Can't Save Data ";
                        messageTitle = "Data Saving Failed";
                    }
                    this.alertVisible = true;
                    this.messageTitle = messageTitle;
                    this.messageContent = mesageType + message;

                }
            },
            prepareGraphsettings: function(data) {
                var list = [];
                var notags = false;
                for (var a = 0; a < data.length; a++) {
                    var temp = {};
                    temp.color = data[a]["color"];
                    temp.selected = data[a]["selected_tag_yaxis"];
                    if (data[a]["alias"].length > 10) {
                        temp.value = data[a]["alias"];
                    } else {
                        temp.value = data[a]["alias"]
                    }
                    temp.description = data[a]["attribute"];
                    temp.minimum = data[a]["tag_min"];
                    temp.maximum = data[a]["tag_max"];
                    temp.tagname = data[a]["alias"].replace(/ /g, "");
                    temp.line_width = data[a]["line_width"];
                    temp.style = data[a]["style"];
                    if (data[a]["current"] != null) {
                        temp.current = data[a]["current"];
                    } else {
                        temp.current = 0;
                    }
                    list.push(temp);
                }
                return list;
            },
            enableSynchronizedCharts: function(attachedDom) {
                window.aaa = this;
                //window.enableSynchronizedCharts();
            },
            //get the graph preferences for a user and well.
            graphsettings: function(wellName, calltype) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "Graph Settings", "get");
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        this.loadingDataMode = '';
                        var responseMessage = {}
                        responseMessage = JSON.parse(xhttp.response);
                        var bht = responseMessage.BHT;
                        var bsw = responseMessage.BSW;
                        var emulsion = responseMessage.Emulsion;
                        var producedGas = responseMessage.Produced_Gas;
                        var returnPressure = responseMessage.Return_Pressure;
                        var sagdPressure = responseMessage.SAGD_Pressure;
                        var setPoints = responseMessage.Setpoints;
                        var suddenPressure = responseMessage.Sudden_Pressure;
                        var vapour = responseMessage.Vapour;
                        var vmFeList = responseMessage.VM_Felist;
                        var spFeList = responseMessage.SP_Felist;

                        if (calltype != 'drilldowngraph') {
                            try {
                                window.returnPressureSettings = this.prepareGraphsettings(returnPressure);
                                this.graphList[0].timeseriesSettings = returnPressureSettings;

                                window.emulsiontestSettings = this.prepareGraphsettings(emulsion);
                                this.graphList[1].timeseriesSettings = emulsiontestSettings;

                                window.sagdPressureSettings = this.prepareGraphsettings(sagdPressure);
                                this.graphList[2].timeseriesSettings = sagdPressureSettings;

                                window.setpointsSettings = this.prepareGraphsettings(setPoints);
                                this.graphList[3].timeseriesSettings = setpointsSettings;

                                window.vapourSettings = this.prepareGraphsettings(vapour);
                                this.graphList[4].timeseriesSettings = vapourSettings;

                                window.suddenPressureSettings = this.prepareGraphsettings(suddenPressure);
                                this.graphList[5].timeseriesSettings = suddenPressureSettings;

                                window.bhtSettings = this.prepareGraphsettings(bht);
                                this.graphList[6].timeseriesSettings = bhtSettings;

                                window.producedGasSettings = this.prepareGraphsettings(producedGas);
                                this.graphList[7].timeseriesSettings = producedGasSettings;

                                window.BSWSettings = this.prepareGraphsettings(bsw);
                                this.graphList[8].timeseriesSettings = BSWSettings;
                                this.setGraphDataOnFetch(calltype);
                                this.syncGraphs(this.dateMin, this.dateMax);
                            } catch (error) {
                                console.log(error);
                            }

                        }
                        this.hideLoadingForDetailedGraph();
                        setTimeout(() => {
                            this.enableSynchronizedCharts();
                        }, 100);

                        window.vmFelistSettingsData = this.prepareGraphsettings(vmFeList);

                        window.spFelistSettingsData = this.prepareGraphsettings(spFeList);
                        if (calltype != 'drilldowngraph' && this.newAlertTitle) {
                            //this.prepareGraphTitle(this.newAlertTitle.replace("_", " "));
                        }
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/user_preferences";
                var params = "user_id=" + this.loggedUser + "&well_id=" + wellName;
                xhttp.open("GET", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.parent.accessToken);
                try {
                    xhttp.send();
                } catch (error) {
                    console.log(error);
                    this.loadingDataMode = '';
                }

            },
            prepareGraphData: function(graphDetail) {
                var graphData = [];
                for (var h = 0; h < graphDetail.length; h++) {
                    var temp = {};
                    temp.id = graphDetail[h]["name"];
                    temp.name = graphDetail[h]["name"];
                    temp.yAxis = h,
                      temp.data = graphDetail[h]["data"];
                    temp.dashStyle = graphDetail[h]["style"];
                    temp.lineWidth = graphDetail[h]["line_width"];
                    if (graphDetail[h]["date_min"] != undefined && graphDetail[h]["date_max"] != undefined) {
                        this.dateMax = graphDetail[h]["date_max"];
                        this.dateMin = graphDetail[h]["date_min"];
                    }
                    graphData.push(temp);
                }
                //console.log(graphData);
                return graphData;
            },
            showOrHideLoader: function(showOrHide) {
                if (this.graphList) {
                    for (var i = 0; i < this.graphList.length; i++) {
                        if (showOrHide) {
                            this.graphList[i].$.chart.chart.showLoading();
                        } else {
                            this.graphList[i].$.chart.chart.hideLoading();
                        }
                    }
                }
            },
            setGraphDataOnFetch: function(newData) {
                var bht = newData.BHT;
                var bsw = newData.BSW;
                var emulsion = newData.Emulsion;
                var producedGas = newData.Produced_Gas;
                var returnPressure = newData.Return_Pressure;
                var sagdPressure = newData.SAGD_Pressure;
                var setPoints = newData.Setpoints;
                var suddenPressure = newData.Sudden_Pressure;
                var vapour = newData.Vapour;

                window.returnPressureAccumulated = this.prepareGraphData(returnPressure);
                this.graphList[0].series = this.prepareGraphData(returnPressure);

                window.emulsiongraphData = this.prepareGraphData(emulsion);
                this.graphList[1].series = this.prepareGraphData(emulsion);

                window.sagdPressureData = this.prepareGraphData(sagdPressure);
                this.graphList[2].series = this.prepareGraphData(sagdPressure);

                window.setpointsData = this.prepareGraphData(setPoints);
                this.graphList[3].series = this.prepareGraphData(setPoints);

                window.vapourData = this.prepareGraphData(vapour);
                this.graphList[4].series = this.prepareGraphData(vapour);

                window.suddenPressureData = this.prepareGraphData(suddenPressure);
                this.graphList[5].series = this.prepareGraphData(suddenPressure);

                window.bhtAccumulatedData = this.prepareGraphData(bht);
                this.graphList[6].series = this.prepareGraphData(bht);

                window.producedGasData = this.prepareGraphData(producedGas);
                this.graphList[7].series = this.prepareGraphData(producedGas);

                window.bswData = this.prepareGraphData(bsw);
                this.graphList[8].series = this.prepareGraphData(bsw);

                this.showOrHideLoader(false);
                setTimeout(() => {
                    this.updateAlertMarker();
                    this.updateModelInfoMarker();
                }, 2000);
                this.syncGraphs(this.dateMin, this.dateMax);

            },
            //get ths graph data for all the nine graphs
            requestGraphData: function(wellId, setFromMoment, setTomoment, source, aggregation) {
                var xhttp = new XMLHttpRequest();
                this.showLoadingForDetailedGraph();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "Graph Data", "get");
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var newData = {}
                        newData = JSON.parse(xhttp.response);
                        this.graphsettings(this.wellId, newData);
                    }
                }.bind(this);

                if (source === "applyRange") {
                    var newFromDate = setFromMoment;
                    var newToDate = setTomoment
                } else {
                    var fromdate = this.fromMoment._i;
                    var toDate = this.toMoment._i;
                    var a = moment.utc(fromdate).format();
                    var tempFromdate = new Date(a).toLocaleString('en-GB', {
                        timeZone: 'Canada/Mountain'
                    });
                    var temp = (tempFromdate.toString()).split(",");
                    var tempdate = temp[0].split("/");
                    var newFromDate = tempdate[2] + "-" + tempdate[1] + "-" + tempdate[0] + "T" + temp[1].trim();
                    var b = moment.utc(toDate).format();
                    var tempTodate = new Date(b).toLocaleString('en-GB', {
                        timeZone: 'Canada/Mountain'
                    });
                    var tempto = (tempTodate.toString()).split(",");
                    var toTemp = tempto[0].split("/");
                    var newToDate = toTemp[2] + "-" + toTemp[1] + "-" + toTemp[0] + "T" + tempto[1].trim();
                }

                if (wellId !== this.wellId) {
                    var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellview"
                    if (aggregation !== undefined) {
                        var mapItem = {
                            "lastMonth": '1mm-ago',
                            "lastThreeMonths": '3mm-ago',
                            "lastYear": '1y-ago',
                            "lastOneWeek": '7d-ago',
                            "lastThreeDays": '3d-ago',
                            "oneDay": '1d-ago',
                            "lastFourteenDays": '14d-ago',
                            "oneHour": '1h-ago'
                        };
                        var conf = mapItem[wellId];
                        var params = "user_id=" + this.loggedUser + "&well_id=" + this.wellId +
                          "&start=" + conf + "&interval=" + aggregation;
                    } else {
                        var mapItem = {
                            "lastMonth": '1mm-ago',
                            "lastThreeMonths": '3mm-ago',
                            "lastYear": '1y-ago',
                            "lastOneWeek": '7d-ago',
                            "lastThreeDays": '3d-ago',
                            "oneDay": '1d-ago',
                            "lastFourteenDays": '14d-ago',
                            "oneHour": '1h-ago'
                        };
                        var conf = mapItem[wellId];
                        var params = "user_id=" + this.loggedUser + "&well_id=" + this.wellId +
                          "&start=" + conf;
                    }
                } else if (source === "aggregation" && aggregation !== undefined) {
                    var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellview"
                    if (this.modifiedToDate !== undefined && this.modifiedFromDate !== undefined) {
                        var newFromDate = this.modifiedFromDate;
                        var newToDate = this.modifiedToDate;
                    }
                    var params = "user_id=" + this.loggedUser + "&well_id=" + this.wellId +
                      "&start=" + newFromDate + "&end=" + newToDate + "&interval=" + aggregation;
                } else if (source != "aggregation") {
                    if (aggregation !== undefined) {
                        var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellview"
                        var params = "user_id=" + this.loggedUser + "&well_id=" + this.wellId +
                          "&start=" + newFromDate + "&end=" + newToDate + "&interval=" + aggregation;
                    } else {
                        var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellview"
                        var params = "user_id=" + this.loggedUser + "&well_id=" + this.wellId +
                          "&start=" + newFromDate + "&end=" + newToDate;
                    }
                }

                console.log(url + "?" + params);
                xhttp.open("GET", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.setRequestHeader("token", this.parent.accessToken);
                try {
                    xhttp.send();
                } catch (error) {
                    console.log(error);
                }
            },


            requestData: function(fromMoment, toMoment, graphName) {

                var xhttp = new XMLHttpRequest();

                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "Graph Data", "get");
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var newData = {}
                        newData = JSON.parse(xhttp.response);

                        if (graphName === 'Return_Pressure') {
                            this.graphList[0].returnPressureFromMoment = undefined
                            this.graphList[0].returnPressureToMoment = undefined
                            var returnPressure = newData.Return_Pressure;
                            var retrnPressureGraphData = [];
                            for (var f = 0; f < returnPressure.length; f++) {
                                var temp = {};
                                temp.id = returnPressure[f]["name"];
                                temp.name = returnPressure[f]["name"];
                                temp.yAxis = f,
                                  temp.data = returnPressure[f]["data"];
                                temp.dashStyle = returnPressure[f]["style"];
                                temp.lineWidth = returnPressure[f]["line_width"];
                                this.dateMin = returnPressure[f]["date_min"];
                                this.dateMax = returnPressure[f]["date_max"];
                                retrnPressureGraphData.push(temp);
                            }
                            window.returnPressureAccumulated = retrnPressureGraphData;
                            this.graphList[0].series = returnPressureAccumulated;

                        }

                        if (graphName === 'Emulsion') {
                            this.graphList[1].emulsionFromMoment = undefined;
                            this.graphList[1].emulsionToMoment = undefined;
                            var emulsion = newData.Emulsion;
                            var emulsionData = [];
                            for (var a = 0; a < emulsion.length; a++) {
                                var temp = {};
                                temp.id = emulsion[a]["name"];
                                temp.name = emulsion[a]["name"];
                                temp.yAxis = a,
                                  temp.data = emulsion[a]["data"];
                                temp.dashStyle = emulsion[a]["style"]
                                temp.lineWidth = emulsion[a]["line_width"];
                                emulsionData.push(temp);
                            }
                            window.emulsiongraphData = emulsionData;
                            this.graphList[1].series = emulsiongraphData;
                        }


                        if (graphName == 'SAGD_Pressure') {
                            this.graphList[2].sagdPressureFromMoment = undefined
                            this.graphList[2].sagdPressureToMoment = undefined
                            var sagdPressure = newData.SAGD_Pressure;
                            var SAGDPressureGraphData = [];
                            for (var h = 0; h < sagdPressure.length; h++) {
                                var temp = {};
                                temp.id = sagdPressure[h]["name"];
                                temp.name = sagdPressure[h]["name"];
                                temp.yAxis = h,
                                  temp.data = sagdPressure[h]["data"];
                                temp.dashStyle = sagdPressure[h]["style"];
                                temp.lineWidth = sagdPressure[h]["line_width"];
                                SAGDPressureGraphData.push(temp);
                            }
                            window.sagdPressureData = SAGDPressureGraphData;
                            this.graphList[2].series = sagdPressureData;

                        }

                        if (graphName === 'Setpoints') {
                            this.graphList[3].setpointsFromMoment = undefined
                            this.graphList[3].setpointsToMoment = undefined
                            var setPoints = newData.Setpoints;
                            var setpointsGraphData = [];
                            for (var i = 0; i < setPoints.length; i++) {
                                var temp = {};
                                temp.id = setPoints[i]["name"];
                                temp.name = setPoints[i]["name"];
                                temp.yAxis = i,
                                  temp.data = setPoints[i]["data"];
                                temp.dashStyle = setPoints[i]["style"];
                                temp.lineWidth = setPoints[i]["line_width"];
                                setpointsGraphData.push(temp);
                            }
                            window.setpointsData = setpointsGraphData;
                            this.graphList[3].series = setpointsData;
                        }

                        if (graphName === 'Vapour') {
                            this.graphList[4].vapourFromMoment = undefined;
                            this.graphList[4].vapourToMoment = undefined;
                            var vapour = newData.Vapour;
                            var vapourGraphData = [];
                            for (var b = 0; b < vapour.length; b++) {
                                var temp = {};
                                temp.id = vapour[b]["name"];
                                temp.name = vapour[b]["name"];
                                temp.yAxis = b,
                                  temp.data = vapour[b]["data"];
                                temp.dashStyle = vapour[b]["style"];
                                temp.lineWidth = vapour[b]["line_width"];
                                vapourGraphData.push(temp);
                            }
                            window.vapourData = vapourGraphData;
                            this.graphList[4].series = vapourData;

                        }

                        if (graphName === 'Sudden_Pressure') {
                            this.graphList[5].suddenPressureFromMoment = undefined
                            this.graphList[5].suddenPressureToMoment = undefined
                            var suddenPressure = newData.Sudden_Pressure;
                            var suddenPressureGraphData = [];
                            for (var g = 0; g < suddenPressure.length; g++) {
                                var temp = {};
                                temp.id = suddenPressure[g]["name"];
                                temp.name = suddenPressure[g]["name"];
                                temp.yAxis = g,
                                  temp.data = suddenPressure[g]["data"];
                                temp.dashStyle = suddenPressure[g]["style"];
                                temp.lineWidth = suddenPressure[g]["line_width"];
                                suddenPressureGraphData.push(temp);
                            }
                            window.suddenPressureData = suddenPressureGraphData;
                            this.graphList[5].series = suddenPressureData;
                        }

                        if (graphName === 'BHT') {
                            this.graphList[6].bhtFromMoment = undefined
                            this.graphList[6].bhtToMoment = undefined
                            var bht = newData.BHT;
                            var bhtGraphData = [];
                            for (var e = 0; e < bht.length; e++) {
                                var temp = {};
                                temp.id = bht[e]["name"];
                                temp.name = bht[e]["name"];
                                temp.yAxis = e,
                                  temp.data = bht[e]["data"];
                                temp.dashStyle = bht[e]["style"];
                                temp.lineWidth = bht[e]["line_width"];
                                bhtGraphData.push(temp);
                            }
                            window.bhtAccumulatedData = bhtGraphData;
                            this.graphList[6].series = bhtAccumulatedData;
                        }

                        if (graphName === 'Produced_Gas') {
                            this.graphList[7].producedGasFromMoment = undefined
                            this.graphList[7].producedGasToMoment = undefined
                            var producedGas = newData.Produced_Gas;
                            var producedGasGraphData = [];
                            for (var c = 0; c < producedGas.length; c++) {
                                var temp = {};
                                temp.id = producedGas[c]["name"];
                                temp.name = producedGas[c]["name"];
                                temp.yAxis = c,
                                  temp.data = producedGas[c]["data"];
                                temp.dashStyle = producedGas[c]["style"];
                                temp.lineWidth = producedGas[c]["line_width"];
                                producedGasGraphData.push(temp);
                            }
                            window.producedGasData = producedGasGraphData;
                            this.graphList[7].series = producedGasData;
                        }

                        if (graphName === 'BSW') {
                            this.graphList[8].bswFromMoment = undefined
                            this.graphList[8].bswToMoment = undefined
                            var bsw = newData.BSW;
                            var bswGraphData = [];
                            for (var d = 0; d < bsw.length; d++) {
                                var temp = {};
                                temp.id = bsw[d]["name"];
                                temp.name = bsw[d]["name"];
                                temp.yAxis = d,
                                  temp.data = bsw[d]["data"];
                                temp.dashStyle = bsw[d]["style"];
                                temp.lineWidth = bsw[d]["line_width"];
                                bswGraphData.push(temp);
                            }
                            window.bswData = bswGraphData;
                            this.graphList[8].series = bswData;
                        }
                    }
                }.bind(this);

                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellview"
                var params = "user_id=" + this.loggedUser + "&well_id=" + this.wellId +
                  "&start=" + fromMoment + "&end=" + toMoment + "&graph=" + graphName;
                console.log(url + "?" + params);
                xhttp.open("GET", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.setRequestHeader("token", this.parent.accessToken);
                xhttp.send();

            },


            //gets the alertline list for all the graphs,gets the well status and pump status through the well risks API
            getAlertData: function(wellId, frommoment, tomoment, source, from) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "Well Risks", "get");
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var riskTableData = {}
                        riskTableData = JSON.parse(xhttp.response);
                        var risksateList = riskTableData.risk_status;
                        var emulsion = risksateList.Emulsion;
                        var bht = risksateList.BHT;
                        var bsw = risksateList.BSW;
                        var producedGas = risksateList.Produced_Gas;
                        var returnPressure = risksateList.Return_Pressure;
                        var sagdPressure = risksateList.SAGD_Pressure;
                        var suddenPressure = risksateList.Sudden_Pressure;
                        var pumpStatus = risksateList.Pump_Status;
                        var vapour = risksateList.Vapour;
                        var status = riskTableData.well_status;
                        var pump = riskTableData.pump_status;
                        if (status === "At Risk") {
                            this.WellStatus = status;
                            this.wellStatusColor = "#db5a6b";
                        } else if (status === "OFFLINE") {
                            this.WellStatus = "Offline";
                            this.wellStatusColor = "#525962";
                        } else if (status === "Acknowledged" || status === "Action Taken") {
                            this.WellStatus = status;
                            this.wellStatusColor = "Orange";
                        } else {
                            this.WellStatus = status;
                            this.wellStatusColor = "#26c281";
                        }
                        this.BHTState = bht.summary_status;
                        this.BSWBottomWaterState = bsw.summary_status;
                        this.BadVapourState = vapour.summary_status;
                        this.ProducedGasState = producedGas.summary_status;
                        this.ReturnPressureState = returnPressure.summary_status;
                        this.SAGDPressureState = sagdPressure.summary_status;
                        this.SuddenPressureChangeState = suddenPressure.summary_status;
                        this.SetPointsState = pumpStatus.summary_status;
                        this.EmulsionState = "Nominal";

                        if (pump === "OFFLINE" || pump === null) {
                            this.wellIconPath = "../../elements/adaptix-v2-components/adaptix-icons/well-icon.png"
                        }
                        if (pump === "TRIPPED") {
                            this.wellIconPath = "../../elements/adaptix-v2-components/adaptix-icons/well_icon_red.png"
                        }
                        if (pump === "RUNNING") {
                            this.wellIconPath = "../../elements/adaptix-v2-components/adaptix-icons/well_icon_green.png"
                        }
                        var temp = [];
                        var tempModelInfo = [];
                        temp.push({
                            "bht": bht.alert_records
                        });
                        temp.push({
                            "bsw": bsw.alert_records
                        });
                        temp.push({
                            "producedGas": producedGas.alert_records
                        });
                        temp.push({
                            "returnPressure": returnPressure.alert_records
                        });
                        temp.push({
                            "sagdPressure": sagdPressure.alert_records
                        });
                        temp.push({
                            "suddenPressure": suddenPressure.alert_records
                        });
                        temp.push({
                            "vapour": vapour.alert_records
                        });
                        temp.push({
                            "pumpStatus": pumpStatus.alert_records
                        });
                        temp.push({
                            "emulsion": emulsion.alert_records
                        });

                        tempModelInfo.push({
                            "bhtModelInfo": bht.model_info
                        });
                        tempModelInfo.push({
                            "bswModelInfo": bsw.model_info
                        });
                        tempModelInfo.push({
                            "producedGasModelInfo": producedGas.model_info
                        });
                        tempModelInfo.push({
                            "returnPressureModelInfo": returnPressure.model_info
                        });
                        tempModelInfo.push({
                            "sagdPressureModelInfo": sagdPressure.model_info
                        });
                        tempModelInfo.push({
                            "suddenPressureModelInfo": suddenPressure.model_info
                        });
                        tempModelInfo.push({
                            "vapourModelInfo": vapour.model_info
                        });
                        tempModelInfo.push({
                            "pumpStatusModelInfo": pumpStatus.model_info
                        });
                        tempModelInfo.push({
                            "emulsionModelInfo": emulsion.model_info
                        });
                        this.riskData = temp;
                        this.modelInfoData = tempModelInfo;

                        if (from !== undefined && from != 'showAlertDetails') {
                            this.updatePlotlines();
                        }
                    }
                }.bind(this);

                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellrisks";
                if (source === "dateRange") {

                    var newFromDate = frommoment;
                    var newToDate = tomoment;
                } else if (frommoment !== undefined && tomoment !== undefined && source === "applyRange") {

                    // var fromdate = frommoment;
                    // var toDate = tomoment;
                    // var a = moment.utc(fromdate).format();
                    // var tempFromdate = new Date(a).toLocaleString('en-GB', {
                    //   timeZone: 'Canada/Mountain'
                    // });
                    // var temp = (tempFromdate.toString()).split(",");
                    // var tempdate = temp[0].split("/");
                    // var newFromDate = tempdate[2] + "-" + tempdate[1] + "-" + tempdate[0] + "T" + temp[1].trim();
                    // var b = moment.utc(toDate).format();
                    // var tempTodate = new Date(b).toLocaleString('en-GB', {
                    //   timeZone: 'Canada/Mountain'
                    // });
                    // var tempto = (tempTodate.toString()).split(",");
                    // var toTemp = tempto[0].split("/");
                    // var newToDate = toTemp[2] + "-" + toTemp[1] + "-" + toTemp[0] + "T" + tempto[1].trim();
                    var newFromDate = frommoment;
                    var newToDate = tomoment;
                } else if (source === "attached") {

                    if (this.modifiedToDate !== undefined && this.modifiedFromDate !== undefined) {
                        var newFromDate = this.modifiedFromDate;
                        var newToDate = this.modifiedToDate;
                    } else {

                        var fromdate = frommoment;
                        var toDate = tomoment;
                        var a = moment.utc(fromdate).format();
                        var tempFromdate = new Date(a).toLocaleString('en-GB', {
                            timeZone: 'Canada/Mountain'
                        });
                        var temp = (tempFromdate.toString()).split(",");
                        var tempdate = temp[0].split("/");
                        var newFromDate = tempdate[2] + "-" + tempdate[1] + "-" + tempdate[0] + "T" + temp[1].trim();
                        var b = moment.utc(toDate).format();
                        var tempTodate = new Date(b).toLocaleString('en-GB', {
                            timeZone: 'Canada/Mountain'
                        });
                        var tempto = (tempTodate.toString()).split(",");
                        var toTemp = tempto[0].split("/");
                        var newToDate = toTemp[2] + "-" + toTemp[1] + "-" + toTemp[0] + "T" + tempto[1].trim();
                    }
                }

                var params = "user_id=" + this.loggedUser + "&well_id=" + wellId + "&start=" + newFromDate + "&end=" +
                  newToDate;
                console.log(url + "?" + params);

                xhttp.open("GET", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.setRequestHeader("token", this.parent.accessToken);
                xhttp.send();
                this.resetWellSetupTogledStates();
            },

            _refreshme: function(wellId, accessToken) {
                console.log("in refresh me");
                this.getWellSetupData(wellId);

                this._headers = {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'token': accessToken
                };
                this._getWellsetupParams = {
                    'user_id': this.loggedUser,
                    'well_id': this.wellId
                };
                this.wellSetupAutorefresh = setInterval(() => {
                    this._updateData();
                }, 300000);
            },


            detached: function() {
                console.log("Well View Detached")
                clearInterval(this.wellSetupAutorefresh);
                clearInterval(this.autoRefresh);
            },

            //process the response for well setup autorefresh through iron ajax call
            _onWellsetupResponse: function(e) {
                const resp = e.detail.response;
                var tempresponse = {};
                tempresponse = resp;
                var tableData = tempresponse.tables;
                this.parseWellSetupData(tableData);
            },

            //generates the id for all records in well setup Artificial lift table
            getADId: function(index, name) {
                return name + index;
            },

            //on click of save button of well info table this function triggered and calls the post API
            saveWellInfo: function() {
                var wellType = document.getElementById("well_type").value;
                var wellMode = document.getElementById("well_mode").value;
                var adjWellleft = document.getElementById("adj_well_left").value;
                var middleWell = document.getElementById("well_id").value;
                var adjWellright = document.getElementById("adj_well_right").value;
                var prodEng = document.getElementById("prod_engineer").value;
                var responseJson = {};
                responseJson.well_type = wellType;
                responseJson.well_mode = wellMode;
                responseJson.adj_well_left = adjWellleft;
                responseJson.adj_well_right = adjWellright
                responseJson.prod_engineer = prodEng;
                var wellInfo = {};
                var tempJson = [];
                tempJson.push(responseJson)
                wellInfo.values = tempJson;
                wellInfo.table = "well_info";
                var payload = []
                payload.push(wellInfo);
                // get Operator Comments and append to payload list
                var optComments = {};
                optComments = this.prepareOperatorCommentsPayload();
                payload.push(optComments);

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "", "set");
                    if (xhttp.readyState == 4 && xhttp.status === 201) {
                        this.message = "Save Successful"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                            this.getWellSetupData(this.wellId);
                        }, 2000);
                    } else if (xhttp.status === 422) {
                        this.message = "Save Failed"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                        }, 2000);
                    }
                    try {
                        var responseMessage = {}
                        if (xhttp.response.trim() !== "") {
                            responseMessage = JSON.parse(xhttp.response);
                        }
                    } catch (e) {
                        console.log("Streaming... (Or an error occurred)");
                        console.log(e);
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup/update";
                var wellId = this.wellId;
                var params = "well_id=" + wellId + "&user_id=" + this.loggedUser;
                xhttp.open("POST", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send(JSON.stringify(payload));
            },

            /* Prepare injection parameters payload */
            prepareInjParams: function() {
                var injParams = {};
                var valueJson = {};
                var tempJson = [];
                var inj_params_key_list = this.injParameterInfo[0]['keyList'];

                // var inj_params_key_list = ["lt_steam_panel_target", "lt_steam_valve_panel_target", "lt_steam_eng_target",
                //     "lt_steam_min", "lt_steam_max", "st_steam_panel_target", "st_steam_valve_panel_target",
                //     "st_steam_eng_target", "st_steam_min", "st_steam_max", "bhp_panel_target", "bhp_valve_panel_target",
                //     "bhp_eng_target", "inj_gas_panel_target", "inj_gas_valve_panel_target", "inj_gas_eng_target", "inj_gas_min",
                //     "inj_gas_max", "steam_panel_target", "steam_valve_panel_target", "steam_eng_target", "steam_min", "steam_max"
                // ];

                inj_params_key_list.forEach(function(key, index) {
                    var raw_value = document.getElementById('inj_' + key).value;
                    if (raw_value !== null) {
                        if (raw_value === "") {
                            var value = null;
                        } else {
                            var value = raw_value.trim();
                        }
                        valueJson[key] = value;
                    } else {
                        console.log(key);
                    }
                });
                // valueJson.bhp_uom = "kPa";
                // valueJson.bhp_valve_uom = "%";
                // valueJson.inj_gas_rate_uom = "e3m3/d";
                // valueJson.inj_gas_valve_uom = "%";
                // valueJson.steam_rate_uom = "t/d";
                // valueJson.steam_valve_uom = "%";

                injParams = valueJson;

                return injParams
            },

            /* Function to save inj and prod parameters together as some of the prod params are the inputs for inj params. */
            saveInjProdParams: function() {
                var payload = []
                var injParams = this.prepareInjParams();
                var prodParams = this.prepareProdParams();
                payload.push({
                    'table': "inj_prod_params",
                    'values': {
                        'inj_params': injParams,
                        'prod_params': prodParams
                    }
                });
                console.log(payload)

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "", "set");
                    if (xhttp.readyState == 4 && xhttp.status === 201) {
                        this.message = "Save Successful"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                            this.getWellSetupData(this.wellId);
                        }, 2000);
                    } else if (xhttp.status === 422) {
                        this.message = "Save Failed"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                        }, 2000);
                    }
                    try {
                        var responseMessage = {}
                        if (xhttp.response.trim() !== "") {
                            responseMessage = JSON.parse(xhttp.response);
                        }
                    } catch (e) {
                        console.log("Streaming... (Or an error occurred)");
                        console.log(e);
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup/update";
                var wellId = this.wellId;
                var params = "well_id=" + wellId + "&user_id=" + this.loggedUser;
                xhttp.open("POST", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send(JSON.stringify(payload));
            },

            /* Prepare injection parameters payload */
            prepareProdParams: function() {
                var prodParams = {};
                var valueJson = {};
                var tempJson = [];
                var prod_params_key_list = this.prodParameterInfo[0]['keyList'];
                // var prod_params_key_list = ["emulsion_rate_panel_target", "emulsion_rate_eng_target", "emulsion_rate_min", "emulsion_rate_max",
                //     "bsw_panel_target", "bsw_eng_target", "bsw_min", "bsw_max",
                //     "oil_rate_panel_target", "oil_rate_min",
                //     "oil_rate_max", "gas_prod_rate_panel_target", "gas_prod_rate_eng_target", "gas_prod_rate_min", "gas_prod_rate_max",
                //     "bad_vapour_prod_panel_target", "bad_vapour_prod_eng_target", "bad_vapour_prod_min", "bad_vapour_prod_max",
                //     "gor_panel_target", "gor_eng_target", "gor_min", "gor_max",
                //     "tfsr_panel_target",
                //     "esp_panel_target", "esp_eng_target", "esp_min", "esp_max",
                //     "choke_panel_target", "choke_eng_target", "choke_min", "choke_max",
                //     "rod_pump_speed_panel_target", "rod_pump_speed_eng_target", "rod_pump_speed_min", "rod_pump_speed_max"
                // ];

                prod_params_key_list.forEach(function(key, index) {
                    var raw_value = document.getElementById('prod_' + key).value;
                    if (raw_value !== null) {
                        if (raw_value === "") {
                            var value = null;
                        } else {
                            var value = raw_value.trim();
                        }
                        valueJson[key] = value;
                    } else {
                        console.log(key);
                    }
                });

                // valueJson.emulsion_rate_uom = "m3/d";
                // valueJson.bsw_uom = "%";
                // valueJson.oil_rate_uom = "bbl/d";
                // valueJson.gas_rate_uom = "e3m3/d";
                // valueJson.vapour_rate_uom = "m3/d";
                // valueJson.rod_pump_speed_uom = "SPM";
                // valueJson.esp_speed_uom = "Hz";
                // valueJson.choke_uom = "%";

                prodParams = valueJson;

                return prodParams
            },

            //on click of save button of well test table this function triggered and calls the post API
            saveWellTest: function() {
                var temp = 0;
                var newJson = [];
                var responseJson = {};
                for (var i = 0; i < this.wellTestData.length; i++) {
                    var valueJson = {};
                    if (temp === i) {
                        var testStart = "test_start_time" + i;
                        var testEnd = "test_end_time" + i;
                        var modalInput = "model_input" + i;
                        var testStart = document.getElementById(testStart).value;
                        var testEnd = document.getElementById(testEnd).value;

                        var modalInput = document.getElementById(modalInput).checked;
                        if (modalInput === undefined) {
                            modalInput = false
                        }
                        valueJson.test_start_time = testStart;
                        valueJson.test_end_time = testEnd;

                        valueJson.model_input = modalInput;
                        valueJson.method = "update";
                    }
                    newJson.push(valueJson);
                    temp++;
                }
                responseJson.table = "well_tests";
                responseJson.values = newJson;
                var payload = [];
                payload.push(responseJson);

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "", "set");
                    if (xhttp.readyState === 4 && xhttp.status === 201) {
                        this.message = "Save Successful"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                            this.getWellSetupData(this.wellId);
                        }, 2000);
                    } else if (xhttp.status === 422) {
                        this.message = "Save Failed"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                        }, 2000);
                    }
                    try {
                        var responseMessage = {}
                        if (xhttp.response.trim() !== "") {
                            responseMessage = JSON.parse(xhttp.response);
                        }
                    } catch (e) {
                        console.log("Streaming... (Or an error occurred)");
                        console.log(e);
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup/update";
                var wellId = this.wellId;
                var params = "well_id=" + wellId + "&user_id=" + this.loggedUser;
                xhttp.open("POST", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send(JSON.stringify(payload));
            },

            //on click of save button of Artificial lift table this function triggered and calls the post API
            saveArtificialLift: function() {
                if (this.wellTypeCheck) {
                    var temp = 0;
                    var newJson = [];
                    var responseJson = {};
                    for (var i = 0; i < this.artificialData.length; i++) {
                        var valueJson = {};

                        if (temp === i) {
                            var pumpnum = "pumpId" + i;
                            var Vendor = "pumpVendor" + i;
                            var stage = "stageSize" + i;
                            var count = "stageCount" + i;
                            var motor = "motorHp" + i;
                            var intakekey = "intake" + i;
                            var installDatekey = "installDate" + i;
                            var failDatekey = "failDate" + i;
                            var runLifekey = "runLife" + i;
                            var pumpId = document.getElementById(pumpnum).value;
                            var pumpVendor = document.getElementById(Vendor).value;
                            var stageSize = document.getElementById(stage).value;
                            var stageCount = document.getElementById(count).value;
                            var motorHp = document.getElementById(motor).value;
                            var intake = document.getElementById(intakekey).value;
                            var installDate = document.getElementById(installDatekey).value;
                            var failDate = document.getElementById(failDatekey).value;
                            var runLife = document.getElementById(runLifekey).value;
                            valueJson.pump_id = pumpId;
                            valueJson.pump_vendor = pumpVendor;
                            valueJson.stage_count = stageCount;
                            valueJson.stage_size = stageSize;
                            valueJson.motor_hp = motorHp;
                            valueJson.motor_hp_uom = "Hz";
                            valueJson.intake = intake;
                            valueJson.run_life_uom = "days";
                            valueJson.install_date = installDate + "T00:00:00";
                            if (failDate === "") {
                                valueJson.fail_date = failDate;
                            } else {
                                valueJson.fail_date = failDate + "T00:00:00";
                            }
                            valueJson.run_life = runLife;
                            valueJson.method = "update";
                        }
                        newJson.push(valueJson);
                        temp++;
                    }
                    var newPumpId = document.getElementById("additionalPumpNum").value;
                    var newPumpVendor = document.getElementById("additionalPumpvendor").value;
                    var newStageSize = document.getElementById("additionalPumpSize").value;
                    var newStageCount = document.getElementById("additionalPumpCount").value;
                    var newMotorhp = document.getElementById("additionalMotorHp").value;
                    var newIntake = document.getElementById("additionalPumpIntake").value;
                    var newInstallDate = document.getElementById("additionalPumpInstallDate").value;
                    var newFailDate = document.getElementById("additionalPumpfaildate").value;
                    var newRunlife = document.getElementById("additionalRunlife").value;
                    var newValueJson = {}
                    if (newPumpId != "" && newPumpVendor != "" && newStageSize != "" && newStageCount != "" &&
                      newMotorhp != "" && newIntake != "" && newInstallDate != "") {

                        newValueJson.pump_id = newPumpId;
                        newValueJson.pump_vendor = newPumpVendor;
                        newValueJson.stage_size = newStageSize;
                        newValueJson.stage_count = newStageCount;
                        newValueJson.motor_hp = newMotorhp;
                        newValueJson.intake = newIntake;
                        newValueJson.motor_hp_uom = "Hz";
                        newValueJson.run_life_uom = "days";
                        newValueJson.install_date = newInstallDate + "T00:00:00";
                        newValueJson.run_life = newRunlife;
                        if (newFailDate !== "") {
                            newValueJson.fail_date = newFailDate + "T00:00:00";
                        } else {
                            newValueJson.fail_date = newFailDate;
                        }

                        newValueJson.method = "insert";
                        newJson.push(newValueJson);
                    }
                    responseJson.table = "artificial_lift";
                } else if (!this.wellTypeCheck) {
                    var temp = 0;
                    var tempj = 0;
                    var newJson = [];
                    var responseJson = {};
                    for (var i = 0; i < this.artificialData.length; i++) {
                        var valueJson = {};

                        if (temp === i) {
                            var pumpnum = "pumpId" + i;
                            var Vendor = "pumpVendor" + i;
                            var stage = "stageSize" + i;
                            var count = "stageCount" + i;
                            var motor = "motorHp" + i;
                            var intakekey = "intake" + i;
                            var installDatekey = "installDate" + i;
                            var failDatekey = "failDate" + i;
                            var runLifekey = "runLife" + i;
                            var pumpId = document.getElementById(pumpnum).value;
                            var pumpVendor = document.getElementById(Vendor).value;
                            var stageSize = document.getElementById(stage).value;
                            var stageCount = document.getElementById(count).value;
                            var motorHp = document.getElementById(motor).value;
                            var intake = document.getElementById(intakekey).value;
                            var installDate = document.getElementById(installDatekey).value;
                            var failDate = document.getElementById(failDatekey).value;
                            var runLife = document.getElementById(runLifekey).value;
                            valueJson.pump_id = pumpId;
                            valueJson.pump_vendor = pumpVendor;
                            valueJson.stage_count = stageCount;
                            valueJson.stage_size = stageSize;
                            valueJson.motor_hp = motorHp;
                            valueJson.motor_hp_uom = "Hz";
                            valueJson.intake = intake;
                            valueJson.table_type = "esp";
                            valueJson.run_life_uom = "days";
                            valueJson.install_date = installDate + "T00:00:00";
                            if (failDate === "") {
                                valueJson.fail_date = failDate;
                            } else {
                                valueJson.fail_date = failDate + "T00:00:00";
                            }
                            valueJson.run_life = runLife;
                            valueJson.method = "update";
                        }
                        newJson.push(valueJson);
                        temp++;
                    }
                    var newPumpId = document.getElementById("additionalPumpNum").value;
                    var newPumpVendor = document.getElementById("additionalESPPumpvendor").value;
                    var newStageSize = document.getElementById("additionalESPPumpSize").value;
                    var newStageCount = document.getElementById("additionalESPPumpCount").value;
                    var newMotorhp = document.getElementById("additionalESPMotorHp").value;
                    var newIntake = document.getElementById("additionalESPPumpIntake").value;
                    var newInstallDate = document.getElementById("additionalESPPumpInstallDate").value;
                    var newFailDate = document.getElementById("additionalESPPumpfaildate").value;
                    var newRunlife = document.getElementById("additionalESPRunlife").value;
                    var newValueJson = {}
                    if (newPumpId != "" && newPumpVendor != "" && newStageSize != "" && newStageCount != "" &&
                      newMotorhp != "" && newInstallDate != "") {

                        newValueJson.pump_id = newPumpId;
                        newValueJson.pump_vendor = newPumpVendor;
                        newValueJson.stage_size = newStageSize;
                        newValueJson.stage_count = newStageCount;
                        newValueJson.motor_hp = newMotorhp;
                        newValueJson.intake = newIntake;
                        newValueJson.motor_hp_uom = "Hz";
                        newValueJson.run_life_uom = "days";
                        newValueJson.table_type = "esp";
                        newValueJson.install_date = newInstallDate + "T00:00:00";
                        newValueJson.run_life = newRunlife;
                        if (newFailDate === "") {
                            newValueJson.fail_date = newFailDate;
                        } else {
                            newValueJson.fail_date = newFailDate + "T00:00:00";
                        }

                        newValueJson.method = "insert";
                        newJson.push(newValueJson);
                    }
                    for (var j = 0; j < this.rodpump.length; j++) {
                        var valueJson = {};
                        if (tempj === j) {
                            var pumpnum = "rodpumpId" + j;
                            var Vendor = "rodpumpVendor" + j;
                            var pumptype = "rodPumptype" + j;
                            var barreldia = "rodBarrelDiameter" + j;
                            var barrellen = "rodbarrellength" + j;
                            var installDatekey = "rodinstallDate" + j;
                            var failDatekey = "rodfailDate" + j;
                            var runLifekey = "rodrunLife" + j;
                            var pumpId = document.getElementById(pumpnum).value;
                            var pumpVendor = document.getElementById(Vendor).value;
                            var pumpTypes = document.getElementById(pumptype).value;
                            var barrelDiameter = document.getElementById(barreldia).value;
                            var barrelLength = document.getElementById(barrellen).value;
                            var installDate = document.getElementById(installDatekey).value;
                            var failDate = document.getElementById(failDatekey).value;
                            var runLife = document.getElementById(runLifekey).value;
                            valueJson.pump = pumpId;
                            valueJson.pump_vendor = pumpVendor;
                            valueJson.pump_type = pumpTypes;
                            valueJson.barrel_id = barrelDiameter;
                            valueJson.pump_len = barrelLength;
                            valueJson.barrel_id_uom = "in";
                            valueJson.pump_len_uom = "m";
                            valueJson.table_type = "rodpump";
                            valueJson.start_date = installDate + "T00:00:00";
                            if (failDate === "") {
                                valueJson.fail_date = failDate;
                            } else {
                                valueJson.fail_date = failDate + "T00:00:00";
                            }
                            valueJson.pulled = runLife;
                            valueJson.method = "update";
                        }
                        newJson.push(valueJson);
                        tempj++;
                    }
                    var newPumpId = document.getElementById("additionalrodPumpNum").value;
                    var newPumpVendor = document.getElementById("additionalrodPumpvendor").value;
                    var newrodPumptype = document.getElementById("additionalrodPumptype").value;
                    var newrodbarrelDia = document.getElementById("additionalrodbarrelDia").value;
                    var newrodBarrelLength = document.getElementById("additionalrodBarrelLength").value;
                    var newrodPumpInstallDate = document.getElementById("additionalrodPumpInstallDate").value;
                    var newrodPumpfaildate = document.getElementById("additionalrodPumpfaildate").value;
                    var newrodRunlife = document.getElementById("additionalrodRunlife").value;

                    var newrodValueJson = {}
                    if (newPumpId != "" && newPumpVendor != "" && newrodPumptype != "" && newrodbarrelDia != "" &&
                      newrodBarrelLength != "" && newrodPumpInstallDate != "") {

                        newrodValueJson.pump = newPumpId;
                        newrodValueJson.pump_vendor = newPumpVendor;
                        newrodValueJson.pump_type = newrodPumptype;
                        newrodValueJson.barrel_id = newrodbarrelDia;
                        newrodValueJson.pump_len = newrodBarrelLength;
                        newrodValueJson.barrel_id_uom = "in";
                        newrodValueJson.pump_len_uom = "m";
                        newrodValueJson.table_type = "rodpump";
                        newrodValueJson.start_date = newrodPumpInstallDate + "T00:00:00";
                        newrodValueJson.pulled = newrodRunlife;
                        if (newrodPumpfaildate === "") {
                            newrodValueJson.fail_date = newrodPumpfaildate;
                        } else {
                            newrodValueJson.fail_date = newrodPumpfaildate + "T00:00:00";
                        }
                        newrodValueJson.method = "insert";
                        newJson.push(newrodValueJson);
                    }
                    responseJson.table = "artificial_lift_infill";
                }
                responseJson.values = newJson;
                var payload = [];
                payload.push(responseJson);

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "", "set");
                    if (xhttp.readyState == 4 && xhttp.status === 201) {
                        this.message = "Save Successful"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                            this.getWellSetupData(this.wellId);
                        }, 2000);
                    } else if (xhttp.status === 422) {
                        this.message = "Save Failed"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                        }, 2000);
                    }
                    try {
                        var responseMessage = {}
                        if (xhttp.response.trim() !== "") {
                            responseMessage = JSON.parse(xhttp.response);
                        }
                    } catch (e) {
                        console.log("Streaming... (Or an error occurred)");
                        console.log(e);
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup/update";
                var wellId = this.wellId;
                var params = "well_id=" + wellId + "&user_id=" + this.loggedUser;
                xhttp.open("POST", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send(JSON.stringify(payload));
            },
            preparePayloadForAlertManagement: function() {
                var request_payload = {
                    "table": "alert_threshold",
                    "values": [{
                        "Sudden Pressure": {
                            "thresholds": [],
                            "uom": "kPa"
                        },
                        "Pump Status": {
                            "thresholds": [],
                            "uom": "Hz"
                        },
                        "Produced Gas": {
                            "thresholds": [],
                            "uom": "e3m3/d"
                        },
                        "SAGD Pressure": {
                            "thresholds": [],
                            "uom": "kPa"
                        },
                        "Return Pressure": {
                            "thresholds": [],
                            "uom": "kPa"
                        },
                        "BSW & Bottom Water": {
                            "thresholds": [],
                            "uom": "%"
                        },
                        "BHT": {
                            "thresholds": [],
                            "uom": "degC"
                        },
                        "Vapour": {
                            "thresholds": [],
                            "uom": "t/d"
                        }
                    }]
                }
                for (var i = 0; i < this.AlertDataNew[0].mainColumns.length; ++i) {
                    var thresholdsList = [];
                    for (var j = 0; j < this.AlertDataNew[0].mainColumns[i].list.length; ++j) {
                        thresholdsList.push({
                            "alert_name": this.AlertDataNew[0].mainColumns[i].list[j].alert_name,
                            "alert_type": this.AlertDataNew[0].mainColumns[i].list[j].alert_type,
                            "enable": this.AlertDataNew[0].mainColumns[i].list[j].enable,
                            "param_key": this.AlertDataNew[0].mainColumns[i].list[j].param_key,
                            "current": this.AlertDataNew[0].mainColumns[i].list[j].current,
                            "threshold": this.AlertDataNew[0].mainColumns[i].list[j].threshold
                        });
                    }
                    request_payload.values[0][this.AlertDataNew[0].mainColumns[i].name].thresholds = thresholdsList;
                }
                return request_payload;
            },

            //on click of save button of alert management table this function triggered and calls the post API
            saveAlertData: function() {
                var request_payload = [];
                request_payload.push(this.preparePayloadForAlertManagement());
                var wellId = this.wellId;
                //COMMENTING SINCE NEW LOGIC IMPLEMENTED
                /*var badVapour = document.getElementById("badVapour").value;
                 var badVapourToggle = document.getElementById("badVapourToggle").checked;
                 var producedGas = document.getElementById("producedGas").value;
                 var producedGasToggle = document.getElementById("producedGasToggle").checked;
                 var bswThreshold = document.getElementById("bswThreshold").value;
                 var bswToggle = document.getElementById("bswToggle").checked;
                 var bhta = document.getElementById("bhta").value;
                 var bhtb = document.getElementById("bhtb").value;
                 var bhtc = document.getElementById("bhtc").value;
                 var bhtd = document.getElementById("bhtd").value;
                 var bhte = document.getElementById("bhte").value;
                 var bhtf = document.getElementById("bhtf").value;
                 var bhtaToggle = document.getElementById("bhtaToggle").checked;
                 var bhtbToggle = document.getElementById("bhtbToggle").checked;
                 var bhtcToggle = document.getElementById("bhtcToggle").checked;
                 var bhtdToggle = document.getElementById("bhtdToggle").checked;
                 var bhteToggle = document.getElementById("bhteToggle").checked;
                 var bhtfToggle = document.getElementById("bhtfToggle").checked;
                 var pressureLoss = document.getElementById("pressureLoss").value;
                 var pressureLossToggle = document.getElementById("pressureLossToggle").checked;
                 var pressureChange = document.getElementById("pressureChange").value;
                 var pressureChangeToggle = document.getElementById("pressureChangeToggle").checked;
                 var pressureScrubbing = document.getElementById("pressureScrubbing").value;
                 var pressureScrubbingToggle = document.getElementById("pressureScrubbingToggle").checked;
                 var LTPressure = document.getElementById("LTPressureThreshold").value;
                 var LTPressureToggle = document.getElementById("LTPressureToggle").checked;
                 var stPressure = document.getElementById("stPressure").value;
                 var stPressureToggle = document.getElementById("stPressureToggle").checked;
                 var injGas = document.getElementById("injGas").value;
                 var injGasToggle = document.getElementById("injGasToggle").checked;
                 var prodGas = document.getElementById("prodGas").value;
                 var prodGasToggle = document.getElementById("prodGasToggle").checked;
                 // var sagd = document.getElementById("sagd_pressure_threshold").value;
                 var sagdToggle = document.getElementById("sagdToggle").checked;
                 var pressureBand = document.getElementById("sagd_pressure_band").value;
                 var tfsrIncrement = document.getElementById("sagd_pressure_tfsr").value;
                 var tempa = document.getElementById("motorA").value;
                 var tempb = document.getElementById("motorB").value;
                 var tempaToggle = document.getElementById("motoraToggle").checked;
                 var tempbToggle = document.getElementById("motorbtoggle").checked;
                 var valueJson = {};
                 valueJson.bad_vapour_enable = badVapourToggle.toString();
                 valueJson.bad_vapour_threshold = badVapour;
                 valueJson.bad_vapour_threshold_uom = "t/d";
                 valueJson.produced_gas_threshold = producedGas;
                 valueJson.produced_gas_enable = producedGasToggle.toString();
                 valueJson.produced_gas_threshold_uom = "e3m3/d";
                 valueJson.bhta_enable = bhtaToggle.toString();
                 valueJson.bhta_threshold = bhta;
                 valueJson.bhtb_enable = bhtbToggle.toString();
                 valueJson.bhtb_threshold = bhtb;
                 valueJson.bhtc_enable = bhtcToggle.toString();
                 valueJson.bhtc_threshold = bhtc;
                 valueJson.bhtd_enable = bhtdToggle.toString();
                 valueJson.bhtd_threshold = bhtd;
                 valueJson.bhte_enable = bhteToggle.toString();
                 valueJson.bhte_threshold = bhte;
                 valueJson.bhtf_enable = bhtfToggle.toString();
                 valueJson.bhtf_threshold = bhtf;
                 valueJson.bht_threshold_uom = "degC";
                 valueJson.bsw_enable = bswToggle.toString();
                 valueJson.bsw_threshold = bswThreshold;
                 valueJson.bsw_threshold_uom = "%";
                 valueJson.return_pressure_change_enable = pressureChangeToggle.toString();
                 valueJson.return_pressure_change_threshold = pressureChange;
                 valueJson.return_pressure_loss_enable = pressureLossToggle.toString();
                 valueJson.return_pressure_loss_threshold = pressureLoss;
                 valueJson.return_pressure_scrubbing_enable = pressureScrubbingToggle.toString();
                 valueJson.return_pressure_scrubbing_threshold = pressureScrubbing;
                 valueJson.return_pressure_threshold_uom = "kPa";
                 valueJson.sagd_pressure_enable = sagdToggle.toString();
                 // valueJson.sagd_pressure_threshold = sagd;
                 valueJson.sagd_pressure_band = pressureBand;
                 valueJson.sagd_pressure_tfsr = tfsrIncrement;
                 valueJson.sagd_pressure_threshold_uom = "kPa";
                 valueJson.esp_motor_temp_a_enable = tempaToggle.toString();
                 valueJson.esp_motor_temp_b_enable = tempbToggle.toString();
                 valueJson.esp_motor_temp_a_threshold = tempa;
                 valueJson.esp_motor_temp_b_threshold = tempb;
                 valueJson.sudden_pressure_change_inj_gas_enable = injGasToggle.toString();
                 valueJson.sudden_pressure_change_inj_gas_threshold = injGas;
                 valueJson.sudden_pressure_change_lt_enable = LTPressureToggle.toString();
                 valueJson.sudden_pressure_change_lt_threshold = LTPressure;
                 valueJson.sudden_pressure_change_prod_gas_enable = prodGasToggle.toString();
                 valueJson.sudden_pressure_change_prod_gas_threshold = prodGas;
                 valueJson.sudden_pressure_change_st_enable = stPressureToggle.toString();
                 valueJson.sudden_pressure_change_st_threshold = stPressure;
                 valueJson.sudden_pressure_change_threshold_uom = "kPa";
                 valueJson.well_id = wellId;

                 var responseJson = {};
                 var tempJson = [];
                 tempJson.push(valueJson)
                 responseJson.values = tempJson;
                 responseJson.table = "alert_threshold";
                 var payload = [];
                 payload.push(responseJson);*/

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "", "set");
                    if (xhttp.readyState == 4 && xhttp.status === 201) {
                        this.message = "Save Successful"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                            this.getWellSetupData(this.wellId);
                        }, 2000);
                    } else if (xhttp.status === 422) {
                        this.message = "Save Failed"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                        }, 2000);
                    }
                    try {
                        var responseMessage = {}
                        if (xhttp.response.trim() !== "") {
                            responseMessage = JSON.parse(xhttp.response);
                        }
                    } catch (e) {
                        console.log("Streaming... (Or an error occurred)");
                        console.log(e);
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup/update";
                var params = "well_id=" + wellId + "&user_id=" + this.loggedUser;
                xhttp.open("POST", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send(JSON.stringify(request_payload));

            },

            prepareOperatorCommentsPayload: function() {
                var operatorcomments = document.getElementById("operatorComments").value;
                var optPayload = {};
                optPayload = {
                    "table": "opt_comments",
                    'values': [{
                        'comment': operatorcomments
                    }]
                };
                return optPayload
            },

            //on click of save button of operator comments table this function triggered and calls the post API
            saveOperatorComments: function() {
                var wellId = this.wellId;
                var operatorcomments = document.getElementById("operatorComments").value;
                var valueJson = {};
                valueJson.comment = operatorcomments;
                var json = [];
                json.push(valueJson);
                var responseJson = {};
                responseJson.values = json;
                responseJson.table = "opt_comments";
                var payload = [];
                payload.push(responseJson);

                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "", "set");
                    if (xhttp.readyState == 4 && xhttp.status === 201) {
                        this.message = "Save Successful"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                            this.getWellSetupData(this.wellId);
                        }, 2000);
                    } else if (xhttp.status === 422) {
                        this.message = "Save Failed"
                        this.$$("#showDialogData").open();
                        setTimeout(() => {
                            this.$$("#showDialogData").close();
                        }, 2000);
                    }
                    try {
                        var responseMessage = {}
                        if (xhttp.response.trim() !== "") {
                            responseMessage = JSON.parse(xhttp.response);
                        }
                    } catch (e) {
                        console.log("Streaming... (Or an error occurred)");
                        console.log(e);
                    }
                }.bind(this);
                var url = "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup/update";
                var params = "well_id=" + wellId + "&user_id=" + this.loggedUser;
                xhttp.open("POST", url + "?" + params, false);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send(JSON.stringify(payload));
            },
            addDenominationToCell: function(param) {
                for (var i = 0; i < param.length; ++i) {
                    for (var j = 0; j < param[i].valueText.length; ++j) {
                        if (param[i].valueText[j].value != null) {
                            param[i].valueText[j].denomination = param[i].denomination;
                        }

                    }
                }
                return param;
            },

            reOrder: function(param, oldindex, newindex) {
                for (var i = 0; i < param.length; ++i) {
                    var b = param[i].valueText[oldindex];
                    param[i].valueText[oldindex] = param[i].valueText[newindex];
                    param[i].valueText[newindex] = b;
                }
                return param;
            },
            getAlertManagementData: function(alarmOverviewNew) {
                function generateRow(list, name, unit) {
                    var newList = [];
                    for (var i = 0; i < list.length; ++i) {
                        var showToggle = true;
                        var thresholdReadonlyClass = 'bhtinputForm';
                        if (list[i].alert_name == 'Pressure Band' || list[i].alert_name == 'TFSR Increment' || list[i].alert_name == 'Calibration Steam Rate') {
                            showToggle = false;
                        }
                        if (list[i].alert_name == 'Pressure Target') {
                            thresholdReadonlyClass = 'thresholdReadonlyClass';
                        }
                        this.show_alert_type = true;
                        if (list[i].alert_type == null || list[i].alert_type == "" || list[i].alert_type == undefined) {
                            this.show_alert_type = false;
                        }
                        newList.push({
                            "show_alert_type": show_alert_type,
                            "name": name,
                            "uom": unit,
                            "alert_name": list[i].alert_name,
                            "alert_type": list[i].alert_type,
                            "enable": list[i].enable,
                            "current": list[i].current,
                            "threshold": list[i].threshold,
                            "showToggle": showToggle,
                            "param_key": list[i].param_key,
                            "thresholdReadonlyClass": thresholdReadonlyClass
                        });
                    }
                    return newList;
                }

                var alertManagementList = [];
                this.showAlertManagement = false;
                if (this.loggedUser !== "demo_user") {
                    this.showAlertManagement = true;
                    alertManagementList.push({
                        "name": "BHT",
                        "uom": "degC",
                        "list": generateRow(alarmOverviewNew.mainColumns[0].BHT.thresholds, "BHT", "degC")
                    });
                    alertManagementList.push({
                        "name": "BSW & Bottom Water",
                        "uom": "%",
                        "list": generateRow(alarmOverviewNew.mainColumns[0]["BSW & Bottom Water"].thresholds, "BSW & Bottom Water", "%")
                    });
                    alertManagementList.push({
                        "name": "Produced Gas",
                        "uom": "e3m3/d",
                        "list": generateRow(alarmOverviewNew.mainColumns[0]["Produced Gas"].thresholds, "Produced Gas", "e3m3/d")
                    });
                    alertManagementList.push({
                        "name": "Return Pressure",
                        "uom": "kPa",
                        "list": generateRow(alarmOverviewNew.mainColumns[0]["Return Pressure"].thresholds, "Return Pressure", "kPa")
                    });
                    alertManagementList.push({
                        "name": "SAGD Pressure",
                        "uom": "kPa",
                        "list": generateRow(alarmOverviewNew.mainColumns[0]["SAGD Pressure"].thresholds, "SAGD Pressure", "kPa")
                    });
                    alertManagementList.push({
                        "name": "Sudden Pressure",
                        "uom": "kPa",
                        "list": generateRow(alarmOverviewNew.mainColumns[0]["Sudden Pressure"].thresholds, "Sudden Pressure", "kPa")
                    });
                    alertManagementList.push({
                        "name": "Vapour",
                        "uom": "t/d",
                        "list": generateRow(alarmOverviewNew.mainColumns[0]["Vapour"].thresholds, "Vapour", "t/d")
                    });
                }


                return alertManagementList;

            },

            parseWellSetupData: function(tableData) {
                var WellInfo = [];
                var injParameterTable = [];
                var prodParameterTable = [];
                var artificialLift = [];
                // var alarmOverview = [];
                var alarmOverviewNew = [];
                var operator = [];
                var wellTest = [];
                for (var i = 0; i < tableData.length; i++) {
                    if (tableData[i]["titleColumns"] === "Well Info") {
                        var wellData = tableData[i]["mainColumns"];
                        var wellMaintitle = tableData[i]["titleColumns"];
                    }

                    if (tableData[i]["titleColumns"] === "Injection Parameters") {
                        var injectionParameterData = tableData[i]["mainColumns"];
                        var injectionParameterTitle = tableData[i]["titleColumns"];
                        var injectionParameterKeyList = tableData[i]["keyList"];
                    }

                    if (tableData[i]["titleColumns"] === "Production Parameters") {
                        var prodParamerterData = tableData[i]["mainColumns"];
                        var prodParameterTitle = tableData[i]["titleColumns"];
                        var prodParameterKeyList = tableData[i]["keyList"];
                    }

                    // if (tableData[i]["titleColumns"] === "Alert Management") {
                    //     var alertData = tableData[i]["mainColumns"];
                    //     var alertTitle = tableData[i]["titleColumns"];
                    // }

                    if (tableData[i]["titleColumns"] === "Alert Management") {
                        var alertDataNew = tableData[i]["mainColumns"];
                        var alertTitleNew = tableData[i]["titleColumns"];
                    }

                    if (tableData[i]["titleColumns"] === "Artificial Lift") {
                        var espArtificial = tableData[i]["mainColumns"];
                        for (var a = 0; a < espArtificial.length; a++) {
                            this.artificialData = espArtificial[a]["esp"];
                            this.rodpump = espArtificial[a]["rodpump"];
                        }
                        var artificialTitle = tableData[i]["titleColumns"]
                    }

                    if (tableData[i]["titleColumns"] === "Well Tests") {
                        var wellTestColumns = this.wellTestData = tableData[i]["mainColumns"];
                        var wellTestTitle = tableData[i]["titleColumns"];
                    }

                    if (tableData[i]["titleColumns"] === "Operating Comments") {
                        var comments = tableData[i]["mainColumns"];
                        var OperatorTitle = tableData[i]["titleColumns"];
                    }
                }
                for (var k = 0; k < wellData.length; k++) {
                    var value = "";
                    if (wellData[k]["title"] === "Well Type") {
                        var valuetext = wellData[k]["valueText"];
                    }
                    for (var h = 0; h < valuetext.length; h++) {
                        value = valuetext[h]["value"];
                        if (value === "SAGD") {
                            this.wellTypeCheck = true;
                        } else {
                            this.wellTypeCheck = false;
                        }
                    }
                    this.getPumpNumber();
                }

                // injectionParameterData = this.reOrder(injectionParameterData, 0, 4);
                // injectionParameterData = this.reOrder(injectionParameterData, 1, 5);
                // injectionParameterData = this.reOrder(injectionParameterData, 2, 6);
                // injectionParameterData = this.reOrder(injectionParameterData, 3, 4);
                // injectionParameterData = this.reOrder(injectionParameterData, 4, 5);
                // injectionParameterData = this.reOrder(injectionParameterData, 5, 6);


                // prodParamerterData = this.reOrder(prodParamerterData, 0, 2);
                // prodParamerterData = this.reOrder(prodParamerterData, 1, 3);
                // prodParamerterData = this.reOrder(prodParamerterData, 2, 4);
                // prodParamerterData = this.reOrder(prodParamerterData, 3, 4);
                // prodParamerterData = this.addDenominationToCell(prodParamerterData);

                WellInfo.push({
                    "isToggled": false,
                    "layout": "rightAlign",
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [wellMaintitle],
                    "mainColumns": wellData,
                    "operatingComments": comments
                });

                injParameterTable.push({
                    "isToggled": false,
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [injectionParameterTitle],
                    "mainColumns": injectionParameterData,
                    "keyList": injectionParameterKeyList
                });

                prodParameterTable.push({
                    "isProductionToggled": false,
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [prodParameterTitle],
                    "mainColumns": prodParamerterData,
                    "keyList": prodParameterKeyList
                });


                // alarmOverview.push({
                //     "isAlarmToggled": false,
                //     "arrowCSS": "transform: rotate(0deg);",
                //     "titleColumns": [alertTitle],
                //     "mainColumns": alertData
                // });

                alarmOverviewNew.push({
                    "isAlarmToggled": false,
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [alertTitleNew],
                    "mainColumns": alertDataNew
                });


                // SAGD Well
                if (this.wellTypeCheck) {
                    artificialLift.push({
                        "isArtificailLiftToggled": false,
                        "arrowCSS": "transform: rotate(0deg);",
                        "wellType": this.wellTypeCheck,
                        "titleColumns": [artificialTitle],
                        "mainColumns": this.artificialData
                    });
                    // Infill Well
                } else {
                    artificialLift.push({
                        "isArtificailLiftToggled": false,
                        "arrowCSS": "transform: rotate(0deg);",
                        "wellType": this.wellTypeCheck,
                        "titleColumns": [artificialTitle],
                        "mainColumns": this.artificialData,
                        "rodpump": this.rodpump
                    });
                }

                wellTest.push({
                    "isWellTestToggled": false,
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [wellTestTitle],
                    "mainColumns": wellTestColumns
                });

                operator.push({
                    "isOperatorToggled": false,
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [OperatorTitle],
                    "mainColumns": [comments]
                });

                var AlertDataNew = this.getAlertManagementData(alarmOverviewNew[0]);
                alarmOverviewNew = [];
                alarmOverviewNew.push({
                    "isAlarmToggled": false,
                    "arrowCSS": "transform: rotate(0deg);",
                    "titleColumns": [alertTitleNew],
                    "mainColumns": AlertDataNew
                });

                this.AlertDataNew = alarmOverviewNew;
                this.operatingComments = comments.comment;
                this.wellTableData = WellInfo;
                this.injParameterInfo = injParameterTable;
                this.prodParameterInfo = prodParameterTable;
                // this.AlertData = alarmOverview;
                this.artificialTable = artificialLift;
                this.wellTestTable = wellTest;
                this.operatorTable = operator;
                this.wellSetupdataLoad = true;
                this.applyPreservedWellSetupTogledStates();
            },

            //gets the well setup table data
            getWellSetupData: function(wellId) {
                this.wellSetupdataLoad = false;
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    this.handleResponse(xhttp.readyState, xhttp.status, "Well Setup", "get");
                    if (xhttp.readyState == 4 && xhttp.status == 200) {
                        var data = {};
                        data = JSON.parse(xhttp.response);
                        var tableData = data.tables;
                        this.parseWellSetupData(tableData);
                    }
                }.bind(this);

                xhttp.open("GET", "https://adaptix-backend-app-dev.run.aws-usw02-pr.ice.predix.io/api/v1/wellsetup?" +
                  "user_id=" + this.loggedUser + "&well_id=" + wellId, true);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.setRequestHeader("token", this.accessToken);
                xhttp.send();
            },

            getPumpNumber: function() {
                var ArtificialLiftData = this.artificialData;
                for (var h = 0; h < ArtificialLiftData.length; h++) {
                    var lastPumpNumber = ArtificialLiftData[h]["pump_id"];
                }
                if (lastPumpNumber === undefined) {
                    this.newPumpNumber = 1;
                } else {
                    this.newPumpNumber = parseInt(lastPumpNumber) + 1;
                }
                if (!this.wellTypeCheck) {
                    var rodpumpnumber = this.rodpump;
                    for (var k = 0; k < rodpumpnumber.length; k++) {
                        var lastrodPumpNumber = rodpumpnumber[k]["pump"];
                    }
                    if (lastrodPumpNumber === undefined) {
                        this.newrodPumpNumber = 1;
                    } else {
                        this.newrodPumpNumber = parseInt(lastrodPumpNumber) + 1;
                    }
                }
            },
            checkWellType: function(wellType) {
                if (wellType === "SAGD") {

                    return true;
                } else {
                    return false;
                }
            },
            valueIsFirst: function(index) {
                if (index == 0) {
                    return true;
                } else {
                    return false;
                }
            },
            checktitle: function(title) {
                if (title === "GOR" || title === "TFSR") {
                    return false;
                } else {
                    return true;
                }
            },
            valueIsRightAlign: function(value) {
                if (value == "rightAlign") {
                    return true;
                } else {
                    return false;
                }
            },

            valueIsDefault: function(value) {
                if (value == "default" || typeof value == "undefined") {
                    return true;
                } else {
                    return false;
                }
            },

            valueIsInput: function(isInputText) {
                if (isInputText === 'inputText') {
                    return true;
                } else {
                    return false;
                }
            },

            isValueNull: function(value) {
                if (value === "") {
                    return true;
                } else {
                    return false;
                }
            },

            valueIsReadonly: function(isReadOnly) {
                if (isReadOnly === 'readonly') {
                    return true;
                } else {
                    return false;
                }
            },

            getMarginLeft: function(key) {
                var marginLeft;
                if (key.includes('prod_engineer')) {
                    marginLeft = '49px';
                } else if (key.includes('well_id')) {
                    marginLeft = '0px';
                }
                return marginLeft;
            },

            getWidth: function(key) {
                var width;
                if (key.includes('_current')) {
                    width = '-267px';
                } else if (key.includes('_panel_target')) {
                    width = '-316px';
                } else if (key.includes('_eng_target')) {
                    width = '-121px';
                } else if (key.includes('_min')) {
                    width = '-174px';
                } else if (key.includes('_max')) {
                    width = '-224px';
                }
                return width;
            },

            resetWellSetupTogledStates: function() {
                for (var i = 0; i < this.wellSetupViewPreserve.length; ++i) {
                    this.preserveWellSetupTogledStates(this.wellSetupViewPreserve[i].type, false);
                }
            },

            preserveWellSetupTogledStates: function(type, state) {
                var wellSetupOpen = 0;
                for (var i = 0; i < this.wellSetupViewPreserve.length; ++i) {
                    if (this.wellSetupViewPreserve[i].type == type) {
                        this.wellSetupViewPreserve[i].isToggled = state;
                    }
                    if (this.wellSetupViewPreserve[i].isToggled == true) {
                        wellSetupOpen = wellSetupOpen + 1;
                    }
                }
                if (wellSetupOpen > 0) {
                    this.enableWellSetUpAutoRefresh = false;
                }
            },
            applyPreservedWellSetupTogledStates: function() {
                for (var i = 0; i < this.wellSetupViewPreserve.length; ++i) {
                    if (this.wellSetupViewPreserve[i].type == "wellTestTable") {
                        this.wellTestTable[0]["isWellTestToggled"] = this.wellSetupViewPreserve[i].isToggled;
                    }
                    if (this.wellSetupViewPreserve[i].type == "artificialTable") {
                        this.artificialTable[0]["isArtificailLiftToggled"] = this.wellSetupViewPreserve[i].isToggled;
                    }
                    if (this.wellSetupViewPreserve[i].type == "prodParameterInfo") {
                        this.prodParameterInfo[0]["isProductionToggled"] = this.wellSetupViewPreserve[i].isToggled;
                    }
                    if (this.wellSetupViewPreserve[i].type == "operatorTable") {
                        this.operatorTable[0]["isOperatorToggled"] = this.wellSetupViewPreserve[i].isToggled;
                    }
                    if (this.wellSetupViewPreserve[i].type == "AlertData") {
                        this.isAlarmToggled = this.wellSetupViewPreserve[i].isToggled;
                    }
                    if (this.wellSetupViewPreserve[i].type == "injParameterInfo") {
                        this.injParameterInfo[0]["isToggled"] = this.wellSetupViewPreserve[i].isToggled;
                    }
                    if (this.wellSetupViewPreserve[i].type == "wellTableData") {
                        this.wellTableData[0]["isToggled"] = this.wellSetupViewPreserve[i].isToggled;
                    }
                }
            },

            showChildPanel: function(event) {
                var index = event.model.index;
                if (this.wellTableData[index]["isToggled"] === false) {
                    this.set('wellTableData.' + index + '.arrowCSS', "transform: rotate(90deg);");
                    this.set('wellTableData.' + index + '.isToggled', true);
                    this.enableWellSetUpAutoRefresh = false;
                } else {
                    this.set('wellTableData.' + index + '.arrowCSS', "transform: rotate(0deg);");
                    this.set('wellTableData.' + index + '.isToggled', false);
                    this.enableWellSetUpAutoRefresh = true;
                }
                this.preserveWellSetupTogledStates("wellTableData", this.wellTableData[index]["isToggled"]);
            },

            showInjPanel: function(event) {
                var index = event.model.index;
                if (this.injParameterInfo[index]["isToggled"] === false) {
                    this.set('injParameterInfo.' + index + '.arrowCSS', "transform: rotate(90deg);");
                    this.set('injParameterInfo.' + index + '.isToggled', true);
                    this.enableWellSetUpAutoRefresh = false;
                } else {
                    this.set('injParameterInfo.' + index + '.arrowCSS', "transform: rotate(0deg);");
                    this.set('injParameterInfo.' + index + '.isToggled', false);
                    this.enableWellSetUpAutoRefresh = true;
                }
                this.preserveWellSetupTogledStates("injParameterInfo", this.injParameterInfo[index]["isToggled"]);
            },

            showChild: function(event) {
                if (this.isAlarmToggled === false && this.loggedUser !== "demo_user") {
                    this.isAlarmToggled = true;
                    this.arrowCSS = "transform: rotate(90deg);";
                    this.enableWellSetUpAutoRefresh = false;
                } else {
                    this.isAlarmToggled = false;
                    this.arrowCSS = "transform: rotate(0deg);";
                    this.enableWellSetUpAutoRefresh = true;
                }
                this.preserveWellSetupTogledStates("AlertData", this.isAlarmToggled);
            },

            showOperatorChild: function(event) {
                if (this.operatorTable[0]["isOperatorToggled"] === false) {
                    this.set('operatorTable.0.isOperatorToggled', true);
                    this.set('operatorTable.0.arrowCSS', "transform: rotate(90deg);");
                    this.enableWellSetUpAutoRefresh = false;
                } else {
                    this.set('operatorTable.0.isOperatorToggled', false);
                    this.set('operatorTable.0.arrowCSS', "transform: rotate(0deg);");
                    this.enableWellSetUpAutoRefresh = true;
                }

                this.preserveWellSetupTogledStates("operatorTable", this.operatorTable[0]["isOperatorToggled"]);

            },

            showProductionChild: function(event) {
                if (this.artificialTable[0].mainColumns.length > 0 || ('rodpump' in this.artificialTable[0] && this.artificialTable[0].rodpump.length > 0)) {
                    if (this.prodParameterInfo[0]["isProductionToggled"] === false) {
                        this.set('prodParameterInfo.0.isProductionToggled', true);
                        this.set('prodParameterInfo.0.arrowCSS', "transform: rotate(90deg);");
                        this.enableWellSetUpAutoRefresh = false;
                    } else {
                        this.set('prodParameterInfo.0.isProductionToggled', false);
                        this.set('prodParameterInfo.0.arrowCSS', "transform: rotate(0deg);");
                        this.enableWellSetUpAutoRefresh = true;
                    }
                }
                this.preserveWellSetupTogledStates("prodParameterInfo", this.prodParameterInfo[0]["isProductionToggled"]);
            },

            showArtificialPanel: function(event) {
                if (this.artificialTable[0]["isArtificailLiftToggled"] === false) {
                    this.set('artificialTable.0.isArtificailLiftToggled', true);
                    this.set('artificialTable.0.arrowCSS', "transform: rotate(90deg);");
                    this.enableWellSetUpAutoRefresh = false;
                } else {
                    this.set('artificialTable.0.isArtificailLiftToggled', false);
                    this.set('artificialTable.0.arrowCSS', "transform: rotate(0deg);");
                    this.enableWellSetUpAutoRefresh = true;
                }
                this.preserveWellSetupTogledStates("artificialTable", this.artificialTable[0]["isArtificailLiftToggled"]);
            },

            showWellTest: function(event) {
                if (this.wellTestTable[0]["isWellTestToggled"] === false && this.loggedUser !== "demo_user") {
                    this.set('wellTestTable.0.isWellTestToggled', true);
                    this.set('wellTestTable.0.arrowCSS', "transform: rotate(90deg);");
                    this.enableWellSetUpAutoRefresh = false;
                } else {
                    this.set('wellTestTable.0.isWellTestToggled', false);
                    this.set('wellTestTable.0.arrowCSS', "transform: rotate(0deg);");
                    this.enableWellSetUpAutoRefresh = true;
                }
                this.preserveWellSetupTogledStates("wellTestTable", this.wellTestTable[0]["isWellTestToggled"]);
            },


        });

    </script>
</dom-module>
